



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="病原微生物高通量测序数据分析手册">
      
      
        <link rel="canonical" href="https://indexofire.github.io/pathongs/chapter_01/04_awk/">
      
      
        <meta name="author" content="Mark Renton">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.7.3">
    
    
      
        <title>04. 数据处理常用工具之 awk - Pathogen NGS 数据分析入门</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.8d40d89b.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#awk-ngs" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://indexofire.github.io/pathongs" title="Pathogen NGS 数据分析入门" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Pathogen NGS 数据分析入门
              </span>
              <span class="md-header-nav__topic">
                04. 数据处理常用工具之 awk
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://indexofire.github.io/pathongs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Indexofire
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    Pathogen NGS 数据分析入门
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://indexofire.github.io/pathongs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Indexofire
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="前言" class="md-nav__link">
      前言
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      第一章 背景知识介绍
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        第一章 背景知识介绍
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../01_basic-cml/" title="01. Linux 系统操作基本命令" class="md-nav__link">
      01. Linux 系统操作基本命令
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../02_linux-installation/" title="02. Linux 安装实例" class="md-nav__link">
      02. Linux 安装实例
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../03_linux-administration/" title="03. Linux 系统管理" class="md-nav__link">
      03. Linux 系统管理
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        04. 数据处理常用工具之 awk
      </label>
    
    <a href="./" title="04. 数据处理常用工具之 awk" class="md-nav__link md-nav__link--active">
      04. 数据处理常用工具之 awk
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-awk" title="1. 了解 awk 基本用法" class="md-nav__link">
    1. 了解 awk 基本用法
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-awk" title="2. awk 基本语法" class="md-nav__link">
    2. awk 基本语法
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-pattern" title="2.1 Pattern" class="md-nav__link">
    2.1 Pattern
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211" title="2.1.1 正则表达式" class="md-nav__link">
    2.1.1 正则表达式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212" title="2.1.2 语句表达" class="md-nav__link">
    2.1.2 语句表达
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-action" title="2.2 Action" class="md-nav__link">
    2.2 Action
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-ifelse" title="2.2.1 if...else" class="md-nav__link">
    2.2.1 if...else
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-while" title="2.2.2 while" class="md-nav__link">
    2.2.2 while
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" title="2.3. 内建变量" class="md-nav__link">
    2.3. 内建变量
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231-awk" title="2.3.1 控制 awk 的变量" class="md-nav__link">
    2.3.1 控制 awk 的变量
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232" title="2.3.2 传递信息的变量" class="md-nav__link">
    2.3.2 传递信息的变量
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24" title="2.4. 内建函数" class="md-nav__link">
    2.4. 内建函数
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#241" title="2.4.1 数学函数" class="md-nav__link">
    2.4.1 数学函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#242" title="2.4.2 字符串函数" class="md-nav__link">
    2.4.2 字符串函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#243" title="2.4.3 输入输出函数" class="md-nav__link">
    2.4.3 输入输出函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#244" title="2.4.4 时间函数" class="md-nav__link">
    2.4.4 时间函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#245-bit" title="2.4.5 Bit操作函数" class="md-nav__link">
    2.4.5 Bit操作函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#246" title="2.4.6 其他" class="md-nav__link">
    2.4.6 其他
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" title="3. 示例" class="md-nav__link">
    3. 示例
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" title="3.1 对列的操作" class="md-nav__link">
    3.1 对列的操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" title="3.2 对行的操作" class="md-nav__link">
    3.2 对行的操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" title="3.3 格式化输出" class="md-nav__link">
    3.3 格式化输出
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34" title="3.4 合并文件" class="md-nav__link">
    3.4 合并文件
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../05_bioawk/" title="05. 测序数据工具 bioawk" class="md-nav__link">
      05. 测序数据工具 bioawk
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../06_python/" title="06. 了解 Python 生活轻松一点" class="md-nav__link">
      06. 了解 Python 生活轻松一点
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../07_shell/" title="07. 生信分析要学一点 shell" class="md-nav__link">
      07. 生信分析要学一点 shell
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      第二章 序列处理
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        第二章 序列处理
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../chapter_02/01_emboss/" title="01. EMBOSS 工具集" class="md-nav__link">
      01. EMBOSS 工具集
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../chapter_02/02_blast/" title="02. Blast 与 Blast+" class="md-nav__link">
      02. Blast 与 Blast+
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../chapter_02/08_seqkit/" title="03. 国产序列处理神器 SeqKit" class="md-nav__link">
      03. 国产序列处理神器 SeqKit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../chapter_02/09_kmer/" title="04. K-mer 处理工具" class="md-nav__link">
      04. K-mer 处理工具
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      第三章 数据的上传和下载
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        第三章 数据的上传和下载
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../chapter_03/01_databases/" title="01 生物公共数据库" class="md-nav__link">
      01 生物公共数据库
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../chapter_03/02_fileformat/" title="02 生物数据文件格式" class="md-nav__link">
      02 生物数据文件格式
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../chapter_03/03_edirect/" title="03. 玩转 edirect" class="md-nav__link">
      03. 玩转 edirect
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      第四章 基因组组装
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        第四章 基因组组装
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../chapter_04/03_bacteria-assembly/" title="03. 细菌基因组组装" class="md-nav__link">
      03. 细菌基因组组装
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../chapter_04/04_virus-assembly/" title="04. 病毒基因组组装" class="md-nav__link">
      04. 病毒基因组组装
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      第五章 基因组序列注释
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        第五章 基因组序列注释
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../chapter_05/01_prokka/" title="01. Prokka 快速注释" class="md-nav__link">
      01. Prokka 快速注释
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../chapter_05/02_rast/" title="02. rast" class="md-nav__link">
      02. rast
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../chapter_05/03_PGAAP/" title="03. PGAAP" class="md-nav__link">
      03. PGAAP
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      第十章 基因组分析实践
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        第十章 基因组分析实践
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../chapter_10/01_trace-Pae-from-different-source-by-SNP/" title="10.1 铜绿假单胞菌不同来源株SNP溯源" class="md-nav__link">
      10.1 铜绿假单胞菌不同来源株SNP溯源
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../chapter_10/02_comparative-analysis-Ban-genomes/" title="10.2 炭疽芽胞杆菌比较基因组学研究" class="md-nav__link">
      10.2 炭疽芽胞杆菌比较基因组学研究
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-awk" title="1. 了解 awk 基本用法" class="md-nav__link">
    1. 了解 awk 基本用法
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-awk" title="2. awk 基本语法" class="md-nav__link">
    2. awk 基本语法
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-pattern" title="2.1 Pattern" class="md-nav__link">
    2.1 Pattern
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211" title="2.1.1 正则表达式" class="md-nav__link">
    2.1.1 正则表达式
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#212" title="2.1.2 语句表达" class="md-nav__link">
    2.1.2 语句表达
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-action" title="2.2 Action" class="md-nav__link">
    2.2 Action
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-ifelse" title="2.2.1 if...else" class="md-nav__link">
    2.2.1 if...else
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-while" title="2.2.2 while" class="md-nav__link">
    2.2.2 while
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" title="2.3. 内建变量" class="md-nav__link">
    2.3. 内建变量
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#231-awk" title="2.3.1 控制 awk 的变量" class="md-nav__link">
    2.3.1 控制 awk 的变量
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#232" title="2.3.2 传递信息的变量" class="md-nav__link">
    2.3.2 传递信息的变量
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24" title="2.4. 内建函数" class="md-nav__link">
    2.4. 内建函数
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#241" title="2.4.1 数学函数" class="md-nav__link">
    2.4.1 数学函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#242" title="2.4.2 字符串函数" class="md-nav__link">
    2.4.2 字符串函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#243" title="2.4.3 输入输出函数" class="md-nav__link">
    2.4.3 输入输出函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#244" title="2.4.4 时间函数" class="md-nav__link">
    2.4.4 时间函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#245-bit" title="2.4.5 Bit操作函数" class="md-nav__link">
    2.4.5 Bit操作函数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#246" title="2.4.6 其他" class="md-nav__link">
    2.4.6 其他
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" title="3. 示例" class="md-nav__link">
    3. 示例
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" title="3.1 对列的操作" class="md-nav__link">
    3.1 对列的操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" title="3.2 对行的操作" class="md-nav__link">
    3.2 对行的操作
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" title="3.3 格式化输出" class="md-nav__link">
    3.3 格式化输出
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34" title="3.4 合并文件" class="md-nav__link">
    3.4 合并文件
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="awk-ngs">用 awk 处理 NGS 数据<a class="headerlink" href="#awk-ngs" title="Permanent link">&para;</a></h1>
<p>awk 工具常用来对文件内容按行进行匹配搜索，一旦某一行中的内容与搜索条件匹配，则对该内容做进一步操作。本质上讲，awk 属于数据驱动的程序，因此 awk 程序也非常容易编写与阅读。高通量测序技术带来大量的数据，而生物学分析往往直需要其中特定的部分，这时 awk 就可以大显身手为测序数据的转换与分析提供帮助。我们首先来看一个最简单的 awk 命令程序：</p>
<div class="codehilite"><pre><span></span><span class="c1"># 将contigs.fasta文件中序列ID打印到终端</span>
<span class="c1"># contigs.fasta内如：</span>
<span class="c1"># &gt;seq1</span>
<span class="c1"># ATGGGGTCCGATTACCG</span>
<span class="c1"># &gt;seq2</span>
<span class="c1"># CGGNTTACCGYGACAGT</span>

$ awk <span class="s1">&#39;/&gt;/&#39;</span> contigs.fasta

<span class="c1"># 屏幕上会输出：</span>
&gt;seq1
&gt;seq2

$ awk <span class="s1">&#39;/^ATG/&#39;</span> contigs.fasta内如

<span class="c1">#屏幕上会输出：</span>
ATGGGGTCCGATTACCG
</pre></div>

<p>这个命令很简单，就是将 fasta 文件中包含 '&gt;' 字符的行输出，实际上就是将所有的序列头内容输出。作用类似<code class="codehilite">grep &quot;&gt;&quot;</code>。</p>
<p>awk 程序主体主要包括 pattern，action和input file：</p>
<ul>
<li>pattern 表示所要搜索的内容，可以用正则表达式。</li>
<li>{ action } 则表示搜索匹配后要做的操作。</li>
<li>input file：所要搜索的输入内容，比如前面例子的 contigs.fasta</li>
</ul>
<p>awk可以在shell里直接运行：</p>
<div class="codehilite"><pre><span></span>$ awk <span class="s1">&#39;pattern { action }&#39;</span> input_file
</pre></div>

<p>也可以写成awk程序来运行。一个 awk 程序往往如下所示：</p>
<div class="codehilite"><pre><span></span><span class="c1">#!/usr/bin/awk -f</span>
<span class="nx">pattern</span> <span class="p">{</span> <span class="nx">action</span> <span class="p">}</span>
</pre></div>

<p>awk 可以不需要输入文件；对于pattern和action来说，2者至少要有一个才能运行。如果没有pattern，则默认匹配任何输入，按行输出并执行action。如果没有action，则匹配pattern并按行输出不做额外操作。</p>
<div class="codehilite"><pre><span></span><span class="c1"># 尝试以下语句，在终端打印`hello world`。这里BEGIN是pattern，{ print &quot;hello world&quot; } 是action</span>
$ awk <span class="s1">&#39;BEGIN { print &quot;hello world&quot; }&#39;</span>

<span class="c1"># 模拟cat输出终端输入的字符。这里省略了pattern</span>
$ awk <span class="s1">&#39;{ print }&#39;</span>
</pre></div>

<p>上面这个例子可以保存成文件（如<code class="codehilite">hello_world</code>）来运行，文件内容如下：</p>
<div class="codehilite"><pre><span></span><span class="c1">#!/usr/bin/awk -f</span>
<span class="c1"># 注意不同发行版的linux，awk路径有所区别</span>

<span class="nb">BEGIN</span> <span class="p">{</span> <span class="kr">print</span> <span class="s2">&quot;hello world&quot;</span> <span class="p">}</span>
</pre></div>

<p>运行这个程序：</p>
<div class="codehilite"><pre><span></span>$ chmod +x hello_world
$ ./hello_world
</pre></div>

<h2 id="1-awk">1. 了解 awk 基本用法<a class="headerlink" href="#1-awk" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span>$ awk <span class="s1">&#39;$1~/gene1/ { print $2 }&#39;</span> input_data
</pre></div>

<p>作用与 cat + grep + sed 类似</p>
<div class="codehilite"><pre><span></span>$ cat input_data <span class="p">|</span> grep gene1 <span class="p">|</span> sed <span class="o">{</span><span class="nv">$1</span><span class="o">}</span>
</pre></div>

<h2 id="2-awk">2. awk 基本语法<a class="headerlink" href="#2-awk" title="Permanent link">&para;</a></h2>
<h3 id="21-pattern">2.1 Pattern<a class="headerlink" href="#21-pattern" title="Permanent link">&para;</a></h3>
<h4 id="211">2.1.1 正则表达式<a class="headerlink" href="#211" title="Permanent link">&para;</a></h4>
<p>pattern 可以采用正则表达式来匹配内容。用<code class="codehilite">/ regular expression /</code>来表示。</p>
<p>几个特殊的Patterns：</p>
<ul>
<li>BEGIN:</li>
<li>END:</li>
<li>BEGINFILE:</li>
<li>ENDFILE:</li>
</ul>
<h4 id="212">2.1.2 语句表达<a class="headerlink" href="#212" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span>$ awk <span class="s1">&#39;$1 == &quot;gene&quot; { print $2 }&#39;</span> genes.list
</pre></div>

<h3 id="22-action">2.2 Action<a class="headerlink" href="#22-action" title="Permanent link">&para;</a></h3>
<h4 id="221-ifelse">2.2.1 if...else<a class="headerlink" href="#221-ifelse" title="Permanent link">&para;</a></h4>
<div class="codehilite"><pre><span></span><span class="c1"># if block</span>
$ awk <span class="s1">&#39;{if(condition) print $1}&#39;</span> input

<span class="c1"># if else block</span>
$ awk <span class="s1">&#39;{if(condition)</span>
<span class="s1">&gt;     print $1</span>
<span class="s1">&gt; else</span>
<span class="s1">&gt;     print $2</span>
<span class="s1">&gt; }&#39;</span> input
</pre></div>

<h4 id="222-while">2.2.2 while<a class="headerlink" href="#222-while" title="Permanent link">&para;</a></h4>
<p>while 控制语句要换行，用4个空格划分控制块。</p>
<div class="codehilite"><pre><span></span>$ awk <span class="s1">&#39;{ i = 1</span>
<span class="s1">&gt;     while (i &lt;= 3) {</span>
<span class="s1">&gt;         print $i</span>
<span class="s1">&gt;         i++</span>
<span class="s1">&gt;     }</span>
<span class="s1">&gt; }&#39;</span> input
</pre></div>

<h3 id="23">2.3. 内建变量<a class="headerlink" href="#23" title="Permanent link">&para;</a></h3>
<h4 id="231-awk">2.3.1 控制 awk 的变量<a class="headerlink" href="#231-awk" title="Permanent link">&para;</a></h4>
<ul>
<li>BINMODE #</li>
<li>CONVFMT</li>
<li>FIELDWIDTHS #</li>
<li>FPAT #</li>
<li>FS</li>
<li>IGNORECASE #</li>
<li>LINT #</li>
<li>OFMT</li>
<li>OFS</li>
<li>ORS</li>
<li>PREC #</li>
<li>ROUNDMODE #</li>
<li>RS</li>
<li>SUBSEP</li>
<li>TEXTDOMAIN #</li>
</ul>
<h3 id="232">2.3.2 传递信息的变量<a class="headerlink" href="#232" title="Permanent link">&para;</a></h3>
<ul>
<li>ARGC , ARGV</li>
<li>ARGIND #</li>
<li>ENVIRON</li>
<li>ERRNO #</li>
<li>FILENAME</li>
<li>FNR</li>
<li>NF</li>
<li>FUNCTAB #</li>
<li>NR</li>
<li>PROCINFO #</li>
<li>RLENGTH</li>
<li>RSTART</li>
<li>RT #</li>
<li>SYMTAB #</li>
</ul>
<h3 id="24">2.4. 内建函数<a class="headerlink" href="#24" title="Permanent link">&para;</a></h3>
<h4 id="241">2.4.1 数学函数<a class="headerlink" href="#241" title="Permanent link">&para;</a></h4>
<ul>
<li>atan2(y, x)</li>
<li>cos(x)</li>
<li>exp(x)</li>
<li>int(x)</li>
<li>log(x)</li>
<li>rand()</li>
<li>sin(x)</li>
<li>sqrt(x)</li>
<li>srand([ x ])</li>
</ul>
<h4 id="242">2.4.2 字符串函数<a class="headerlink" href="#242" title="Permanent link">&para;</a></h4>
<ul>
<li>asort(source [ , dest [ , how ] ] ) #</li>
<li>asorti(source [ , dest [ , how ] ] ) #</li>
<li>gensub(regexp, replacement, how [ , target ] ) #</li>
<li>gsub(regexp, replacement [ , target ] )</li>
<li>index(in, find)</li>
<li>length( [ string ] )</li>
<li>match(string, regexp [ , array ] )</li>
<li>patsplit(string, array [ , fieldpat [ , seps ] ] ) #</li>
<li>split(string, array [ , fieldsep [ , seps ] ] )</li>
<li>sprintf(format, expression1, ...)</li>
<li>strtonum(str) #</li>
<li>sub(regexp, replacement [ , target ] )</li>
<li>substr(string, start [ , length ] )</li>
<li>tolower(string)</li>
<li>toupper(string)</li>
</ul>
<h4 id="243">2.4.3 输入输出函数<a class="headerlink" href="#243" title="Permanent link">&para;</a></h4>
<ul>
<li>close(filename [ , how ] )</li>
<li>fflush( [ filename ] )</li>
<li>system(command)</li>
</ul>
<h4 id="244">2.4.4 时间函数<a class="headerlink" href="#244" title="Permanent link">&para;</a></h4>
<ul>
<li>mktime(datespec)</li>
<li>strftime( [ format [ , timestamp [ , utc-flag ] ] ] )</li>
<li>systime()</li>
</ul>
<h4 id="245-bit">2.4.5 Bit操作函数<a class="headerlink" href="#245-bit" title="Permanent link">&para;</a></h4>
<ul>
<li>and(v1, v2 [, ...])</li>
<li>compl(val)</li>
<li>lshift(val, count)</li>
<li>or(v1, v2 [, ...])</li>
<li>rshift(val, count)</li>
<li>xor(v1, v2 [, ...])</li>
</ul>
<h4 id="246">2.4.6 其他<a class="headerlink" href="#246" title="Permanent link">&para;</a></h4>
<ul>
<li>isarray(x)</li>
<li>bindtextdomain(directory [ , domain ] )</li>
<li>dcgettext(string [ , domain [ , category ] ] )</li>
<li>dcngettext(string1, string2, number [ , domain [ , category ] ] )</li>
</ul>
<h2 id="3">3. 示例<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<p>示例部分介绍 awk 在日常中，特别是处理 ngs 数据时的一些例子。</p>
<h3 id="31">3.1 对列的操作<a class="headerlink" href="#31" title="Permanent link">&para;</a></h3>
<p><strong>调整列顺序</strong>：在有GUI的操作系统里，一般采用类似 excel, calc 之类的软件导入数据文件，然后剪切各列调整顺序。如果用 awk 来解决也很方便，你只需要考虑好调整的各列顺序即可，action 里的{ print ...}顺序就是重新调整后的各列顺序：</p>
<p><div class="codehilite"><pre><span></span>$ awk <span class="s1">&#39;{ print $3, $5, $7, $2, $1, $4, $6 }&#39;</span> infile.txt &gt; outfile.txt
</pre></div>
<strong>插入列</strong>：有时候要插入一列数据，用awk可以很方便的实现：</p>
<div class="codehilite"><pre><span></span>$ awk <span class="s1">&#39;{ print $1, $2 &quot;gene expression&quot;, $3}&#39;</span> infile.txt &gt; outfile.txt
</pre></div>

<h3 id="32">3.2 对行的操作<a class="headerlink" href="#32" title="Permanent link">&para;</a></h3>
<p><strong>去除重复的行</strong>：有时候数据里含有重复的行，而当你只需要唯一性数据时，就可以用这行程序，只保留具有唯一性的数据行。</p>
<div class="codehilite"><pre><span></span>$ awk <span class="s1">&#39;!x[$0]++&#39;</span> infile.txt &gt; outfile.txt
</pre></div>

<h3 id="33">3.3 格式化输出<a class="headerlink" href="#33" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>$ awk -F<span class="s2">&quot;:&quot;</span> <span class="s1">&#39;BEGIN { printf &quot;%-8s %-3s&quot;, &quot;User&quot;, &quot;UID&quot; } \</span>
<span class="s1">&gt; NR==1,NR==20 { printf &quot;%-8s %-3d&quot;, $1, $3 }&#39;</span> /etc/passwd
</pre></div>

<h3 id="34">3.4 合并文件<a class="headerlink" href="#34" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span><span class="c1"># 搜索当前目录下所有包含序列ATCCGGA的fasta文件，并输出文件名和行号以及序列</span>
$ find . -type f -name <span class="s2">&quot;*.fasta&quot;</span> -exec awk <span class="s1">&#39;/ATCCCGGA/ {print FILENAME, NR, $0}&#39;</span> <span class="o">{}</span> <span class="se">\+</span>
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../03_linux-administration/" title="03. Linux 系统管理" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                03. Linux 系统管理
              </span>
            </div>
          </a>
        
        
          <a href="../05_bioawk/" title="05. 测序数据工具 bioawk" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                05. 测序数据工具 bioawk
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016 - 2018 HZCDC@Lab
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.b438e6c5.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:"../.."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/js-sequence-diagrams/1.0.6/sequence-diagram-min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script>
      
        <script src="../../assets/js/umlconvert.js"></script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-55420348-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>