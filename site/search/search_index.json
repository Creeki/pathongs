{
    "docs": [
        {
            "location": "/",
            "text": "Welcome to MkDocs\n\u00b6\n\n\nFor full documentation visit \nmkdocs.org\n.\n\n\nCommands\n\u00b6\n\n\n\n\nmkdocs new [dir-name]\n - Create a new project.\n\n\nmkdocs serve\n - Start the live-reloading docs server.\n\n\nmkdocs build\n - Build the documentation site.\n\n\nmkdocs help\n - Print this help message.\n\n\n\n\nProject layout\n\u00b6\n\n\nmkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.",
            "title": "\u524d\u8a00"
        },
        {
            "location": "/#welcome-to-mkdocs",
            "text": "For full documentation visit  mkdocs.org .",
            "title": "Welcome to MkDocs"
        },
        {
            "location": "/#commands",
            "text": "mkdocs new [dir-name]  - Create a new project.  mkdocs serve  - Start the live-reloading docs server.  mkdocs build  - Build the documentation site.  mkdocs help  - Print this help message.",
            "title": "Commands"
        },
        {
            "location": "/#project-layout",
            "text": "mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.",
            "title": "Project layout"
        },
        {
            "location": "/chapter_01/01_basic-cml/",
            "text": "\u57fa\u672c\u547d\u4ee4\n\u00b6\n\n\n\u7b14\u8bb0\u4e2d\u4f7f\u7528\u8bb8\u591a Linux \u547d\u4ee4\u884c\uff0c\u8fd9\u91cc\u505a\u4e00\u4e2a\u5feb\u901f\u7b14\u8bb0\u4ee5\u5907\u67e5\u8be2\u3002\u4ee5 bash \u4e3a\u4f8b\u3002\u5176\u4ed6\u7684 shell \u6bd4\u5982 csh, tcsh \u7b49\u5927\u90e8\u5206\u547d\u4ee4\u548c\u53c2\u6570\u90fd\u662f\u4e00\u81f4\u7684\u3002\n\n\n\u6587\u4ef6\u64cd\u4f5c\n\u00b6\n\n\n\n\nls\n: \u5217\u51fa\u6587\u4ef6\u5939\u7684\u6587\u4ef6\n\n\n\n\n# \u663e\u793a '~/data' \u6587\u4ef6\u5939\u91cc\u7684\u6587\u4ef6\n\n$ ls ~/data\n\n\n# \u663e\u793a\u5305\u62ec\u9690\u542b\u6587\u4ef6\u7684 '~/data' \u6587\u4ef6\u5939\u91cc\u7684\u6240\u6709\u6587\u4ef6\n\n$ ls -la ~/data\n\n\n# \u6587\u4ef6\u6309\u7167\u65f6\u95f4\u6392\u5e8f\n\n$ ls -t ~/data\n\n\n# \u67e5\u770b\u6240\u6709 fastq \u6587\u4ef6\n\n$ ls ~/data/*.fastq\n\n\n\n\n\n\ncd\n: \u6539\u53d8\u6587\u4ef6\u5939\n\n\n\n\n# \u4ece\u5f53\u524d\u6587\u4ef6\u5939 '~/data' \u66f4\u6362\u5230 '~/app' \u6587\u4ef6\u5939\n\n~/data$ \ncd\n ~/app\n\n\n# \u4ece\u4efb\u4f55\u4f4d\u7f6e\u5207\u6362\u56de\u7528\u6237\u4e3b\u76ee\u5f55 '/home/User'\n\n$ \ncd\n\n\n\n# \u56de\u9000\u4e0a\u4e00\u4e2a\u8bbf\u95ee\u76ee\u5f55\n\n$ \ncd\n -\n\n\n# \u8fd4\u56de\u4e0a\u4e00\u7ea7\u76ee\u5f55\n\n$ \ncd\n ..\n\n\n# \u8fd4\u56de\u591a\u7ea7\u76ee\u5f55\u51b0\u524d\u5f80\u53e6\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u8fd9\u91cc '\\' \u662f\u8f6c\u4e49\u7b26\uff0c\u5c06\u7a7a\u683c\u952e\u6b63\u786e\u8f6c\u4e49\n\n$ \ncd\n ../../../new\n\\ \ndirectory\n\n\n\n\n\n\npwd\n: \u663e\u793a\u5f53\u524d\u76ee\u5f55\n\n\n\n\n# \u5f53\u4e0d\u77e5\u9053\u5f53\u524d\u5904\u4e8e\u4ec0\u4e48\u8def\u5f84\u65f6\uff0c\u53ef\u4ee5\u7528\u8fd9\u4e2a\u547d\u4ee4\u663e\u793a\n\n$ \npwd\n\n\n\n\n\n\n\nmkdir\n: \u5efa\u7acb\u65b0\u6587\u4ef6\u5939\n\n\n\n\n# \u5f53\u524d\u8def\u5f84\u4e0b\u65b0\u5efa\u4e00\u4e2a\u540d\u53eb 'new' \u7684\u6587\u4ef6\u5939\n\n$ mkdir new\n\n\n\n\n\n\nrmdir\n: \u5220\u9664\u6587\u4ef6\u5939\n\n\n\n\n# \u5220\u9664\u5f53\u524d\u8def\u5f84\u7684\u6587\u4ef6\u5939 'new'\n\n$ rmdir new\n\n\n\n\n\n\nrm\n: \u5220\u9664\u6587\u4ef6\n\n\n\n\n# \u5220\u9664\u5f53\u524d\u6587\u4ef6\u5939\u7684\u6240\u6709\u540e\u7f00\u662f '.sra' \u7684\u6587\u4ef6\n\n$ rm *.sra\n\n\n# \u5220\u9664\u6587\u4ef6\u5939 'new' \u4ee5\u53ca 'new' \u4e0b\u7684\u6240\u6709\u5b50\u6587\u4ef6\u4e0e\u5b50\u76ee\u5f55\n\n$ rm -R new\n\n\n# \u4e0d\u5f39\u51fa\u5220\u9664\u786e\u8ba4\u63d0\u793a\uff0c\u5220\u9664\u6240\u6709 '.tmp' \u6587\u4ef6\n\n$ rm -f *.tmp\n\n\n\n\n\n\ncp\n: \u590d\u5236\u6587\u4ef6\n\n\n\n\n# \u590d\u5236 'test.txt' \u6587\u4ef6\u5230\u6587\u4ef6\u5939 '~/abc' \u4e2d\n\n$ cp test.txt ~/abc\n\n\n\n\n\n\nmv\n: \u79fb\u52a8\u6587\u4ef6\u6216\u6587\u4ef6\u5939\n\n\n\n\n# \u79fb\u52a8 'test.txt' \u6587\u4ef6\u5230\u6587\u4ef6\u5939 '~/abc' \u4e2d\u5e76\u6539\u540d\u53eb 'test1.txt'\n\n$ mv test.txt ~/abc/test1.txt\n\n\n\n\n\n\nwhich\n: \u67e5\u627e\u53ef\u6267\u884c\u6587\u4ef6\u7684\u7cfb\u7edf\u8def\u5f84\n\n\n\n\n# \u6253\u5370\u51fa\u7cfb\u7edf\u5e26\u7684 python \u7a0b\u5e8f\u7684\u8def\u5f84\n\n$ which python\n\n\n\n\n\n\nwc\n: \u7edf\u8ba1\u4e00\u4e2a\u6587\u4ef6\u7684\u884c\uff0c\u5b57\u7b26\u548c\u5b57\u8282\u6570\n\n\n\n\n# \u8f93\u51fa\u6587\u4ef6 'text.txt' \u7684\u884c\u6570\uff0c\u5b57\u7b26\u6570\u548c\u5b57\u8282\u6570\u3002\n\n$ wc text.txt\n\n\n\n\n\n\nfind\n: \u67e5\u627e\u6587\u4ef6\n\n\n\n\n# \u67e5\u627e\u4e00\u4e2a\u6587\u4ef6\uff0c\u6bd4\u5982 .bashrc, /etc\u8def\u5f84\u4e0b\u7684hosts\u6587\u4ef6\n\n$ find .bashrc\n$ find /etc/hosts\n\n\n# \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u53ca\u5b50\u76ee\u5f55\u540e\u7f00\u4e3agz\u7684\u6587\u4ef6\n\n$ find . -type f -name \n\"*.gz\"\n\n\n\n# \u67e5\u627e\u5b50\u76ee\u5f55\u6df1\u5ea6\u4e3a4\u5c42\u76ee\u5f55\u7684fasta\u6587\u4ef6\n\n$ find . -type f -maxdepth \n4\n -name \n\"*.fasta\"\n\n\n\n# \u67e5\u627e/var/log\u8def\u5f84\u4e0b\u6743\u9650\u4e3a755\u7684\u76ee\u5f55\n\n$ find /var/log -type d -perm \n755\n\n\n\n# \u6309\u7167\u7528\u6237\u67e5\u627e\u7528\u6237\uff0c\u5728tmp\u8def\u5f84\u4e0b\u67e5\u627e\u5c5e\u4e8e\u7528\u6237 nginx \u7684\u6587\u4ef6\n\n$ find /tmp -user nginx\n\n# \u7528\u6237\u4e3bhome\u8def\u5f84\u4e0b\u67e5\u627e\u5c5e\u4e8e root \u6743\u9650\uff0c\u5c5e\u6027\u4e3a644\u7684\u6587\u4ef6\n\n$ find . -user root -perm \n644\n\n\n\n\n\n\n\nps\n: \u67e5\u770b\u7cfb\u7edf\u8fdb\u7a0b\n\n\n\n\n#ps\u4f1a\u5728\u7ec8\u7aef\u6253\u5370\u7cfb\u7edf\u8fdb\u7a0b\uff0c\u5404\u5217\u7684\u542b\u4e49\u662f:\n\n\n* USER: \u8fd0\u884c\u8be5\u8fdb\u7a0b\u7684\u7528\u6237\n* PID: \u8fd0\u884c\u7740\u7684\u547d\u4ee4\n(\nCMD\n)\n\u7684\u8fdb\u7a0b\u7f16\u53f7\n* %CPU: CPU\u5360\u7528\n* %MEM: \u5185\u5b58\u5360\u7528\n* VSC:\n* RSS:\n* TTY: \u547d\u4ee4\u6240\u8fd0\u884c\u7684\u4f4d\u7f6e\uff08\u7ec8\u7aef\uff09\n* STAT:\n* TIME: \u8fd0\u884c\u7740\u7684\u8be5\u547d\u4ee4\u6240\u5360\u7528\u7684CPU\u5904\u7406\u65f6\u95f4\n* COMMAND: \u8be5\u8fdb\u7a0b\u6240\u8fd0\u884c\u7684\u547d\u4ee4\n\n\n\n\n# \u663e\u793a\u8be6\u7ec6\u7684\u8fdb\u7a0b\u4fe1\u606f\n\n$ ps -waux\n\n\n# \u8fc7\u6ee4\u7528\u6237root\u7684\u8fdb\u7a0b\n\n$ ps -u root\n\n\n# \u6839\u636e\u4e0d\u540c\u53c2\u6570\u4f7f\u7528\u6765\u6392\u5e8f\u8fdb\u7a0b\uff0c\u5e76\u53ea\u73b0\u5b9e\u6392\u540d\u524d10\u7684\u8fdb\u7a0b\n\n$ ps -aux --sort -pcpu \n|\n head -n \n11\n\n$ ps -aux --sort -pmem \n|\n head -n \n11\n\n$ ps -aux --sort -pcpu,+pmem \n|\n head -n \n11\n\n\n\n# \u8fc7\u6ee4\u8fdb\u7a0b\u540d\n\n$ ps -f -C chrome\n\n\n# \u6839\u636ePID\u8fc7\u6ee4\n\n$ ps -L \n1000\n\n\n\n# \u6811\u5f62\u73b0\u5b9e\u8fdb\u7a0b\n\n$ ps -axjf\n\n\n\n\n\u8f93\u51fa\u6587\u4ef6\u5934\u5c3e\u90e8\u5185\u5bb9\n\u00b6\n\n\n\u64cd\u4f5c\u5927\u6587\u4ef6\u5982fastq\u6d4b\u5e8f\u539f\u59cb\u6570\u636e\uff0c\u5e38\u5e38\u4e0d\u9700\u8981\u5c06\u51e0\u767eM\u751a\u81f3\u4e0aG\u7684\u6570\u636e\u5168\u90e8\u5199\u5165\u5230\u5185\u5b58\u6253\u5f00\u6587\u4ef6\uff0c\u53ea\u9700\u8981\u4e86\u89e3\u5934\u90e8\u6570\u636e\u5373\u53ef\u3002\u7528head\u5c31\u975e\u5e38\u8f7b\u4fbf\u3002head\u9ed8\u8ba4\u8f93\u51fa\u524d10\u884c\u5185\u5bb9\u3002\n\n\n# \u8f93\u51fa\u6587\u4ef6\u524d5\u884c\u5185\u5bb9\n\n$ head -5 text.txt\n\n\n\n\n\n\ntail\n: \u8f93\u51fa\u6587\u4ef6\u5c3e\u90e8\u5185\u5bb9\n\n\n\n\n# \u8f93\u51fa\u6587\u4ef6\u7684\u6700\u540e5\u884c\u5185\u5bb9\n\n$ tail -5 text.txt\n\n\n\n\n\n\ncat\n: \u8f93\u51fa\u6587\u4ef6\u5185\u5bb9\n\n\n\n\n# \u663e\u793a\u6587\u4ef6 'text.txt' \u5185\u5bb9\n\n$ cat text.txt\n\n\n\n\n\n\nnl\n: \u5c06\u6587\u4ef6\u6807\u884c\n\n\n\n\n$ cat text.txt \n|\n nl\n\n\n\n\n\n\ngrep\n: \u622a\u53d6\u8f93\u5165\u5b57\u7b26\u7684\u9009\u5b9a pattern \u5e76\u8f93\u51fa\u6240\u5728\u7684\u884c\n\n\n\n\n\u867d\u7136\u5f88\u591a\u53d1\u884c\u7248\u7528egrep\u4ee3\u66ffgrep\uff0c\u4f46\u662f\u5176\u5bf9\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u652f\u6301\u8fd8\u662f\u4e0d\u591f\u4f18\u79c0\uff0c\u6240\u4ee5\u5e38\u7528awk\u4ee3\u66ffgrep\u6765\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\u3002\n\n\n# \u663e\u793a\u6587\u4ef6 'text.txt' \u4e2d\u542b\u6709\u5b57\u7b26 'abc' \u7684\u884c\n\n$ cat text.txt \n|\n grep \n'abc'\n\n$ awk \n'/abc/'\n text.txt\n\n\n\n\n\u538b\u7f29/\u89e3\u538b\u7f29\n\u00b6\n\n\n# \u538b\u7f29\u6587\u4ef6 foo \u6216\u8005\u6587\u4ef6\u5939 foo \u6210\u4e3a\u4e00\u4e2a foo.tar.gz \u538b\u7f29\u5305\n\n$ tar -zcf foo.tar.gz foo\n\n\n# \u89e3\u538b\u7f29\u6587\u4ef6 foo.tar.gz\n\n$ tar -zxf foo.tar.gz\n\n\n\n\n\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u7aef\u4ea4\u4e92\n\u00b6\n\n\n\n\nssh \u767b\u5f55\u670d\u52a1\u5668\n\n\n\n\n# server_ip\u4e3a\u6240\u8981\u767b\u5f55\u670d\u52a1\u5668ip\n\n$ ssh user@server_ip\n$ ssh mark@10.44.35.122\n\n\n\n\n\n\n\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u7aef\u62f7\u8d1d\u6587\u4ef6\n\n\n\n\n\u8fd9\u91cc\u4ee5\u5ba2\u6237\u7aef\u64cd\u4f5c\u4e3a\u4f8b\uff0c\u670d\u52a1\u5668ip\u5047\u8bbe\u4e3a10.44.35.122\n\n\n# \u4ece\u670d\u52a1\u5668\u62f7\u8d1d\u6587\u4ef6 /data/1.fasta \u5230\u672c\u5730\n\n$ scp mark@10.44.35.122:/data/1.fasta .\n\n# \u4ece\u672c\u5730\u4e0a\u4f20\u6587\u4ef6 2.fasta \u5230\u670d\u52a1\u5668/data\n\n$ scp \n2\n.fasta mark@10.44.35.122:/data/2.fasta\n\n\n\n\n\u7b80\u5355\u7684\u4f20\u8f93\u5355\u4e2a\u6587\u4ef6\u7528scp\u8fd8\u7b97\u65b9\u4fbf\uff0c\u4f46\u5982\u679c\u9891\u7e41\u4ea4\u4e92\uff0c\u6216\u8005\u9700\u8981\u53ef\u89c6\u5316\u754c\u9762\u6765\u64cd\u4f5c\uff0c\u6211\u4eec\u9700\u8981\u66f4\u65b9\u4fbf\u7684\u5de5\u5177\uff0c\u8fd9\u91cc\u63a8\u8350 sshfs\n\n\n# \u6302\u8f7d\u670d\u52a1\u5668 /data \u5230\u672c\u5730linux\u673a\u5668\u7684 ~/server \u76ee\u5f55\u3002\n\n$ sshfs mark@10.44.35.122:/data ~/server -o \nidmap\n=\nuser -o allow_other\n\n\n\n\n\u5bf9\u4e8ewin\u5e73\u53f0\u7528\u6237\uff0c\u7b80\u5355\u7684ssh\u767b\u5f55\u5de5\u5177\u5e38\u7528\u7684\u5982putty\uff0c\u5982\u679c\u8981\u4e0a\u4e0b\u4f20\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u642d\u5efaftp\u670d\u52a1\u6765\u5b9e\u73b0\u3002\n\n\n\n\nrsync\n\n\n\n\nrsync\u547d\u4ee4\u662f\u4e00\u4e2a\u8fdc\u7a0b\u6570\u636e\u540c\u6b65\u5de5\u5177\uff0c\u53ef\u5feb\u901f\u540c\u6b65\u591a\u53f0\u4e3b\u673a\u95f4\u7684\u6587\u4ef6\u3002rsync\u4f7f\u7528\u6240\u8c13\u7684\u201crsync\u7b97\u6cd5\u201d\u6765\u4f7f\u672c\u5730\u548c\u8fdc\u7a0b\u4e24\u4e2a\u4e3b\u673a\u4e4b\u95f4\u7684\u6587\u4ef6\u8fbe\u5230\u540c\u6b65\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u53ea\u4f20\u9001\u4e24\u4e2a\u6587\u4ef6\u7684\u4e0d\u540c\u90e8\u5206\uff0c\u800c\u4e0d\u662f\u6bcf\u6b21\u90fd\u6574\u4efd\u4f20\u9001\uff0c\u56e0\u6b64\u901f\u5ea6\u76f8\u5f53\u5feb\u3002\n\n\n$ rsync -avz user@server_ip:/data/* /data\n$ rsync -av ~/test.py user@server_ip::/home/user\n\n\n\n\nReference\n\u00b6\n\n\n\n\nhttp://linoxide.com/how-tos/linux-ps-command-examples/\n\n\nhttps://commandlinefu.cn/",
            "title": "01. Linux \u7cfb\u7edf\u64cd\u4f5c\u57fa\u672c\u547d\u4ee4"
        },
        {
            "location": "/chapter_01/01_basic-cml/#_1",
            "text": "\u7b14\u8bb0\u4e2d\u4f7f\u7528\u8bb8\u591a Linux \u547d\u4ee4\u884c\uff0c\u8fd9\u91cc\u505a\u4e00\u4e2a\u5feb\u901f\u7b14\u8bb0\u4ee5\u5907\u67e5\u8be2\u3002\u4ee5 bash \u4e3a\u4f8b\u3002\u5176\u4ed6\u7684 shell \u6bd4\u5982 csh, tcsh \u7b49\u5927\u90e8\u5206\u547d\u4ee4\u548c\u53c2\u6570\u90fd\u662f\u4e00\u81f4\u7684\u3002",
            "title": "\u57fa\u672c\u547d\u4ee4"
        },
        {
            "location": "/chapter_01/01_basic-cml/#_2",
            "text": "ls : \u5217\u51fa\u6587\u4ef6\u5939\u7684\u6587\u4ef6   # \u663e\u793a '~/data' \u6587\u4ef6\u5939\u91cc\u7684\u6587\u4ef6 \n$ ls ~/data # \u663e\u793a\u5305\u62ec\u9690\u542b\u6587\u4ef6\u7684 '~/data' \u6587\u4ef6\u5939\u91cc\u7684\u6240\u6709\u6587\u4ef6 \n$ ls -la ~/data # \u6587\u4ef6\u6309\u7167\u65f6\u95f4\u6392\u5e8f \n$ ls -t ~/data # \u67e5\u770b\u6240\u6709 fastq \u6587\u4ef6 \n$ ls ~/data/*.fastq   cd : \u6539\u53d8\u6587\u4ef6\u5939   # \u4ece\u5f53\u524d\u6587\u4ef6\u5939 '~/data' \u66f4\u6362\u5230 '~/app' \u6587\u4ef6\u5939 \n~/data$  cd  ~/app # \u4ece\u4efb\u4f55\u4f4d\u7f6e\u5207\u6362\u56de\u7528\u6237\u4e3b\u76ee\u5f55 '/home/User' \n$  cd  # \u56de\u9000\u4e0a\u4e00\u4e2a\u8bbf\u95ee\u76ee\u5f55 \n$  cd  - # \u8fd4\u56de\u4e0a\u4e00\u7ea7\u76ee\u5f55 \n$  cd  .. # \u8fd4\u56de\u591a\u7ea7\u76ee\u5f55\u51b0\u524d\u5f80\u53e6\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u8fd9\u91cc '\\' \u662f\u8f6c\u4e49\u7b26\uff0c\u5c06\u7a7a\u683c\u952e\u6b63\u786e\u8f6c\u4e49 \n$  cd  ../../../new \\  directory   pwd : \u663e\u793a\u5f53\u524d\u76ee\u5f55   # \u5f53\u4e0d\u77e5\u9053\u5f53\u524d\u5904\u4e8e\u4ec0\u4e48\u8def\u5f84\u65f6\uff0c\u53ef\u4ee5\u7528\u8fd9\u4e2a\u547d\u4ee4\u663e\u793a \n$  pwd    mkdir : \u5efa\u7acb\u65b0\u6587\u4ef6\u5939   # \u5f53\u524d\u8def\u5f84\u4e0b\u65b0\u5efa\u4e00\u4e2a\u540d\u53eb 'new' \u7684\u6587\u4ef6\u5939 \n$ mkdir new   rmdir : \u5220\u9664\u6587\u4ef6\u5939   # \u5220\u9664\u5f53\u524d\u8def\u5f84\u7684\u6587\u4ef6\u5939 'new' \n$ rmdir new   rm : \u5220\u9664\u6587\u4ef6   # \u5220\u9664\u5f53\u524d\u6587\u4ef6\u5939\u7684\u6240\u6709\u540e\u7f00\u662f '.sra' \u7684\u6587\u4ef6 \n$ rm *.sra # \u5220\u9664\u6587\u4ef6\u5939 'new' \u4ee5\u53ca 'new' \u4e0b\u7684\u6240\u6709\u5b50\u6587\u4ef6\u4e0e\u5b50\u76ee\u5f55 \n$ rm -R new # \u4e0d\u5f39\u51fa\u5220\u9664\u786e\u8ba4\u63d0\u793a\uff0c\u5220\u9664\u6240\u6709 '.tmp' \u6587\u4ef6 \n$ rm -f *.tmp   cp : \u590d\u5236\u6587\u4ef6   # \u590d\u5236 'test.txt' \u6587\u4ef6\u5230\u6587\u4ef6\u5939 '~/abc' \u4e2d \n$ cp test.txt ~/abc   mv : \u79fb\u52a8\u6587\u4ef6\u6216\u6587\u4ef6\u5939   # \u79fb\u52a8 'test.txt' \u6587\u4ef6\u5230\u6587\u4ef6\u5939 '~/abc' \u4e2d\u5e76\u6539\u540d\u53eb 'test1.txt' \n$ mv test.txt ~/abc/test1.txt   which : \u67e5\u627e\u53ef\u6267\u884c\u6587\u4ef6\u7684\u7cfb\u7edf\u8def\u5f84   # \u6253\u5370\u51fa\u7cfb\u7edf\u5e26\u7684 python \u7a0b\u5e8f\u7684\u8def\u5f84 \n$ which python   wc : \u7edf\u8ba1\u4e00\u4e2a\u6587\u4ef6\u7684\u884c\uff0c\u5b57\u7b26\u548c\u5b57\u8282\u6570   # \u8f93\u51fa\u6587\u4ef6 'text.txt' \u7684\u884c\u6570\uff0c\u5b57\u7b26\u6570\u548c\u5b57\u8282\u6570\u3002 \n$ wc text.txt   find : \u67e5\u627e\u6587\u4ef6   # \u67e5\u627e\u4e00\u4e2a\u6587\u4ef6\uff0c\u6bd4\u5982 .bashrc, /etc\u8def\u5f84\u4e0b\u7684hosts\u6587\u4ef6 \n$ find .bashrc\n$ find /etc/hosts # \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u53ca\u5b50\u76ee\u5f55\u540e\u7f00\u4e3agz\u7684\u6587\u4ef6 \n$ find . -type f -name  \"*.gz\"  # \u67e5\u627e\u5b50\u76ee\u5f55\u6df1\u5ea6\u4e3a4\u5c42\u76ee\u5f55\u7684fasta\u6587\u4ef6 \n$ find . -type f -maxdepth  4  -name  \"*.fasta\"  # \u67e5\u627e/var/log\u8def\u5f84\u4e0b\u6743\u9650\u4e3a755\u7684\u76ee\u5f55 \n$ find /var/log -type d -perm  755  # \u6309\u7167\u7528\u6237\u67e5\u627e\u7528\u6237\uff0c\u5728tmp\u8def\u5f84\u4e0b\u67e5\u627e\u5c5e\u4e8e\u7528\u6237 nginx \u7684\u6587\u4ef6 \n$ find /tmp -user nginx # \u7528\u6237\u4e3bhome\u8def\u5f84\u4e0b\u67e5\u627e\u5c5e\u4e8e root \u6743\u9650\uff0c\u5c5e\u6027\u4e3a644\u7684\u6587\u4ef6 \n$ find . -user root -perm  644    ps : \u67e5\u770b\u7cfb\u7edf\u8fdb\u7a0b   #ps\u4f1a\u5728\u7ec8\u7aef\u6253\u5370\u7cfb\u7edf\u8fdb\u7a0b\uff0c\u5404\u5217\u7684\u542b\u4e49\u662f: \n\n* USER: \u8fd0\u884c\u8be5\u8fdb\u7a0b\u7684\u7528\u6237\n* PID: \u8fd0\u884c\u7740\u7684\u547d\u4ee4 ( CMD ) \u7684\u8fdb\u7a0b\u7f16\u53f7\n* %CPU: CPU\u5360\u7528\n* %MEM: \u5185\u5b58\u5360\u7528\n* VSC:\n* RSS:\n* TTY: \u547d\u4ee4\u6240\u8fd0\u884c\u7684\u4f4d\u7f6e\uff08\u7ec8\u7aef\uff09\n* STAT:\n* TIME: \u8fd0\u884c\u7740\u7684\u8be5\u547d\u4ee4\u6240\u5360\u7528\u7684CPU\u5904\u7406\u65f6\u95f4\n* COMMAND: \u8be5\u8fdb\u7a0b\u6240\u8fd0\u884c\u7684\u547d\u4ee4  # \u663e\u793a\u8be6\u7ec6\u7684\u8fdb\u7a0b\u4fe1\u606f \n$ ps -waux # \u8fc7\u6ee4\u7528\u6237root\u7684\u8fdb\u7a0b \n$ ps -u root # \u6839\u636e\u4e0d\u540c\u53c2\u6570\u4f7f\u7528\u6765\u6392\u5e8f\u8fdb\u7a0b\uff0c\u5e76\u53ea\u73b0\u5b9e\u6392\u540d\u524d10\u7684\u8fdb\u7a0b \n$ ps -aux --sort -pcpu  |  head -n  11 \n$ ps -aux --sort -pmem  |  head -n  11 \n$ ps -aux --sort -pcpu,+pmem  |  head -n  11  # \u8fc7\u6ee4\u8fdb\u7a0b\u540d \n$ ps -f -C chrome # \u6839\u636ePID\u8fc7\u6ee4 \n$ ps -L  1000  # \u6811\u5f62\u73b0\u5b9e\u8fdb\u7a0b \n$ ps -axjf",
            "title": "\u6587\u4ef6\u64cd\u4f5c"
        },
        {
            "location": "/chapter_01/01_basic-cml/#_3",
            "text": "\u64cd\u4f5c\u5927\u6587\u4ef6\u5982fastq\u6d4b\u5e8f\u539f\u59cb\u6570\u636e\uff0c\u5e38\u5e38\u4e0d\u9700\u8981\u5c06\u51e0\u767eM\u751a\u81f3\u4e0aG\u7684\u6570\u636e\u5168\u90e8\u5199\u5165\u5230\u5185\u5b58\u6253\u5f00\u6587\u4ef6\uff0c\u53ea\u9700\u8981\u4e86\u89e3\u5934\u90e8\u6570\u636e\u5373\u53ef\u3002\u7528head\u5c31\u975e\u5e38\u8f7b\u4fbf\u3002head\u9ed8\u8ba4\u8f93\u51fa\u524d10\u884c\u5185\u5bb9\u3002  # \u8f93\u51fa\u6587\u4ef6\u524d5\u884c\u5185\u5bb9 \n$ head -5 text.txt   tail : \u8f93\u51fa\u6587\u4ef6\u5c3e\u90e8\u5185\u5bb9   # \u8f93\u51fa\u6587\u4ef6\u7684\u6700\u540e5\u884c\u5185\u5bb9 \n$ tail -5 text.txt   cat : \u8f93\u51fa\u6587\u4ef6\u5185\u5bb9   # \u663e\u793a\u6587\u4ef6 'text.txt' \u5185\u5bb9 \n$ cat text.txt   nl : \u5c06\u6587\u4ef6\u6807\u884c   $ cat text.txt  |  nl   grep : \u622a\u53d6\u8f93\u5165\u5b57\u7b26\u7684\u9009\u5b9a pattern \u5e76\u8f93\u51fa\u6240\u5728\u7684\u884c   \u867d\u7136\u5f88\u591a\u53d1\u884c\u7248\u7528egrep\u4ee3\u66ffgrep\uff0c\u4f46\u662f\u5176\u5bf9\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u652f\u6301\u8fd8\u662f\u4e0d\u591f\u4f18\u79c0\uff0c\u6240\u4ee5\u5e38\u7528awk\u4ee3\u66ffgrep\u6765\u8fdb\u884c\u6a21\u5f0f\u5339\u914d\u3002  # \u663e\u793a\u6587\u4ef6 'text.txt' \u4e2d\u542b\u6709\u5b57\u7b26 'abc' \u7684\u884c \n$ cat text.txt  |  grep  'abc' \n$ awk  '/abc/'  text.txt",
            "title": "\u8f93\u51fa\u6587\u4ef6\u5934\u5c3e\u90e8\u5185\u5bb9"
        },
        {
            "location": "/chapter_01/01_basic-cml/#_4",
            "text": "# \u538b\u7f29\u6587\u4ef6 foo \u6216\u8005\u6587\u4ef6\u5939 foo \u6210\u4e3a\u4e00\u4e2a foo.tar.gz \u538b\u7f29\u5305 \n$ tar -zcf foo.tar.gz foo # \u89e3\u538b\u7f29\u6587\u4ef6 foo.tar.gz \n$ tar -zxf foo.tar.gz",
            "title": "\u538b\u7f29/\u89e3\u538b\u7f29"
        },
        {
            "location": "/chapter_01/01_basic-cml/#_5",
            "text": "ssh \u767b\u5f55\u670d\u52a1\u5668   # server_ip\u4e3a\u6240\u8981\u767b\u5f55\u670d\u52a1\u5668ip \n$ ssh user@server_ip\n$ ssh mark@10.44.35.122   \u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u7aef\u62f7\u8d1d\u6587\u4ef6   \u8fd9\u91cc\u4ee5\u5ba2\u6237\u7aef\u64cd\u4f5c\u4e3a\u4f8b\uff0c\u670d\u52a1\u5668ip\u5047\u8bbe\u4e3a10.44.35.122  # \u4ece\u670d\u52a1\u5668\u62f7\u8d1d\u6587\u4ef6 /data/1.fasta \u5230\u672c\u5730 \n$ scp mark@10.44.35.122:/data/1.fasta . # \u4ece\u672c\u5730\u4e0a\u4f20\u6587\u4ef6 2.fasta \u5230\u670d\u52a1\u5668/data \n$ scp  2 .fasta mark@10.44.35.122:/data/2.fasta  \u7b80\u5355\u7684\u4f20\u8f93\u5355\u4e2a\u6587\u4ef6\u7528scp\u8fd8\u7b97\u65b9\u4fbf\uff0c\u4f46\u5982\u679c\u9891\u7e41\u4ea4\u4e92\uff0c\u6216\u8005\u9700\u8981\u53ef\u89c6\u5316\u754c\u9762\u6765\u64cd\u4f5c\uff0c\u6211\u4eec\u9700\u8981\u66f4\u65b9\u4fbf\u7684\u5de5\u5177\uff0c\u8fd9\u91cc\u63a8\u8350 sshfs  # \u6302\u8f7d\u670d\u52a1\u5668 /data \u5230\u672c\u5730linux\u673a\u5668\u7684 ~/server \u76ee\u5f55\u3002 \n$ sshfs mark@10.44.35.122:/data ~/server -o  idmap = user -o allow_other  \u5bf9\u4e8ewin\u5e73\u53f0\u7528\u6237\uff0c\u7b80\u5355\u7684ssh\u767b\u5f55\u5de5\u5177\u5e38\u7528\u7684\u5982putty\uff0c\u5982\u679c\u8981\u4e0a\u4e0b\u4f20\u6587\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u642d\u5efaftp\u670d\u52a1\u6765\u5b9e\u73b0\u3002   rsync   rsync\u547d\u4ee4\u662f\u4e00\u4e2a\u8fdc\u7a0b\u6570\u636e\u540c\u6b65\u5de5\u5177\uff0c\u53ef\u5feb\u901f\u540c\u6b65\u591a\u53f0\u4e3b\u673a\u95f4\u7684\u6587\u4ef6\u3002rsync\u4f7f\u7528\u6240\u8c13\u7684\u201crsync\u7b97\u6cd5\u201d\u6765\u4f7f\u672c\u5730\u548c\u8fdc\u7a0b\u4e24\u4e2a\u4e3b\u673a\u4e4b\u95f4\u7684\u6587\u4ef6\u8fbe\u5230\u540c\u6b65\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u53ea\u4f20\u9001\u4e24\u4e2a\u6587\u4ef6\u7684\u4e0d\u540c\u90e8\u5206\uff0c\u800c\u4e0d\u662f\u6bcf\u6b21\u90fd\u6574\u4efd\u4f20\u9001\uff0c\u56e0\u6b64\u901f\u5ea6\u76f8\u5f53\u5feb\u3002  $ rsync -avz user@server_ip:/data/* /data\n$ rsync -av ~/test.py user@server_ip::/home/user",
            "title": "\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u7aef\u4ea4\u4e92"
        },
        {
            "location": "/chapter_01/01_basic-cml/#reference",
            "text": "http://linoxide.com/how-tos/linux-ps-command-examples/  https://commandlinefu.cn/",
            "title": "Reference"
        },
        {
            "location": "/chapter_01/02_linux-installation/",
            "text": "",
            "title": "02. Linux \u5b89\u88c5\u5b9e\u4f8b"
        },
        {
            "location": "/chapter_01/03_linux-administration/",
            "text": "",
            "title": "03. Linux \u7cfb\u7edf\u7ba1\u7406"
        },
        {
            "location": "/chapter_01/04_awk/",
            "text": "\u7528 awk \u5904\u7406 NGS \u6570\u636e\n\u00b6\n\n\nawk \u5de5\u5177\u5e38\u7528\u6765\u5bf9\u6587\u4ef6\u5185\u5bb9\u6309\u884c\u8fdb\u884c\u5339\u914d\u641c\u7d22\uff0c\u4e00\u65e6\u67d0\u4e00\u884c\u4e2d\u7684\u5185\u5bb9\u4e0e\u641c\u7d22\u6761\u4ef6\u5339\u914d\uff0c\u5219\u5bf9\u8be5\u5185\u5bb9\u505a\u8fdb\u4e00\u6b65\u64cd\u4f5c\u3002\u672c\u8d28\u4e0a\u8bb2\uff0cawk \u5c5e\u4e8e\u6570\u636e\u9a71\u52a8\u7684\u7a0b\u5e8f\uff0c\u56e0\u6b64 awk \u7a0b\u5e8f\u4e5f\u975e\u5e38\u5bb9\u6613\u7f16\u5199\u4e0e\u9605\u8bfb\u3002\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5e26\u6765\u5927\u91cf\u7684\u6570\u636e\uff0c\u800c\u751f\u7269\u5b66\u5206\u6790\u5f80\u5f80\u76f4\u9700\u8981\u5176\u4e2d\u7279\u5b9a\u7684\u90e8\u5206\uff0c\u8fd9\u65f6 awk \u5c31\u53ef\u4ee5\u5927\u663e\u8eab\u624b\u4e3a\u6d4b\u5e8f\u6570\u636e\u7684\u8f6c\u6362\u4e0e\u5206\u6790\u63d0\u4f9b\u5e2e\u52a9\u3002\u6211\u4eec\u9996\u5148\u6765\u770b\u4e00\u4e2a\u6700\u7b80\u5355\u7684 awk \u547d\u4ee4\u7a0b\u5e8f\uff1a\n\n\n# \u5c06contigs.fasta\u6587\u4ef6\u4e2d\u5e8f\u5217ID\u6253\u5370\u5230\u7ec8\u7aef\n\n\n# contigs.fasta\u5185\u5982\uff1a\n\n\n# >seq1\n\n\n# ATGGGGTCCGATTACCG\n\n\n# >seq2\n\n\n# CGGNTTACCGYGACAGT\n\n\n$ awk \n'/>/'\n contigs.fasta\n\n\n# \u5c4f\u5e55\u4e0a\u4f1a\u8f93\u51fa\uff1a\n\n>seq1\n>seq2\n\n$ awk \n'/^ATG/'\n contigs.fasta\u5185\u5982\n\n\n#\u5c4f\u5e55\u4e0a\u4f1a\u8f93\u51fa\uff1a\n\nATGGGGTCCGATTACCG\n\n\n\n\n\u8fd9\u4e2a\u547d\u4ee4\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u5c06 fasta \u6587\u4ef6\u4e2d\u5305\u542b '>' \u5b57\u7b26\u7684\u884c\u8f93\u51fa\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u5c06\u6240\u6709\u7684\u5e8f\u5217\u5934\u5185\u5bb9\u8f93\u51fa\u3002\u4f5c\u7528\u7c7b\u4f3c\ngrep \">\"\n\u3002\n\n\nawk \u7a0b\u5e8f\u4e3b\u4f53\u4e3b\u8981\u5305\u62ec pattern\uff0caction\u548cinput file\uff1a\n\n\n\n\npattern \u8868\u793a\u6240\u8981\u641c\u7d22\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u3002\n\n\n{ action } \u5219\u8868\u793a\u641c\u7d22\u5339\u914d\u540e\u8981\u505a\u7684\u64cd\u4f5c\u3002\n\n\ninput file\uff1a\u6240\u8981\u641c\u7d22\u7684\u8f93\u5165\u5185\u5bb9\uff0c\u6bd4\u5982\u524d\u9762\u4f8b\u5b50\u7684 contigs.fasta\n\n\n\n\nawk\u53ef\u4ee5\u5728shell\u91cc\u76f4\u63a5\u8fd0\u884c\uff1a\n\n\n$ awk \n'pattern { action }'\n input_file\n\n\n\n\n\u4e5f\u53ef\u4ee5\u5199\u6210awk\u7a0b\u5e8f\u6765\u8fd0\u884c\u3002\u4e00\u4e2a awk \u7a0b\u5e8f\u5f80\u5f80\u5982\u4e0b\u6240\u793a\uff1a\n\n\n#!/usr/bin/awk -f\n\n\npattern\n \n{\n \naction\n \n}\n\n\n\n\n\nawk \u53ef\u4ee5\u4e0d\u9700\u8981\u8f93\u5165\u6587\u4ef6\uff1b\u5bf9\u4e8epattern\u548caction\u6765\u8bf4\uff0c2\u8005\u81f3\u5c11\u8981\u6709\u4e00\u4e2a\u624d\u80fd\u8fd0\u884c\u3002\u5982\u679c\u6ca1\u6709pattern\uff0c\u5219\u9ed8\u8ba4\u5339\u914d\u4efb\u4f55\u8f93\u5165\uff0c\u6309\u884c\u8f93\u51fa\u5e76\u6267\u884caction\u3002\u5982\u679c\u6ca1\u6709action\uff0c\u5219\u5339\u914dpattern\u5e76\u6309\u884c\u8f93\u51fa\u4e0d\u505a\u989d\u5916\u64cd\u4f5c\u3002\n\n\n# \u5c1d\u8bd5\u4ee5\u4e0b\u8bed\u53e5\uff0c\u5728\u7ec8\u7aef\u6253\u5370`hello world`\u3002\u8fd9\u91ccBEGIN\u662fpattern\uff0c{ print \"hello world\" } \u662faction\n\n$ awk \n'BEGIN { print \"hello world\" }'\n\n\n\n# \u6a21\u62dfcat\u8f93\u51fa\u7ec8\u7aef\u8f93\u5165\u7684\u5b57\u7b26\u3002\u8fd9\u91cc\u7701\u7565\u4e86pattern\n\n$ awk \n'{ print }'\n\n\n\n\n\n\u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\u53ef\u4ee5\u4fdd\u5b58\u6210\u6587\u4ef6\uff08\u5982\nhello_world\n\uff09\u6765\u8fd0\u884c\uff0c\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a\n\n\n#!/usr/bin/awk -f\n\n\n# \u6ce8\u610f\u4e0d\u540c\u53d1\u884c\u7248\u7684linux\uff0cawk\u8def\u5f84\u6709\u6240\u533a\u522b\n\n\n\nBEGIN\n \n{\n \nprint\n \n\"hello world\"\n \n}\n\n\n\n\n\n\u8fd0\u884c\u8fd9\u4e2a\u7a0b\u5e8f\uff1a\n\n\n$ chmod +x hello_world\n$ ./hello_world\n\n\n\n\n1. \u4e86\u89e3 awk \u57fa\u672c\u7528\u6cd5\n\u00b6\n\n\n$ awk \n'$1~/gene1/ { print $2 }'\n input_data\n\n\n\n\n\u4f5c\u7528\u4e0e cat + grep + sed \u7c7b\u4f3c\n\n\n$ cat input_data \n|\n grep gene1 \n|\n sed \n{\n$1\n}\n\n\n\n\n\n2. awk \u57fa\u672c\u8bed\u6cd5\n\u00b6\n\n\n2.1 Pattern\n\u00b6\n\n\n2.1.1 \u6b63\u5219\u8868\u8fbe\u5f0f\n\u00b6\n\n\npattern \u53ef\u4ee5\u91c7\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u5339\u914d\u5185\u5bb9\u3002\u7528\n/ regular expression /\n\u6765\u8868\u793a\u3002\n\n\n\u51e0\u4e2a\u7279\u6b8a\u7684Patterns\uff1a\n\n\n\n\nBEGIN:\n\n\nEND:\n\n\nBEGINFILE:\n\n\nENDFILE:\n\n\n\n\n2.1.2 \u8bed\u53e5\u8868\u8fbe\n\u00b6\n\n\n$ awk \n'$1 == \"gene\" { print $2 }'\n genes.list\n\n\n\n\n2.2 Action\n\u00b6\n\n\n2.2.1 if...else\n\u00b6\n\n\n# if block\n\n$ awk \n'{if(condition) print $1}'\n input\n\n\n# if else block\n\n$ awk \n'{if(condition)\n\n\n>     print $1\n\n\n> else\n\n\n>     print $2\n\n\n> }'\n input\n\n\n\n\n2.2.2 while\n\u00b6\n\n\nwhile \u63a7\u5236\u8bed\u53e5\u8981\u6362\u884c\uff0c\u75284\u4e2a\u7a7a\u683c\u5212\u5206\u63a7\u5236\u5757\u3002\n\n\n$ awk \n'{ i = 1\n\n\n>     while (i <= 3) {\n\n\n>         print $i\n\n\n>         i++\n\n\n>     }\n\n\n> }'\n input\n\n\n\n\n2.3. \u5185\u5efa\u53d8\u91cf\n\u00b6\n\n\n2.3.1 \u63a7\u5236 awk \u7684\u53d8\u91cf\n\u00b6\n\n\n\n\nBINMODE #\n\n\nCONVFMT\n\n\nFIELDWIDTHS #\n\n\nFPAT #\n\n\nFS\n\n\nIGNORECASE #\n\n\nLINT #\n\n\nOFMT\n\n\nOFS\n\n\nORS\n\n\nPREC #\n\n\nROUNDMODE #\n\n\nRS\n\n\nSUBSEP\n\n\nTEXTDOMAIN #\n\n\n\n\n2.3.2 \u4f20\u9012\u4fe1\u606f\u7684\u53d8\u91cf\n\u00b6\n\n\n\n\nARGC , ARGV\n\n\nARGIND #\n\n\nENVIRON\n\n\nERRNO #\n\n\nFILENAME\n\n\nFNR\n\n\nNF\n\n\nFUNCTAB #\n\n\nNR\n\n\nPROCINFO #\n\n\nRLENGTH\n\n\nRSTART\n\n\nRT #\n\n\nSYMTAB #\n\n\n\n\n2.4. \u5185\u5efa\u51fd\u6570\n\u00b6\n\n\n2.4.1 \u6570\u5b66\u51fd\u6570\n\u00b6\n\n\n\n\natan2(y, x)\n\n\ncos(x)\n\n\nexp(x)\n\n\nint(x)\n\n\nlog(x)\n\n\nrand()\n\n\nsin(x)\n\n\nsqrt(x)\n\n\nsrand([ x ])\n\n\n\n\n2.4.2 \u5b57\u7b26\u4e32\u51fd\u6570\n\u00b6\n\n\n\n\nasort(source [ , dest [ , how ] ] ) #\n\n\nasorti(source [ , dest [ , how ] ] ) #\n\n\ngensub(regexp, replacement, how [ , target ] ) #\n\n\ngsub(regexp, replacement [ , target ] )\n\n\nindex(in, find)\n\n\nlength( [ string ] )\n\n\nmatch(string, regexp [ , array ] )\n\n\npatsplit(string, array [ , fieldpat [ , seps ] ] ) #\n\n\nsplit(string, array [ , fieldsep [ , seps ] ] )\n\n\nsprintf(format, expression1, ...)\n\n\nstrtonum(str) #\n\n\nsub(regexp, replacement [ , target ] )\n\n\nsubstr(string, start [ , length ] )\n\n\ntolower(string)\n\n\ntoupper(string)\n\n\n\n\n2.4.3 \u8f93\u5165\u8f93\u51fa\u51fd\u6570\n\u00b6\n\n\n\n\nclose(filename [ , how ] )\n\n\nfflush( [ filename ] )\n\n\nsystem(command)\n\n\n\n\n2.4.4 \u65f6\u95f4\u51fd\u6570\n\u00b6\n\n\n\n\nmktime(datespec)\n\n\nstrftime( [ format [ , timestamp [ , utc-flag ] ] ] )\n\n\nsystime()\n\n\n\n\n2.4.5 Bit\u64cd\u4f5c\u51fd\u6570\n\u00b6\n\n\n\n\nand(v1, v2 [, ...])\n\n\ncompl(val)\n\n\nlshift(val, count)\n\n\nor(v1, v2 [, ...])\n\n\nrshift(val, count)\n\n\nxor(v1, v2 [, ...])\n\n\n\n\n2.4.6 \u5176\u4ed6\n\u00b6\n\n\n\n\nisarray(x)\n\n\nbindtextdomain(directory [ , domain ] )\n\n\ndcgettext(string [ , domain [ , category ] ] )\n\n\ndcngettext(string1, string2, number [ , domain [ , category ] ] )\n\n\n\n\n3. \u793a\u4f8b\n\u00b6\n\n\n\u793a\u4f8b\u90e8\u5206\u4ecb\u7ecd awk \u5728\u65e5\u5e38\u4e2d\uff0c\u7279\u522b\u662f\u5904\u7406 ngs \u6570\u636e\u65f6\u7684\u4e00\u4e9b\u4f8b\u5b50\u3002\n\n\n3.1 \u5bf9\u5217\u7684\u64cd\u4f5c\n\u00b6\n\n\n\u8c03\u6574\u5217\u987a\u5e8f\n\uff1a\u5728\u6709GUI\u7684\u64cd\u4f5c\u7cfb\u7edf\u91cc\uff0c\u4e00\u822c\u91c7\u7528\u7c7b\u4f3c excel, calc \u4e4b\u7c7b\u7684\u8f6f\u4ef6\u5bfc\u5165\u6570\u636e\u6587\u4ef6\uff0c\u7136\u540e\u526a\u5207\u5404\u5217\u8c03\u6574\u987a\u5e8f\u3002\u5982\u679c\u7528 awk \u6765\u89e3\u51b3\u4e5f\u5f88\u65b9\u4fbf\uff0c\u4f60\u53ea\u9700\u8981\u8003\u8651\u597d\u8c03\u6574\u7684\u5404\u5217\u987a\u5e8f\u5373\u53ef\uff0caction \u91cc\u7684{ print ...}\u987a\u5e8f\u5c31\u662f\u91cd\u65b0\u8c03\u6574\u540e\u7684\u5404\u5217\u987a\u5e8f\uff1a\n\n\n$ awk \n'{ print $3, $5, $7, $2, $1, $4, $6 }'\n infile.txt > outfile.txt\n\n\n\n\u63d2\u5165\u5217\n\uff1a\u6709\u65f6\u5019\u8981\u63d2\u5165\u4e00\u5217\u6570\u636e\uff0c\u7528awk\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5b9e\u73b0\uff1a\n\n\n$ awk \n'{ print $1, $2 \"gene expression\", $3}'\n infile.txt > outfile.txt\n\n\n\n\n3.2 \u5bf9\u884c\u7684\u64cd\u4f5c\n\u00b6\n\n\n\u53bb\u9664\u91cd\u590d\u7684\u884c\n\uff1a\u6709\u65f6\u5019\u6570\u636e\u91cc\u542b\u6709\u91cd\u590d\u7684\u884c\uff0c\u800c\u5f53\u4f60\u53ea\u9700\u8981\u552f\u4e00\u6027\u6570\u636e\u65f6\uff0c\u5c31\u53ef\u4ee5\u7528\u8fd9\u884c\u7a0b\u5e8f\uff0c\u53ea\u4fdd\u7559\u5177\u6709\u552f\u4e00\u6027\u7684\u6570\u636e\u884c\u3002\n\n\n$ awk \n'!x[$0]++'\n infile.txt > outfile.txt\n\n\n\n\n3.3 \u683c\u5f0f\u5316\u8f93\u51fa\n\u00b6\n\n\n$ awk -F\n\":\"\n \n'BEGIN { printf \"%-8s %-3s\", \"User\", \"UID\" } \\\n\n\n> NR==1,NR==20 { printf \"%-8s %-3d\", $1, $3 }'\n /etc/passwd\n\n\n\n\n3.4 \u5408\u5e76\u6587\u4ef6\n\u00b6\n\n\n# \u641c\u7d22\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u5305\u542b\u5e8f\u5217ATCCGGA\u7684fasta\u6587\u4ef6\uff0c\u5e76\u8f93\u51fa\u6587\u4ef6\u540d\u548c\u884c\u53f7\u4ee5\u53ca\u5e8f\u5217\n\n$ find . -type f -name \n\"*.fasta\"\n -exec awk \n'/ATCCCGGA/ {print FILENAME, NR, $0}'\n \n{}\n \n\\+",
            "title": "04. \u6570\u636e\u5904\u7406\u5e38\u7528\u5de5\u5177\u4e4b awk"
        },
        {
            "location": "/chapter_01/04_awk/#awk-ngs",
            "text": "awk \u5de5\u5177\u5e38\u7528\u6765\u5bf9\u6587\u4ef6\u5185\u5bb9\u6309\u884c\u8fdb\u884c\u5339\u914d\u641c\u7d22\uff0c\u4e00\u65e6\u67d0\u4e00\u884c\u4e2d\u7684\u5185\u5bb9\u4e0e\u641c\u7d22\u6761\u4ef6\u5339\u914d\uff0c\u5219\u5bf9\u8be5\u5185\u5bb9\u505a\u8fdb\u4e00\u6b65\u64cd\u4f5c\u3002\u672c\u8d28\u4e0a\u8bb2\uff0cawk \u5c5e\u4e8e\u6570\u636e\u9a71\u52a8\u7684\u7a0b\u5e8f\uff0c\u56e0\u6b64 awk \u7a0b\u5e8f\u4e5f\u975e\u5e38\u5bb9\u6613\u7f16\u5199\u4e0e\u9605\u8bfb\u3002\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5e26\u6765\u5927\u91cf\u7684\u6570\u636e\uff0c\u800c\u751f\u7269\u5b66\u5206\u6790\u5f80\u5f80\u76f4\u9700\u8981\u5176\u4e2d\u7279\u5b9a\u7684\u90e8\u5206\uff0c\u8fd9\u65f6 awk \u5c31\u53ef\u4ee5\u5927\u663e\u8eab\u624b\u4e3a\u6d4b\u5e8f\u6570\u636e\u7684\u8f6c\u6362\u4e0e\u5206\u6790\u63d0\u4f9b\u5e2e\u52a9\u3002\u6211\u4eec\u9996\u5148\u6765\u770b\u4e00\u4e2a\u6700\u7b80\u5355\u7684 awk \u547d\u4ee4\u7a0b\u5e8f\uff1a  # \u5c06contigs.fasta\u6587\u4ef6\u4e2d\u5e8f\u5217ID\u6253\u5370\u5230\u7ec8\u7aef  # contigs.fasta\u5185\u5982\uff1a  # >seq1  # ATGGGGTCCGATTACCG  # >seq2  # CGGNTTACCGYGACAGT \n\n$ awk  '/>/'  contigs.fasta # \u5c4f\u5e55\u4e0a\u4f1a\u8f93\u51fa\uff1a \n>seq1\n>seq2\n\n$ awk  '/^ATG/'  contigs.fasta\u5185\u5982 #\u5c4f\u5e55\u4e0a\u4f1a\u8f93\u51fa\uff1a \nATGGGGTCCGATTACCG  \u8fd9\u4e2a\u547d\u4ee4\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u5c06 fasta \u6587\u4ef6\u4e2d\u5305\u542b '>' \u5b57\u7b26\u7684\u884c\u8f93\u51fa\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u5c06\u6240\u6709\u7684\u5e8f\u5217\u5934\u5185\u5bb9\u8f93\u51fa\u3002\u4f5c\u7528\u7c7b\u4f3c grep \">\" \u3002  awk \u7a0b\u5e8f\u4e3b\u4f53\u4e3b\u8981\u5305\u62ec pattern\uff0caction\u548cinput file\uff1a   pattern \u8868\u793a\u6240\u8981\u641c\u7d22\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u3002  { action } \u5219\u8868\u793a\u641c\u7d22\u5339\u914d\u540e\u8981\u505a\u7684\u64cd\u4f5c\u3002  input file\uff1a\u6240\u8981\u641c\u7d22\u7684\u8f93\u5165\u5185\u5bb9\uff0c\u6bd4\u5982\u524d\u9762\u4f8b\u5b50\u7684 contigs.fasta   awk\u53ef\u4ee5\u5728shell\u91cc\u76f4\u63a5\u8fd0\u884c\uff1a  $ awk  'pattern { action }'  input_file  \u4e5f\u53ef\u4ee5\u5199\u6210awk\u7a0b\u5e8f\u6765\u8fd0\u884c\u3002\u4e00\u4e2a awk \u7a0b\u5e8f\u5f80\u5f80\u5982\u4e0b\u6240\u793a\uff1a  #!/usr/bin/awk -f  pattern   {   action   }   awk \u53ef\u4ee5\u4e0d\u9700\u8981\u8f93\u5165\u6587\u4ef6\uff1b\u5bf9\u4e8epattern\u548caction\u6765\u8bf4\uff0c2\u8005\u81f3\u5c11\u8981\u6709\u4e00\u4e2a\u624d\u80fd\u8fd0\u884c\u3002\u5982\u679c\u6ca1\u6709pattern\uff0c\u5219\u9ed8\u8ba4\u5339\u914d\u4efb\u4f55\u8f93\u5165\uff0c\u6309\u884c\u8f93\u51fa\u5e76\u6267\u884caction\u3002\u5982\u679c\u6ca1\u6709action\uff0c\u5219\u5339\u914dpattern\u5e76\u6309\u884c\u8f93\u51fa\u4e0d\u505a\u989d\u5916\u64cd\u4f5c\u3002  # \u5c1d\u8bd5\u4ee5\u4e0b\u8bed\u53e5\uff0c\u5728\u7ec8\u7aef\u6253\u5370`hello world`\u3002\u8fd9\u91ccBEGIN\u662fpattern\uff0c{ print \"hello world\" } \u662faction \n$ awk  'BEGIN { print \"hello world\" }'  # \u6a21\u62dfcat\u8f93\u51fa\u7ec8\u7aef\u8f93\u5165\u7684\u5b57\u7b26\u3002\u8fd9\u91cc\u7701\u7565\u4e86pattern \n$ awk  '{ print }'   \u4e0a\u9762\u8fd9\u4e2a\u4f8b\u5b50\u53ef\u4ee5\u4fdd\u5b58\u6210\u6587\u4ef6\uff08\u5982 hello_world \uff09\u6765\u8fd0\u884c\uff0c\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\uff1a  #!/usr/bin/awk -f  # \u6ce8\u610f\u4e0d\u540c\u53d1\u884c\u7248\u7684linux\uff0cawk\u8def\u5f84\u6709\u6240\u533a\u522b  BEGIN   {   print   \"hello world\"   }   \u8fd0\u884c\u8fd9\u4e2a\u7a0b\u5e8f\uff1a  $ chmod +x hello_world\n$ ./hello_world",
            "title": "\u7528 awk \u5904\u7406 NGS \u6570\u636e"
        },
        {
            "location": "/chapter_01/04_awk/#1-awk",
            "text": "$ awk  '$1~/gene1/ { print $2 }'  input_data  \u4f5c\u7528\u4e0e cat + grep + sed \u7c7b\u4f3c  $ cat input_data  |  grep gene1  |  sed  { $1 }",
            "title": "1. \u4e86\u89e3 awk \u57fa\u672c\u7528\u6cd5"
        },
        {
            "location": "/chapter_01/04_awk/#2-awk",
            "text": "",
            "title": "2. awk \u57fa\u672c\u8bed\u6cd5"
        },
        {
            "location": "/chapter_01/04_awk/#21-pattern",
            "text": "",
            "title": "2.1 Pattern"
        },
        {
            "location": "/chapter_01/04_awk/#211",
            "text": "pattern \u53ef\u4ee5\u91c7\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u6765\u5339\u914d\u5185\u5bb9\u3002\u7528 / regular expression / \u6765\u8868\u793a\u3002  \u51e0\u4e2a\u7279\u6b8a\u7684Patterns\uff1a   BEGIN:  END:  BEGINFILE:  ENDFILE:",
            "title": "2.1.1 \u6b63\u5219\u8868\u8fbe\u5f0f"
        },
        {
            "location": "/chapter_01/04_awk/#212",
            "text": "$ awk  '$1 == \"gene\" { print $2 }'  genes.list",
            "title": "2.1.2 \u8bed\u53e5\u8868\u8fbe"
        },
        {
            "location": "/chapter_01/04_awk/#22-action",
            "text": "",
            "title": "2.2 Action"
        },
        {
            "location": "/chapter_01/04_awk/#221-ifelse",
            "text": "# if block \n$ awk  '{if(condition) print $1}'  input # if else block \n$ awk  '{if(condition)  >     print $1  > else  >     print $2  > }'  input",
            "title": "2.2.1 if...else"
        },
        {
            "location": "/chapter_01/04_awk/#222-while",
            "text": "while \u63a7\u5236\u8bed\u53e5\u8981\u6362\u884c\uff0c\u75284\u4e2a\u7a7a\u683c\u5212\u5206\u63a7\u5236\u5757\u3002  $ awk  '{ i = 1  >     while (i <= 3) {  >         print $i  >         i++  >     }  > }'  input",
            "title": "2.2.2 while"
        },
        {
            "location": "/chapter_01/04_awk/#23",
            "text": "",
            "title": "2.3. \u5185\u5efa\u53d8\u91cf"
        },
        {
            "location": "/chapter_01/04_awk/#231-awk",
            "text": "BINMODE #  CONVFMT  FIELDWIDTHS #  FPAT #  FS  IGNORECASE #  LINT #  OFMT  OFS  ORS  PREC #  ROUNDMODE #  RS  SUBSEP  TEXTDOMAIN #",
            "title": "2.3.1 \u63a7\u5236 awk \u7684\u53d8\u91cf"
        },
        {
            "location": "/chapter_01/04_awk/#232",
            "text": "ARGC , ARGV  ARGIND #  ENVIRON  ERRNO #  FILENAME  FNR  NF  FUNCTAB #  NR  PROCINFO #  RLENGTH  RSTART  RT #  SYMTAB #",
            "title": "2.3.2 \u4f20\u9012\u4fe1\u606f\u7684\u53d8\u91cf"
        },
        {
            "location": "/chapter_01/04_awk/#24",
            "text": "",
            "title": "2.4. \u5185\u5efa\u51fd\u6570"
        },
        {
            "location": "/chapter_01/04_awk/#241",
            "text": "atan2(y, x)  cos(x)  exp(x)  int(x)  log(x)  rand()  sin(x)  sqrt(x)  srand([ x ])",
            "title": "2.4.1 \u6570\u5b66\u51fd\u6570"
        },
        {
            "location": "/chapter_01/04_awk/#242",
            "text": "asort(source [ , dest [ , how ] ] ) #  asorti(source [ , dest [ , how ] ] ) #  gensub(regexp, replacement, how [ , target ] ) #  gsub(regexp, replacement [ , target ] )  index(in, find)  length( [ string ] )  match(string, regexp [ , array ] )  patsplit(string, array [ , fieldpat [ , seps ] ] ) #  split(string, array [ , fieldsep [ , seps ] ] )  sprintf(format, expression1, ...)  strtonum(str) #  sub(regexp, replacement [ , target ] )  substr(string, start [ , length ] )  tolower(string)  toupper(string)",
            "title": "2.4.2 \u5b57\u7b26\u4e32\u51fd\u6570"
        },
        {
            "location": "/chapter_01/04_awk/#243",
            "text": "close(filename [ , how ] )  fflush( [ filename ] )  system(command)",
            "title": "2.4.3 \u8f93\u5165\u8f93\u51fa\u51fd\u6570"
        },
        {
            "location": "/chapter_01/04_awk/#244",
            "text": "mktime(datespec)  strftime( [ format [ , timestamp [ , utc-flag ] ] ] )  systime()",
            "title": "2.4.4 \u65f6\u95f4\u51fd\u6570"
        },
        {
            "location": "/chapter_01/04_awk/#245-bit",
            "text": "and(v1, v2 [, ...])  compl(val)  lshift(val, count)  or(v1, v2 [, ...])  rshift(val, count)  xor(v1, v2 [, ...])",
            "title": "2.4.5 Bit\u64cd\u4f5c\u51fd\u6570"
        },
        {
            "location": "/chapter_01/04_awk/#246",
            "text": "isarray(x)  bindtextdomain(directory [ , domain ] )  dcgettext(string [ , domain [ , category ] ] )  dcngettext(string1, string2, number [ , domain [ , category ] ] )",
            "title": "2.4.6 \u5176\u4ed6"
        },
        {
            "location": "/chapter_01/04_awk/#3",
            "text": "\u793a\u4f8b\u90e8\u5206\u4ecb\u7ecd awk \u5728\u65e5\u5e38\u4e2d\uff0c\u7279\u522b\u662f\u5904\u7406 ngs \u6570\u636e\u65f6\u7684\u4e00\u4e9b\u4f8b\u5b50\u3002",
            "title": "3. \u793a\u4f8b"
        },
        {
            "location": "/chapter_01/04_awk/#31",
            "text": "\u8c03\u6574\u5217\u987a\u5e8f \uff1a\u5728\u6709GUI\u7684\u64cd\u4f5c\u7cfb\u7edf\u91cc\uff0c\u4e00\u822c\u91c7\u7528\u7c7b\u4f3c excel, calc \u4e4b\u7c7b\u7684\u8f6f\u4ef6\u5bfc\u5165\u6570\u636e\u6587\u4ef6\uff0c\u7136\u540e\u526a\u5207\u5404\u5217\u8c03\u6574\u987a\u5e8f\u3002\u5982\u679c\u7528 awk \u6765\u89e3\u51b3\u4e5f\u5f88\u65b9\u4fbf\uff0c\u4f60\u53ea\u9700\u8981\u8003\u8651\u597d\u8c03\u6574\u7684\u5404\u5217\u987a\u5e8f\u5373\u53ef\uff0caction \u91cc\u7684{ print ...}\u987a\u5e8f\u5c31\u662f\u91cd\u65b0\u8c03\u6574\u540e\u7684\u5404\u5217\u987a\u5e8f\uff1a  $ awk  '{ print $3, $5, $7, $2, $1, $4, $6 }'  infile.txt > outfile.txt  \u63d2\u5165\u5217 \uff1a\u6709\u65f6\u5019\u8981\u63d2\u5165\u4e00\u5217\u6570\u636e\uff0c\u7528awk\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5b9e\u73b0\uff1a  $ awk  '{ print $1, $2 \"gene expression\", $3}'  infile.txt > outfile.txt",
            "title": "3.1 \u5bf9\u5217\u7684\u64cd\u4f5c"
        },
        {
            "location": "/chapter_01/04_awk/#32",
            "text": "\u53bb\u9664\u91cd\u590d\u7684\u884c \uff1a\u6709\u65f6\u5019\u6570\u636e\u91cc\u542b\u6709\u91cd\u590d\u7684\u884c\uff0c\u800c\u5f53\u4f60\u53ea\u9700\u8981\u552f\u4e00\u6027\u6570\u636e\u65f6\uff0c\u5c31\u53ef\u4ee5\u7528\u8fd9\u884c\u7a0b\u5e8f\uff0c\u53ea\u4fdd\u7559\u5177\u6709\u552f\u4e00\u6027\u7684\u6570\u636e\u884c\u3002  $ awk  '!x[$0]++'  infile.txt > outfile.txt",
            "title": "3.2 \u5bf9\u884c\u7684\u64cd\u4f5c"
        },
        {
            "location": "/chapter_01/04_awk/#33",
            "text": "$ awk -F \":\"   'BEGIN { printf \"%-8s %-3s\", \"User\", \"UID\" } \\  > NR==1,NR==20 { printf \"%-8s %-3d\", $1, $3 }'  /etc/passwd",
            "title": "3.3 \u683c\u5f0f\u5316\u8f93\u51fa"
        },
        {
            "location": "/chapter_01/04_awk/#34",
            "text": "# \u641c\u7d22\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709\u5305\u542b\u5e8f\u5217ATCCGGA\u7684fasta\u6587\u4ef6\uff0c\u5e76\u8f93\u51fa\u6587\u4ef6\u540d\u548c\u884c\u53f7\u4ee5\u53ca\u5e8f\u5217 \n$ find . -type f -name  \"*.fasta\"  -exec awk  '/ATCCCGGA/ {print FILENAME, NR, $0}'   {}   \\+",
            "title": "3.4 \u5408\u5e76\u6587\u4ef6"
        },
        {
            "location": "/chapter_01/05_bioawk/",
            "text": "Bioawk\n\u00b6\n\n\nBioawk\n \u662f Heng Li \u5f00\u53d1\u7684 awk \u6269\u5c55\u5de5\u5177\uff0c\u589e\u52a0\u4e86\u5bf9\u538b\u7f29\u7684 BED, GFF, SAM, VCF, FASTA/Q \u7b49\u6587\u4ef6\u683c\u5f0f\u7684\u652f\u6301\uff0c\u5e76\u5185\u5efa\u4e00\u4e9b\u51fd\u6570\uff0c\u9002\u7528\u4e8eNGS\u6570\u636e\u7684\u5feb\u901f\u8f93\u5165\u8f93\u51fa\u3002\n\n\n\n\ngc($seq) Returns the GC percentage of a sequence.\n\n\nmeanqual($seq) Returns the average quality of the fastq sequence.\n\n\nreverse($seq) Returns the reverse of the sequence.\n\n\nrevcomp($seq) Returns the reverse complement of the sequence.\n\n\nqualcount($qual, threshold) Returns the number of quality values above the threshold parameter.\n\n\ntrimq(qual, beg, end, param) Trims the quality string qual in the Sanger scale using Richard Mott's algorithm (used in Phred). The 0-based beginning and ending positions are written back to beg and end, respectively. The last argument param is the single parameter used in the algorithm, which is optional and defaults 0.05.\n\n\nand(x, y) bit AND operation (& in C)\n\n\nor(x, y) bit OR operation (| in C)\n\n\nxor(x, y) bit XOR operation (^ in C)\n\n\n\n\n1. \u5b89\u88c5\n\u00b6\n\n\n$ sudo apt-get install bison\n$ git clone https://github.com/lh3/bioawk\n$ \ncd\n bioawk \n&&\n make\n$ sudo cp bioawk /usr/local/sbin\n\n\n\n\n2. \u4f7f\u7528\n\u00b6\n\n\n\u6784\u5efa\u6d4b\u5e8f\u6570\u636e\u5206\u6790\u7684 workflow \u65f6\uff0c\u5f53 fastq \u6570\u636e\u5728\u505a\u5b8c trimming \u540e\uff0c\u6211\u4eec\u5f80\u5f80\u8981\u5173\u6ce8\u5269\u4e0b\u591a\u5c11 reads\uff0c\u53ef\u4ee5\u7528 Bioawk \u8fdb\u884c\u5feb\u901f\u7edf\u8ba1\u3002\n\n\n# \u5feb\u901f\u7edf\u8ba1fastq\u91cc\u7684reads\u6570\u91cf\n\n$ bioawk -c fastx \n'END { print NR }'\n my_fastq.tar.gz\n\n\n\n\n\u5728\u4e00\u4e9b\u7279\u6b8a\u573a\u5408\u91cc\uff0c\u9700\u8981\u5206\u6790 reads \u7cfb\u5217\uff0c\u7528 Bioawk \u53ef\u4ee5\u5f88\u65b9\u4fbf\u5feb\u901f\u6765\u5b8c\u6210\u3002\u6bd4\u5982\u7edf\u8ba1\u7279\u6b8a\u78b1\u57fa\u5f00\u5934\u7684 reads \u6570\u3002\n\n\n# \u7edf\u8ba1\u4ee5GATTAC\u5f00\u5934\u7684reads\u7684\u6570\u91cf\n\n$ bioawk -c fastx \n'$seq~/^GATTAC/ {++n} END { print n }'\n my_fastq.tar.gz\n\n\n\n\n\u5982\u679c\u60f3\u770bGC\u542b\u91cf\u5927\u4e8e60%\u7684reads\u7684\u8d28\u91cf\u60c5\u51b5\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u65b9\u6cd5\uff1a\n\n\n$ bioawk -c fastx \n'{if (gc($seq)>0.6) printf \"%s\\n%s\\n\\n\", $seq, $qual}'\n my_fastq.tar.gz\n\n\n\n\n\u751f\u6210reads\u7684\u5e73\u5747Q\u503c\n\n\n$  bioawk -c fastx \n'{print $name, meanqual($seq)}'\n my_fastq.tar.gz > meanqual.txt",
            "title": "\u201805. \u6d4b\u5e8f\u6570\u636e\u5de5\u5177 bioawk\u2019"
        },
        {
            "location": "/chapter_01/05_bioawk/#bioawk",
            "text": "Bioawk  \u662f Heng Li \u5f00\u53d1\u7684 awk \u6269\u5c55\u5de5\u5177\uff0c\u589e\u52a0\u4e86\u5bf9\u538b\u7f29\u7684 BED, GFF, SAM, VCF, FASTA/Q \u7b49\u6587\u4ef6\u683c\u5f0f\u7684\u652f\u6301\uff0c\u5e76\u5185\u5efa\u4e00\u4e9b\u51fd\u6570\uff0c\u9002\u7528\u4e8eNGS\u6570\u636e\u7684\u5feb\u901f\u8f93\u5165\u8f93\u51fa\u3002   gc($seq) Returns the GC percentage of a sequence.  meanqual($seq) Returns the average quality of the fastq sequence.  reverse($seq) Returns the reverse of the sequence.  revcomp($seq) Returns the reverse complement of the sequence.  qualcount($qual, threshold) Returns the number of quality values above the threshold parameter.  trimq(qual, beg, end, param) Trims the quality string qual in the Sanger scale using Richard Mott's algorithm (used in Phred). The 0-based beginning and ending positions are written back to beg and end, respectively. The last argument param is the single parameter used in the algorithm, which is optional and defaults 0.05.  and(x, y) bit AND operation (& in C)  or(x, y) bit OR operation (| in C)  xor(x, y) bit XOR operation (^ in C)",
            "title": "Bioawk"
        },
        {
            "location": "/chapter_01/05_bioawk/#1",
            "text": "$ sudo apt-get install bison\n$ git clone https://github.com/lh3/bioawk\n$  cd  bioawk  &&  make\n$ sudo cp bioawk /usr/local/sbin",
            "title": "1. \u5b89\u88c5"
        },
        {
            "location": "/chapter_01/05_bioawk/#2",
            "text": "\u6784\u5efa\u6d4b\u5e8f\u6570\u636e\u5206\u6790\u7684 workflow \u65f6\uff0c\u5f53 fastq \u6570\u636e\u5728\u505a\u5b8c trimming \u540e\uff0c\u6211\u4eec\u5f80\u5f80\u8981\u5173\u6ce8\u5269\u4e0b\u591a\u5c11 reads\uff0c\u53ef\u4ee5\u7528 Bioawk \u8fdb\u884c\u5feb\u901f\u7edf\u8ba1\u3002  # \u5feb\u901f\u7edf\u8ba1fastq\u91cc\u7684reads\u6570\u91cf \n$ bioawk -c fastx  'END { print NR }'  my_fastq.tar.gz  \u5728\u4e00\u4e9b\u7279\u6b8a\u573a\u5408\u91cc\uff0c\u9700\u8981\u5206\u6790 reads \u7cfb\u5217\uff0c\u7528 Bioawk \u53ef\u4ee5\u5f88\u65b9\u4fbf\u5feb\u901f\u6765\u5b8c\u6210\u3002\u6bd4\u5982\u7edf\u8ba1\u7279\u6b8a\u78b1\u57fa\u5f00\u5934\u7684 reads \u6570\u3002  # \u7edf\u8ba1\u4ee5GATTAC\u5f00\u5934\u7684reads\u7684\u6570\u91cf \n$ bioawk -c fastx  '$seq~/^GATTAC/ {++n} END { print n }'  my_fastq.tar.gz  \u5982\u679c\u60f3\u770bGC\u542b\u91cf\u5927\u4e8e60%\u7684reads\u7684\u8d28\u91cf\u60c5\u51b5\uff0c\u53ef\u4ee5\u7528\u4e0b\u9762\u65b9\u6cd5\uff1a  $ bioawk -c fastx  '{if (gc($seq)>0.6) printf \"%s\\n%s\\n\\n\", $seq, $qual}'  my_fastq.tar.gz  \u751f\u6210reads\u7684\u5e73\u5747Q\u503c  $  bioawk -c fastx  '{print $name, meanqual($seq)}'  my_fastq.tar.gz > meanqual.txt",
            "title": "2. \u4f7f\u7528"
        },
        {
            "location": "/chapter_01/06_python/",
            "text": "",
            "title": "06. \u4e86\u89e3 Python \u751f\u6d3b\u8f7b\u677e\u4e00\u70b9"
        },
        {
            "location": "/chapter_01/07_shell/",
            "text": "",
            "title": "07. \u751f\u4fe1\u5206\u6790\u8981\u5b66\u4e00\u70b9 shell"
        },
        {
            "location": "/chapter_02/01_emboss/",
            "text": "",
            "title": "\u201901. EMBOSS \u5de5\u5177\u96c6'"
        },
        {
            "location": "/chapter_02/02_blast/",
            "text": "Local Blast \u4f7f\u7528\u8bf4\u660e\n\u00b6\n\n\n\n\nBlast \u5de5\u5177\u53ef\u4ee5\u8fdb\u884c\u5e8f\u5217\u76f8\u4f3c\u6027\u6bd4\u5bf9\uff0c\u5728 NGS \u6570\u636e\u5206\u6790\u4e2d\u7ecf\u5e38\u4f1a\u88ab\u4f7f\u7528\u5230\uff0c\u7279\u522b\u662f\u4e00\u4e9b\u5de5\u5177\u4e2d\u9700\u8981 Blast \u6216 Blast+ \u7a0b\u5e8f\u6765\u4f5c\u4e3a\u7b2c\u4e09\u65b9\u6bd4\u5bf9\u5de5\u5177\u8c03\u7528\u3002\u62ff\u5230\u6d4b\u5e8f\u5b8c\u6210\u7684\u8349\u56fe\u540e\uff0c\u56e0\u4e3a\u57fa\u56e0\u7ec4\u6570\u636e\u8f83\u5927\uff0c\u8fde\u63a5NCBI\u7f51\u7ad9\u5f80\u5f80\u53c8\u975e\u5e38\u7f13\u6162\uff0c\u6240\u4ee5\u8981\u505a Blast \u6bd4\u5bf9\u7684\u8bdd\u90fd\u9700\u8981\u505a Local Blast\u3002\u8fd9\u91cc\u4ecb\u7ecd2\u4e2a\u65b9\u5f0f\u6765\u5b9e\u73b0\uff1a\n\n\n\n\n\n\n\u7528\u547d\u4ee4\u884c\u8fdb\u884c\u672c\u5730 Blast\n\n\n\u5feb\u901f\u6784\u5efa Blast Web \u670d\u52a1\n\n\n\n\n\n\n1. \u57fa\u4e8e\u547d\u4ee4\u884c\u7684 Local Blast\n\u00b6\n\n\nblast\n \u548c \nblast+\n \u8fd92\u4e2a\u7a0b\u5e8f\u96c6\u5bb9\u6613\u641e\u6df7\u3002NCBI \u6700\u65e9\u57281989\u5e74\u521b\u5efa\nBasic Local Alignment Search Tool\n\u5de5\u5177\uff0c\u6cbf\u7528\u81f32009\u5e74\u65e0\u8bba\u662f\u547d\u4ee4\u884c\u5de5\u5177\u6216\u662f\u5728\u7ebf\u7a0b\u5e8f\uff0c\u90fd\u79f0\u547c\u5176\u4e3a\nblast\n\u30022009\u5e74 NCBI \u9274\u4e8e \nblast\n \u7684\u4e00\u4e9b\u4e0d\u8db3\uff0c\u91cd\u65b0\u5f00\u53d1\u4e86\u65b0\u7684\nblast+\n\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u65b0\u7684 blast+ \u5de5\u5177\u5728\u901f\u5ea6\u4e0a\u6709\u4e86\u63d0\u5347\uff0c\u5728\u8f93\u5165\u8f93\u51fa\u4e0a\u4e5f\u66f4\u4e3a\u7075\u6d3b\u3002\n\n\n\u76ee\u524d Blast \u5de5\u5177\u6700\u65b0\u7248\u662f2012\u5e74\u53d1\u5e03\u7684**2.2.26**\uff08\u53ef\u80fd\u5df2\u7ecf\u5904\u4e8e\u6682\u505c\u5347\u7ea7\u7684\u72b6\u6001\uff1f\uff09\uff0c\u800c Blast+ \u76ee\u524d\u4e00\u76f4\u5728\u66f4\u65b0\u3002\u8981\u533a\u52062\u8005\u4e5f\u5f88\u7b80\u5355\uff0cblast \u662f\u901a\u8fc7 blastall -p \u7684\u65b9\u5f0f\u8c03\u7528\u5b50\u7a0b\u5e8f\u6765\u6bd4\u5bf9\u641c\u7d22\u7684\uff0c\u800c blast+ \u5219\u662f\u76f4\u63a5\u4f7f\u7528 blastn \u6216 blastp \u7b49\u5b50\u7a0b\u5e8f\u6765\u6bd4\u5bf9\u641c\u7d22\u3002\u53e6\u5916\u524d\u8005\u7528 formatdb \u7a0b\u5e8f\u6765\u683c\u5f0f\u5316\u6570\u636e\u5e93\uff0c\u540e\u8005\u7528 makeblastdb \u7a0b\u5e8f\u6765\u683c\u5f0f\u5316\u6570\u636e\u3002\n\n\n1.1 Blast\n\u00b6\n\n\nBlast\u7684\u4e0b\u8f7d\u4e0e\u5b89\u88c5\n\n\n# \u5b89\u88c5 Ubuntu \u7f16\u8bd1\u5305\u3002\n\n$ sudo apt-get install blast2\n\n\n# \u6216\u8005\u76f4\u63a5\u4e0b\u8f7dNCBI Linux\u9884\u7f16\u8bd1\u5305\uff0c\u5e76\u89e3\u538b\u7f29\u5b89\u88c5\n\n$ wget ftp://ftp.ncbi.nih.gov/blast/executables/release/2.2.26/blast-2.2.26-x64-linux.tar.gz\n$ tar -zxvf blast-2.2.26-x64 -C ~/app\n$ sudo ln -s ~/app/blast-2.2.26-x64/blastall /usr/local/sbin\n\n\n\n\n\u8fd0\u884c Blast\n\n\nBlast \u901a\u8fc7\u8c03\u7528 blastall \u8fd9\u4e2a gateway \u7a0b\u5e8f\uff0c\u6765\u5206\u522b\u8c03\u7528\u4e0d\u540c\u7b97\u6cd5\u548c\u7a0b\u5e8f\u5b9e\u73b0\u5e8f\u5217\u6bd4\u5bf9\u3002\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165\nblastall\n\uff0c\u4f1a\u6253\u5370\u51fa\u4e00\u4efd\u53c2\u6570\u5217\u8868\u3002\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 \nman blast\n \u6765\u67e5\u770b Blast \u5de5\u5177\u7684\u7528\u6237\u624b\u518c\u3002\n\n\n$ blastall\n\n\n\n\n\u53c2\u6570\u8bf4\u660e\uff1a\n\n\n-p: \u6307\u5b9a\u8981\u8fd0\u884c\u7684 blast \u7a0b\u5e8f\u3002\u53ef\u4ee5\u8c03\u7528\u7684\u6709:\n    \n`\nblastp\n`\n             \u5c06\u6c28\u57fa\u9178\u5e8f\u5217\u4e0e\u86cb\u767d\u8d28\u6570\u636e\u5e93\u6bd4\u5bf9\n    \n`\nblastn\n`\n             \u5c06\u6838\u9178\u5e8f\u5217\u4e0e\u6838\u9178\u6570\u636e\u5e93\u6bd4\u5bf9\n    \n`\nblastx\n`\n             \u5c06\u6838\u9178\u5e8f\u5217\u7ffb\u8bd1\u6210\u86cb\u767d\u5e8f\u5217\u540e\u4e0e\u975e\u5197\u4f59\n(\nnr\n)\n\u86cb\u767d\u8d28\u6570\u636e\u5e93\u6bd4\u5bf9\n    \n`\npsitblastn\n`\n\n    \n`\ntblastn\n`\n\n    \n`\ntblastx\n`\n\n-d: \u6307\u5b9a\u8981\u8c03\u7528\u6570\u636e\u5e93\uff0c\u9ed8\u8ba4\u503c\u662f\u975e\u5197\u4f59\n(\nnr\n)\n\u6570\u636e\u5e93\u3002\u672c\u5730 Blast \u6bd4\u5bf9\u4e00\u822c\u6765\u8bf4\u90fd\u662f\u8c03\u7528 formatdb \u683c\u5f0f\u5316\u7684\u6570\u636e\u5e93\u3002\n-i: \u8f93\u5165\uff0c\u9ed8\u8ba4\u503c\u662f\u7ec8\u7aef\u8f93\u5165\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6587\u4ef6\u7684\u65b9\u5f0f\uff0c\u6bd4\u5982\n`\n-i seq.fasta\n`\n\n-o: \u8f93\u51fa\uff0c\u9ed8\u8ba4\u503c\u662f\u7ec8\u7aef\u6253\u5370\u8f93\u51fa\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6587\u4ef6\u7684\u65b9\u5f0f\uff0c\u6bd4\u5982\n`\n-o result.txt\n`\n\n-e: \u671f\u671b\u503c\u3002\n-T: \u8f93\u51fa\u6587\u4ef6\u683c\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3aF\n(\nFalse\n)\n\uff0c\u60f3\u8f93\u51faHTML\u683c\u5f0f\u7684\u53ef\u4ee5\u7528\n`\n-T T\n`\n\n-M: \u77e9\u9635\u7b97\u6cd5\u9009\u62e9\uff0c\u9ed8\u8ba4\u503c\u662f\n`\nBLOSUM62\n`\n\n-n: \u5982\u679c\u60f3\u4f7f\u7528MegaBlast\uff0c\u5c31\u8bbe\u7f6e\n`\n-n T\n`\n\n-b: \u6570\u636e\u5e93\u4e2d\u7684\u6bd4\u5bf9\u7ed3\u679c\u663e\u793a\u6761\u76ee\u6570\uff0c\u9ed8\u8ba4\u662f250\u6761\u8bb0\u5f55\u3002\n-m: \u6bd4\u5bf9\u7ed3\u679c\u7684\u8f93\u51fa\u663e\u793a\u65b9\u5f0f\uff0c\u503c\u4e3a0~11\uff0c\u9ed8\u8ba4\u662f0\u3002\u5404\u4e2a\u6570\u5b57\u542b\u4e49\u89c1\u4e0b\u8868\u3002\n\n\n\n\n\n\n\n\n\n\noptions\n\n\nmeaning\n\n\n\n\n\n\n\n\n\n\n0\n\n\npairwise\n\n\n\n\n\n\n1\n\n\nquery-anchored showing identities\n\n\n\n\n\n\n2\n\n\nquery-anchored no identities\n\n\n\n\n\n\n3\n\n\nflat query-anchored, show identities\n\n\n\n\n\n\n4\n\n\nflat query-anchored, no identities\n\n\n\n\n\n\n5\n\n\nquery-anchored no identities and blunt ends\n\n\n\n\n\n\n6\n\n\nflat query-anchored, no identities and blunt ends\n\n\n\n\n\n\n7\n\n\nXML Blast output\n\n\n\n\n\n\n8\n\n\ntabular\n\n\n\n\n\n\n9\n\n\ntabular with comment lines\n\n\n\n\n\n\n10\n\n\nASN, text\n\n\n\n\n\n\n11\n\n\nASN, binary [Integer]\n\n\n\n\n\n\n\n\n\u5176\u4ed6\u53c2\u6570\u53c2\u89c1\nman blast\n\u3002\n\n\n\u5e94\u7528\u4e3e\u4f8b:\n\n\nLocal blast\u4f8b\u5b50\uff1a\u9996\u5148\u4e0b\u8f7d\u4e00\u4e2a\u57fa\u56e0\u7ec4\u6587\u4ef6\u5e76\u683c\u5f0f\u5316\u4f5c\u4e3a\u672c\u5730\u6570\u636e\u5e93\uff0c\u7136\u540e\u4f7f\u7528 blastn \u5bf9\u5e8f\u5217\u8fdb\u884c\u6bd4\u5bf9\u3002\n\n\n$ formatdb -i custom_genome.fasta -o T -p F\n$ blastall -i myseq.fasta -d custom_genome.fasta -p blastn\n\n\n\n\n1.2 Blast+\n\u00b6\n\n\n\u4e0b\u8f7d\u5b89\u88c5 NCBI Blast+\n\n\n$ sudo apt-get install ncbi-blast+\n\n\n\n\n\u6784\u5efa\u6570\u636e\u5e93\n\n\n$ makeblastdb -in data/database.fasta -dbtype nucl -parse_seqids\n\n\n\n\n\u8fd0\u884c blast\n\n\n$ blastn -query my_seq.fasta -db data/database.fasta -out result.txt\n\n\n\n\nhttp://www.personal.psu.edu/iua1/courses/files/2014/lecture-12.pdf\n\n\n2. \u6784\u5efa\u672c\u5730\u7684 blast web \u670d\u52a1\n\u00b6\n\n\n2.1 blastkit\n\u00b6\n\n\nblastkit \u662f\u4e00\u4e2a\u5305\u542bwebserver\u7b49\u5de5\u5177\u7684blast\u5de5\u5177\u96c6\u3002\n\n\n\u5b89\u88c5\u4f9d\u8d56\u5305\n\n\n$ conda create -n blastkit\n$ conda activate blastkit\n\n(\nblastkit\n)\n$ pip install pygr\n\n(\nblastkit\n)\n$ pip install whoosh\n\n(\nblastkit\n)\n$ pip install git+https://github.com/ctb/pygr-draw.git\n\n(\nblastkit\n)\n$ pip install git+https://github.com/ged-lab/screed.git\n\n(\nblastkit\n)\n$ conda install lighttpd\n\n(\nblastkit\n)\n$ conda install blast-legacy\n\n\n\n\n\u5bf9lighttpd webserver\u8fdb\u884c\u914d\u7f6e\n\n\n$ \ncd\n /etc/lighttpd/conf-enabled\n$ sudo ln -fs ../conf-available/10-cgi.conf ./\n$ sudo \necho\n \n'cgi.assign = ( \".cgi\" => \"\" )'\n >> \n10\n-cgi.conf\n$ sudo \necho\n \n'index-file.names += ( \"index.cgi\" ) '\n >> \n10\n-cgi.conf\n$ sudo /etc/init.d/lighttpd restart\n\n\n\n\n(\nprokka\n)\n$ conda install lighttpd\n\n(\nprokka\n)\n$ \ncd\n \n$HOME\n/.conda/etc/lighttpd/conf-enabled\n$ sudo ln -fs ../conf-available/10-cgi.conf ./\n$ sudo \necho\n \n'cgi.assign = ( \".cgi\" => \"\" )'\n >> \n10\n-cgi.conf\n$ sudo \necho\n \n'index-file.names += ( \"index.cgi\" ) '\n >> \n10\n-cgi.conf\n$ lighttpd restart\n\n\n\n\n\u5b89\u88c5 blastkit\n\n\n$ \ncd\n ~/app\n$ git clone https://github.com/ctb/blastkit.git -b ec2\n$ \ncd\n blastkit/www\n~/app/blastkit/www$ sudo ln -fs \n$PWD\n /var/www/blastkit\n~/app/blastkit/www$ mkdir files\n~/app/blastkit/www$ chmod a+rxwt files\n~/app/blastkit/www$ chmod +x /root\n~/app/blastkit/www$ \ncd\n ..\n~/app/blastkit$ python ./check.py\n\n\n\n\n\u5982\u679c\u5b89\u88c5\u987a\u5229\uff0c\u5c31\u4f1a\u63d0\u793a\u4e00\u5207\u5df2\u7ecf\u51c6\u5907\u5b8c\u6bd5\u3002\u63a5\u4e0b\u6765\u8981\u51c6\u5907\u6570\u636e\u3002\n\n\n$ cp /mnt/assembly/ecoli.21/contigs.fa ~/app/blastkit/db/db.fa\n$ \ncd\n ~/app/blastkit\n$ formatdb -i db/db.fa -o T -p F\n$ python index-db.py db/db.fa\n\n\n\n\nReference\n\u00b6\n\n\n\n\nBlastkit\n\n\nCaltech workshop\n\n\nAngus",
            "title": "02. Blast \u4e0e Blast+"
        },
        {
            "location": "/chapter_02/02_blast/#local-blast",
            "text": "Blast \u5de5\u5177\u53ef\u4ee5\u8fdb\u884c\u5e8f\u5217\u76f8\u4f3c\u6027\u6bd4\u5bf9\uff0c\u5728 NGS \u6570\u636e\u5206\u6790\u4e2d\u7ecf\u5e38\u4f1a\u88ab\u4f7f\u7528\u5230\uff0c\u7279\u522b\u662f\u4e00\u4e9b\u5de5\u5177\u4e2d\u9700\u8981 Blast \u6216 Blast+ \u7a0b\u5e8f\u6765\u4f5c\u4e3a\u7b2c\u4e09\u65b9\u6bd4\u5bf9\u5de5\u5177\u8c03\u7528\u3002\u62ff\u5230\u6d4b\u5e8f\u5b8c\u6210\u7684\u8349\u56fe\u540e\uff0c\u56e0\u4e3a\u57fa\u56e0\u7ec4\u6570\u636e\u8f83\u5927\uff0c\u8fde\u63a5NCBI\u7f51\u7ad9\u5f80\u5f80\u53c8\u975e\u5e38\u7f13\u6162\uff0c\u6240\u4ee5\u8981\u505a Blast \u6bd4\u5bf9\u7684\u8bdd\u90fd\u9700\u8981\u505a Local Blast\u3002\u8fd9\u91cc\u4ecb\u7ecd2\u4e2a\u65b9\u5f0f\u6765\u5b9e\u73b0\uff1a    \u7528\u547d\u4ee4\u884c\u8fdb\u884c\u672c\u5730 Blast  \u5feb\u901f\u6784\u5efa Blast Web \u670d\u52a1",
            "title": "Local Blast \u4f7f\u7528\u8bf4\u660e"
        },
        {
            "location": "/chapter_02/02_blast/#1-local-blast",
            "text": "blast  \u548c  blast+  \u8fd92\u4e2a\u7a0b\u5e8f\u96c6\u5bb9\u6613\u641e\u6df7\u3002NCBI \u6700\u65e9\u57281989\u5e74\u521b\u5efa Basic Local Alignment Search Tool \u5de5\u5177\uff0c\u6cbf\u7528\u81f32009\u5e74\u65e0\u8bba\u662f\u547d\u4ee4\u884c\u5de5\u5177\u6216\u662f\u5728\u7ebf\u7a0b\u5e8f\uff0c\u90fd\u79f0\u547c\u5176\u4e3a blast \u30022009\u5e74 NCBI \u9274\u4e8e  blast  \u7684\u4e00\u4e9b\u4e0d\u8db3\uff0c\u91cd\u65b0\u5f00\u53d1\u4e86\u65b0\u7684 blast+ \u547d\u4ee4\u884c\u5de5\u5177\uff0c\u65b0\u7684 blast+ \u5de5\u5177\u5728\u901f\u5ea6\u4e0a\u6709\u4e86\u63d0\u5347\uff0c\u5728\u8f93\u5165\u8f93\u51fa\u4e0a\u4e5f\u66f4\u4e3a\u7075\u6d3b\u3002  \u76ee\u524d Blast \u5de5\u5177\u6700\u65b0\u7248\u662f2012\u5e74\u53d1\u5e03\u7684**2.2.26**\uff08\u53ef\u80fd\u5df2\u7ecf\u5904\u4e8e\u6682\u505c\u5347\u7ea7\u7684\u72b6\u6001\uff1f\uff09\uff0c\u800c Blast+ \u76ee\u524d\u4e00\u76f4\u5728\u66f4\u65b0\u3002\u8981\u533a\u52062\u8005\u4e5f\u5f88\u7b80\u5355\uff0cblast \u662f\u901a\u8fc7 blastall -p \u7684\u65b9\u5f0f\u8c03\u7528\u5b50\u7a0b\u5e8f\u6765\u6bd4\u5bf9\u641c\u7d22\u7684\uff0c\u800c blast+ \u5219\u662f\u76f4\u63a5\u4f7f\u7528 blastn \u6216 blastp \u7b49\u5b50\u7a0b\u5e8f\u6765\u6bd4\u5bf9\u641c\u7d22\u3002\u53e6\u5916\u524d\u8005\u7528 formatdb \u7a0b\u5e8f\u6765\u683c\u5f0f\u5316\u6570\u636e\u5e93\uff0c\u540e\u8005\u7528 makeblastdb \u7a0b\u5e8f\u6765\u683c\u5f0f\u5316\u6570\u636e\u3002",
            "title": "1. \u57fa\u4e8e\u547d\u4ee4\u884c\u7684 Local Blast"
        },
        {
            "location": "/chapter_02/02_blast/#11-blast",
            "text": "Blast\u7684\u4e0b\u8f7d\u4e0e\u5b89\u88c5  # \u5b89\u88c5 Ubuntu \u7f16\u8bd1\u5305\u3002 \n$ sudo apt-get install blast2 # \u6216\u8005\u76f4\u63a5\u4e0b\u8f7dNCBI Linux\u9884\u7f16\u8bd1\u5305\uff0c\u5e76\u89e3\u538b\u7f29\u5b89\u88c5 \n$ wget ftp://ftp.ncbi.nih.gov/blast/executables/release/2.2.26/blast-2.2.26-x64-linux.tar.gz\n$ tar -zxvf blast-2.2.26-x64 -C ~/app\n$ sudo ln -s ~/app/blast-2.2.26-x64/blastall /usr/local/sbin  \u8fd0\u884c Blast  Blast \u901a\u8fc7\u8c03\u7528 blastall \u8fd9\u4e2a gateway \u7a0b\u5e8f\uff0c\u6765\u5206\u522b\u8c03\u7528\u4e0d\u540c\u7b97\u6cd5\u548c\u7a0b\u5e8f\u5b9e\u73b0\u5e8f\u5217\u6bd4\u5bf9\u3002\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165 blastall \uff0c\u4f1a\u6253\u5370\u51fa\u4e00\u4efd\u53c2\u6570\u5217\u8868\u3002\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528  man blast  \u6765\u67e5\u770b Blast \u5de5\u5177\u7684\u7528\u6237\u624b\u518c\u3002  $ blastall  \u53c2\u6570\u8bf4\u660e\uff1a  -p: \u6307\u5b9a\u8981\u8fd0\u884c\u7684 blast \u7a0b\u5e8f\u3002\u53ef\u4ee5\u8c03\u7528\u7684\u6709:\n     ` blastp `              \u5c06\u6c28\u57fa\u9178\u5e8f\u5217\u4e0e\u86cb\u767d\u8d28\u6570\u636e\u5e93\u6bd4\u5bf9\n     ` blastn `              \u5c06\u6838\u9178\u5e8f\u5217\u4e0e\u6838\u9178\u6570\u636e\u5e93\u6bd4\u5bf9\n     ` blastx `              \u5c06\u6838\u9178\u5e8f\u5217\u7ffb\u8bd1\u6210\u86cb\u767d\u5e8f\u5217\u540e\u4e0e\u975e\u5197\u4f59 ( nr ) \u86cb\u767d\u8d28\u6570\u636e\u5e93\u6bd4\u5bf9\n     ` psitblastn ` \n     ` tblastn ` \n     ` tblastx ` \n-d: \u6307\u5b9a\u8981\u8c03\u7528\u6570\u636e\u5e93\uff0c\u9ed8\u8ba4\u503c\u662f\u975e\u5197\u4f59 ( nr ) \u6570\u636e\u5e93\u3002\u672c\u5730 Blast \u6bd4\u5bf9\u4e00\u822c\u6765\u8bf4\u90fd\u662f\u8c03\u7528 formatdb \u683c\u5f0f\u5316\u7684\u6570\u636e\u5e93\u3002\n-i: \u8f93\u5165\uff0c\u9ed8\u8ba4\u503c\u662f\u7ec8\u7aef\u8f93\u5165\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6587\u4ef6\u7684\u65b9\u5f0f\uff0c\u6bd4\u5982 ` -i seq.fasta ` \n-o: \u8f93\u51fa\uff0c\u9ed8\u8ba4\u503c\u662f\u7ec8\u7aef\u6253\u5370\u8f93\u51fa\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u6587\u4ef6\u7684\u65b9\u5f0f\uff0c\u6bd4\u5982 ` -o result.txt ` \n-e: \u671f\u671b\u503c\u3002\n-T: \u8f93\u51fa\u6587\u4ef6\u683c\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3aF ( False ) \uff0c\u60f3\u8f93\u51faHTML\u683c\u5f0f\u7684\u53ef\u4ee5\u7528 ` -T T ` \n-M: \u77e9\u9635\u7b97\u6cd5\u9009\u62e9\uff0c\u9ed8\u8ba4\u503c\u662f ` BLOSUM62 ` \n-n: \u5982\u679c\u60f3\u4f7f\u7528MegaBlast\uff0c\u5c31\u8bbe\u7f6e ` -n T ` \n-b: \u6570\u636e\u5e93\u4e2d\u7684\u6bd4\u5bf9\u7ed3\u679c\u663e\u793a\u6761\u76ee\u6570\uff0c\u9ed8\u8ba4\u662f250\u6761\u8bb0\u5f55\u3002\n-m: \u6bd4\u5bf9\u7ed3\u679c\u7684\u8f93\u51fa\u663e\u793a\u65b9\u5f0f\uff0c\u503c\u4e3a0~11\uff0c\u9ed8\u8ba4\u662f0\u3002\u5404\u4e2a\u6570\u5b57\u542b\u4e49\u89c1\u4e0b\u8868\u3002     options  meaning      0  pairwise    1  query-anchored showing identities    2  query-anchored no identities    3  flat query-anchored, show identities    4  flat query-anchored, no identities    5  query-anchored no identities and blunt ends    6  flat query-anchored, no identities and blunt ends    7  XML Blast output    8  tabular    9  tabular with comment lines    10  ASN, text    11  ASN, binary [Integer]     \u5176\u4ed6\u53c2\u6570\u53c2\u89c1 man blast \u3002  \u5e94\u7528\u4e3e\u4f8b:  Local blast\u4f8b\u5b50\uff1a\u9996\u5148\u4e0b\u8f7d\u4e00\u4e2a\u57fa\u56e0\u7ec4\u6587\u4ef6\u5e76\u683c\u5f0f\u5316\u4f5c\u4e3a\u672c\u5730\u6570\u636e\u5e93\uff0c\u7136\u540e\u4f7f\u7528 blastn \u5bf9\u5e8f\u5217\u8fdb\u884c\u6bd4\u5bf9\u3002  $ formatdb -i custom_genome.fasta -o T -p F\n$ blastall -i myseq.fasta -d custom_genome.fasta -p blastn",
            "title": "1.1 Blast"
        },
        {
            "location": "/chapter_02/02_blast/#12-blast",
            "text": "\u4e0b\u8f7d\u5b89\u88c5 NCBI Blast+  $ sudo apt-get install ncbi-blast+  \u6784\u5efa\u6570\u636e\u5e93  $ makeblastdb -in data/database.fasta -dbtype nucl -parse_seqids  \u8fd0\u884c blast  $ blastn -query my_seq.fasta -db data/database.fasta -out result.txt  http://www.personal.psu.edu/iua1/courses/files/2014/lecture-12.pdf",
            "title": "1.2 Blast+"
        },
        {
            "location": "/chapter_02/02_blast/#2-blast-web",
            "text": "",
            "title": "2. \u6784\u5efa\u672c\u5730\u7684 blast web \u670d\u52a1"
        },
        {
            "location": "/chapter_02/02_blast/#21-blastkit",
            "text": "blastkit \u662f\u4e00\u4e2a\u5305\u542bwebserver\u7b49\u5de5\u5177\u7684blast\u5de5\u5177\u96c6\u3002  \u5b89\u88c5\u4f9d\u8d56\u5305  $ conda create -n blastkit\n$ conda activate blastkit ( blastkit ) $ pip install pygr ( blastkit ) $ pip install whoosh ( blastkit ) $ pip install git+https://github.com/ctb/pygr-draw.git ( blastkit ) $ pip install git+https://github.com/ged-lab/screed.git ( blastkit ) $ conda install lighttpd ( blastkit ) $ conda install blast-legacy  \u5bf9lighttpd webserver\u8fdb\u884c\u914d\u7f6e  $  cd  /etc/lighttpd/conf-enabled\n$ sudo ln -fs ../conf-available/10-cgi.conf ./\n$ sudo  echo   'cgi.assign = ( \".cgi\" => \"\" )'  >>  10 -cgi.conf\n$ sudo  echo   'index-file.names += ( \"index.cgi\" ) '  >>  10 -cgi.conf\n$ sudo /etc/init.d/lighttpd restart  ( prokka ) $ conda install lighttpd ( prokka ) $  cd   $HOME /.conda/etc/lighttpd/conf-enabled\n$ sudo ln -fs ../conf-available/10-cgi.conf ./\n$ sudo  echo   'cgi.assign = ( \".cgi\" => \"\" )'  >>  10 -cgi.conf\n$ sudo  echo   'index-file.names += ( \"index.cgi\" ) '  >>  10 -cgi.conf\n$ lighttpd restart  \u5b89\u88c5 blastkit  $  cd  ~/app\n$ git clone https://github.com/ctb/blastkit.git -b ec2\n$  cd  blastkit/www\n~/app/blastkit/www$ sudo ln -fs  $PWD  /var/www/blastkit\n~/app/blastkit/www$ mkdir files\n~/app/blastkit/www$ chmod a+rxwt files\n~/app/blastkit/www$ chmod +x /root\n~/app/blastkit/www$  cd  ..\n~/app/blastkit$ python ./check.py  \u5982\u679c\u5b89\u88c5\u987a\u5229\uff0c\u5c31\u4f1a\u63d0\u793a\u4e00\u5207\u5df2\u7ecf\u51c6\u5907\u5b8c\u6bd5\u3002\u63a5\u4e0b\u6765\u8981\u51c6\u5907\u6570\u636e\u3002  $ cp /mnt/assembly/ecoli.21/contigs.fa ~/app/blastkit/db/db.fa\n$  cd  ~/app/blastkit\n$ formatdb -i db/db.fa -o T -p F\n$ python index-db.py db/db.fa",
            "title": "2.1 blastkit"
        },
        {
            "location": "/chapter_02/02_blast/#reference",
            "text": "Blastkit  Caltech workshop  Angus",
            "title": "Reference"
        },
        {
            "location": "/chapter_02/08_seqkit/",
            "text": "Seqkit \u597d\u7528\u7684\u547d\u4ee4\u884c\u5e8f\u5217\u5904\u7406\u5de5\u5177\u5957\u4ef6\n\u00b6\n\n\nSeqkit \u662f\u7531\u56fd\u4eba\u5f00\u53d1\u7684\u5e8f\u5217\u5904\u7406\u5de5\u5177",
            "title": "03. \u56fd\u4ea7\u5e8f\u5217\u5904\u7406\u795e\u5668 SeqKit"
        },
        {
            "location": "/chapter_02/08_seqkit/#seqkit",
            "text": "Seqkit \u662f\u7531\u56fd\u4eba\u5f00\u53d1\u7684\u5e8f\u5217\u5904\u7406\u5de5\u5177",
            "title": "Seqkit \u597d\u7528\u7684\u547d\u4ee4\u884c\u5e8f\u5217\u5904\u7406\u5de5\u5177\u5957\u4ef6"
        },
        {
            "location": "/chapter_02/09_kmer/",
            "text": "k-mer \u5206\u6790\n\u00b6\n\n\nkhmer\n\n\n$ pip install khmer\n\n\n\n\n\u901a\u8fc7 conda \u5b89\u88c5\n\u00b6\n\n\n\u7528 conda \u65b0\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883\u5b89\u88c5 \nkhmer\n\u3002\u5f53\u524d\u7248\u672c\u4e3a [2.12][\nhttp://khmer.readthedocs.io/en/v2.1.2/\n]\uff0c\u5b89\u88c5\u8fc7\u7a0b\u8fd8\u4f1a\u81ea\u52a8 [screed][\nhttps://github.com/dib-lab/screed\n]\uff08\u4e00\u4e2a\u8f7b\u91cf\u7ea7 python \u5e8f\u5217\u6570\u636e\u5e93\u5de5\u5177\uff09\u3002\n\n\n$ conda create -n khmer\n$ conda activate khmer\n\n(\nkhmer\n)\n$ conda install khmer ipython\n\n\n\n\nkhmer\n \u6709\u4e00\u5957\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u8fd0\u884c\u4f7f\u7528\u3002\u53e6\u5916\u4e5f\u53ef\u4ee5\u4f7f\u7528 \nkhmer\n \u7684 API\uff0c\u7f16\u5199 python \u4ee3\u7801\u8c03\u7528\u3002\n\n\nload-into-counting.py\n\n\n$ load-into-counting.py -T \n4\n -k \n32\n -x 1e8 -N \n4\n counts R1.fastq.gz\n\n\n\n\nnormalize-by-median.py\n\n\n\u53bb\u9664\u5197\u4f59\u5e8f\u5217\u3002\u811a\u672c\u7a0b\u5e8f\u5c06 Fast[A/Q] \u683c\u5f0f\u6570\u636e\u6587\u4ef6\u5217\u8868\u5316\uff0c\n\n\n\u811a\u672c\u8f93\u51fa\u7684\u5e8f\u5217\u53ef\u4ee5\u88ab\u7ec4\u88c5\u8f6f\u4ef6\u6bd4\u5982 SPAdes \u7b49\u8fdb\u884c\u5e8f\u5217\u7ec4\u88c5\u3002\n\n\n$ normalize-by-median.py -p -k \n21\n -o - read.fq output.fq\n\n\n\n\nreadstats.py\n\n\n\u7edf\u8ba1 FASTA/Q \u5e8f\u5217\u4fe1\u606f\u3002\n\n\n$ readstats.py -o R1.output R1.fastq.gz\n$ cat R1.output\n\nfound \n449472737\n bps / \n1879073\n seqs\n;\n \n239\n.2 average length -- R1.fastq.gz\n---------------\n\n449472737\n bp / \n1879073\n seqs\n;\n \n239\n.2 average length -- R1.fastq.gz\n---------------\n\n449472737\n bp / \n1879073\n seqs\n;\n \n239\n.2 average length -- total\n\n\n\n\nkhmer \u7528\u9014\n\u00b6\n\n\n\u5bf9 de novo assembly \u8fdb\u884c\u6570\u5b57\u5747\u4e00\u5316\u8fdb\u884c\u9884\u5904\u7406\n\n\nPython API\n\u00b6\n\n\n$ ipython\nIn \n[\n1\n]\n: import khmer\nIn \n[\n2\n]\n: \ncounts\n \n=\n khmer.Counttable\n(\n31\n, 1e7, \n4\n)\n\nIn \n[\n3\n]\n: counts.consume_seqfile\n(\n'R1.fastq.gz'\n)\n\n\n(\n25000\n, \n1150000\n)\n\n\n# 31 \u662f kmer \u957f\u5ea6\uff0c1e7 \u662f table size\uff0c4 \u662f table \u6570\n\n\n# 25000 \u8868\u793a\u5e8f\u5217\u6570\u91cf\uff0c\u9ad8\u901a\u91cf\u6d4b\u5e8f\u91cc\u5373 reads \u6570\u3002\n\n\n# 1150000 \u8868\u793a\u6307\u5b9a kmer \u5207\u5272\u540e\u7279\u5b9a kmer \u5e8f\u5217\u6570\n\nIn \n[\n4\n]\n: counts.get\n(\n'TGACTTTCTTCGCTTCCTGACGGCTTATGCC'\n)\n\n\n105\n\n\n\n\n\nReference\n\u00b6\n\n\n\n\nhttps://www.ncbi.nlm.nih.gov/pmc/articles/PMC4608353/\n\n\nhttp://khmer.readthedocs.io/en/latest/",
            "title": "04. K-mer \u5904\u7406\u5de5\u5177"
        },
        {
            "location": "/chapter_02/09_kmer/#k-mer",
            "text": "khmer  $ pip install khmer",
            "title": "k-mer \u5206\u6790"
        },
        {
            "location": "/chapter_02/09_kmer/#conda",
            "text": "\u7528 conda \u65b0\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883\u5b89\u88c5  khmer \u3002\u5f53\u524d\u7248\u672c\u4e3a [2.12][ http://khmer.readthedocs.io/en/v2.1.2/ ]\uff0c\u5b89\u88c5\u8fc7\u7a0b\u8fd8\u4f1a\u81ea\u52a8 [screed][ https://github.com/dib-lab/screed ]\uff08\u4e00\u4e2a\u8f7b\u91cf\u7ea7 python \u5e8f\u5217\u6570\u636e\u5e93\u5de5\u5177\uff09\u3002  $ conda create -n khmer\n$ conda activate khmer ( khmer ) $ conda install khmer ipython  khmer  \u6709\u4e00\u5957\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u8fd0\u884c\u4f7f\u7528\u3002\u53e6\u5916\u4e5f\u53ef\u4ee5\u4f7f\u7528  khmer  \u7684 API\uff0c\u7f16\u5199 python \u4ee3\u7801\u8c03\u7528\u3002  load-into-counting.py  $ load-into-counting.py -T  4  -k  32  -x 1e8 -N  4  counts R1.fastq.gz  normalize-by-median.py  \u53bb\u9664\u5197\u4f59\u5e8f\u5217\u3002\u811a\u672c\u7a0b\u5e8f\u5c06 Fast[A/Q] \u683c\u5f0f\u6570\u636e\u6587\u4ef6\u5217\u8868\u5316\uff0c  \u811a\u672c\u8f93\u51fa\u7684\u5e8f\u5217\u53ef\u4ee5\u88ab\u7ec4\u88c5\u8f6f\u4ef6\u6bd4\u5982 SPAdes \u7b49\u8fdb\u884c\u5e8f\u5217\u7ec4\u88c5\u3002  $ normalize-by-median.py -p -k  21  -o - read.fq output.fq  readstats.py  \u7edf\u8ba1 FASTA/Q \u5e8f\u5217\u4fe1\u606f\u3002  $ readstats.py -o R1.output R1.fastq.gz\n$ cat R1.output\n\nfound  449472737  bps /  1879073  seqs ;   239 .2 average length -- R1.fastq.gz\n--------------- 449472737  bp /  1879073  seqs ;   239 .2 average length -- R1.fastq.gz\n--------------- 449472737  bp /  1879073  seqs ;   239 .2 average length -- total",
            "title": "\u901a\u8fc7 conda \u5b89\u88c5"
        },
        {
            "location": "/chapter_02/09_kmer/#khmer",
            "text": "\u5bf9 de novo assembly \u8fdb\u884c\u6570\u5b57\u5747\u4e00\u5316\u8fdb\u884c\u9884\u5904\u7406",
            "title": "khmer \u7528\u9014"
        },
        {
            "location": "/chapter_02/09_kmer/#python-api",
            "text": "$ ipython\nIn  [ 1 ] : import khmer\nIn  [ 2 ] :  counts   =  khmer.Counttable ( 31 , 1e7,  4 ) \nIn  [ 3 ] : counts.consume_seqfile ( 'R1.fastq.gz' )  ( 25000 ,  1150000 )  # 31 \u662f kmer \u957f\u5ea6\uff0c1e7 \u662f table size\uff0c4 \u662f table \u6570  # 25000 \u8868\u793a\u5e8f\u5217\u6570\u91cf\uff0c\u9ad8\u901a\u91cf\u6d4b\u5e8f\u91cc\u5373 reads \u6570\u3002  # 1150000 \u8868\u793a\u6307\u5b9a kmer \u5207\u5272\u540e\u7279\u5b9a kmer \u5e8f\u5217\u6570 \nIn  [ 4 ] : counts.get ( 'TGACTTTCTTCGCTTCCTGACGGCTTATGCC' )  105",
            "title": "Python API"
        },
        {
            "location": "/chapter_02/09_kmer/#reference",
            "text": "https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4608353/  http://khmer.readthedocs.io/en/latest/",
            "title": "Reference"
        },
        {
            "location": "/chapter_04/03_bacteria-assembly/",
            "text": "\u7ec6\u83cc\u57fa\u56e0\u7ec4\u77ed\u5e8f\u5217\u62fc\u63a5\u62fc\u63a5\n\u00b6\n\n\n\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u540e\u7684\u62fc\u63a5\u5de5\u4f5c\uff0c\u6709\u8bb8\u591a\u8f6f\u4ef6\u53ef\u4ee5\u5b8c\u6210\u3002\u8fd1\u51e0\u5e74\u4e0d\u65ad\u6709\u65b0\u7684\u4f18\u79c0\u62fc\u63a5\u8f6f\u4ef6\u6d8c\u73b0\uff0c\u672c\u8282\u4ec5\u6311\u9009\u51e0\u4e2a\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u62fc\u63a5\u4f7f\u7528\u8f83\u591a\u4e5f\u662f\u8bc4\u6d4b\u4e2d\u6bd4\u8f83\u4f18\u79c0\u7684\u51e0\u4e2a\u5de5\u5177\u3002\u4e5f\u53ef\u4ee5\u5148\u5bf9\u81ea\u5df1\u7684\u6d4b\u5e8f\u7269\u79cd\u505a\u4e00\u4e2a assembly evaluation\uff0c\u9009\u62e9\u6bd4\u8f83\u9002\u5408\u7684\u62fc\u63a5\u8f6f\u4ef6\u3002\n\n\n\u5e38\u7528\u62fc\u63a5\u8f6f\u4ef6\u5de5\u5177\u5217\u8868\n\n\n\n\nSPAdes <http://spades.bioinf.spbau.ru/>\n_\n\n\nMaSuRCA <http://www.genome.umd.edu/masurca.html>\n_\n\n\nVelvet\n\n\nA5_miseq\n\n\n\n\n\u66f4\u591a\u5de5\u5177\u53ef\u4ee5\u53c2\u89c1\n\u8fd9\u91cc <https://omictools.com/genome-assembly-category>\n_\n\n\n1. SPAdes\n\u00b6\n\n\nSPAdes \u662f\u7531\n\n\n1.1 \u4e0b\u8f7d\u5e76\u5b89\u88c5 SPAdes\n\u00b6\n\n\n\u4e0b\u8f7d\u7f16\u8bd1\u5305\u5b89\u88c5\n\n\n\u4e0b\u8f7d\u9884\u5148\u7f16\u8bd1\u7684\u7248\u672c\u5305\uff0c\u5c06\u53ef\u6267\u884c\u6587\u4ef6\u6dfb\u52a0\u5230\u7cfb\u7edf\u8def\u5f84\u4e2d\uff0c\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u8fd0\u884c\u3002\n\n\n$ curl -O http://spades.bioinf.spbau.ru/release3.11.1/SPAdes-3.9.0-Linux.tar.gz\n$ tar zxf SPAdes-3.9.0-Linux.tar.gz -C ~/app\n$ \ncd\n ~/app\n$ sudo ln -s \n`\npwd\n`\n/SPAdes-3.11.0-Linux/bin/* /usr/local/sbin\n\n\n\n\n\u901a\u8fc7conda\u5b89\u88c5\n\n\n$ conda create -n assembly\n$ conda activate assembly\n\n(\nassembly\n)\n$ conda install spades\n\n\n\n\nDocker\u65b9\u5f0f\u5b89\u88c5\n\n\n$\n\n\n\n\n1.2 \u62fc\u88c5\u7ec6\u83cc\u57fa\u56e0\u7ec4\n\u00b6\n\n\n# -t 40 \u8868\u793a\u752840\u4e2a threads \u8fdb\u884c\u62fc\u63a5\uff0c\u6839\u636e\u81ea\u5df1\u7535\u8111\u7684CPU\u60c5\u51b5\u81ea\u884c\u8bbe\u7f6e\u3002\n\n$ spades.py --careful -k \n21\n,33,55,77,99,121 -1 SRR95386_1.fastq -2 SRR955386_2.fastq -o spades_output -t \n40\n\n\n\n\n\nSPAdes\u4f1a\u5c1d\u8bd5\u4e0d\u540c\u7684Kmer\uff0c\u56e0\u6b64\u62fc\u88c5\u65f6\u95f4\u4e5f\u4f1a\u6839\u636eKmer\u9009\u62e9\u6570\u91cf\u6210\u500d\u589e\u52a0\u3002\u5bf9\u4e8e\u5e38\u89c1\u7684 Miseq v2/v3 \u8bd5\u5242\u76d2\uff0c\u91c7\u7528 PE150/PE250/PE300 \u7684\u8bfb\u957f\u6d4b\u5e8f\uff0c\u5e38\u7528\u7684\u62fc\u63a5\u547d\u4ee4\u662f\uff1a\n\n\n# PE150 \u8bfb\u957f\u6d4b\u5e8f\u6570\u636e\n\n$ spades.py -k \n21\n,33,55,77 --careful -1 SRR95386_1.fastq -2 SRR955386_2.fastq -o SRR95386_output -t \n40\n\n\n# PE250/300 \u8bfb\u957f\u6d4b\u5e8f\u6570\u636e\n\n$ spades.py -k \n21\n,33,55,77,99,127 --careful -1 SRR95386_1.fastq -2 SRR955386_2.fastq -o SRR95386_output -t \n40\n\n\n\n\n\n2. Macursa\n\u00b6\n\n\n2.1 \u4e0b\u8f7d\u5e76\u5b89\u88c5 MaSuRCA\n\n^\n^\n^\n^\n^\n^\n^\n^\n\n\n.. code-block:: bash\n\n\n~/tmp$ curl -O \nftp://ftp.genome.umd.edu/pub/MaSuRCA/MaSuRCA-3.1.3.tar.gz\n\n   ~/tmp$ tar zxvf MaSuRCA-3.1.3.tar.gz -C ~/app\n   ~/tmp$ cd ~/app\n   ~/app$ ./MaSuRCA-2.3.0/install.sh\n   ~/app$ sudo ln -s \npwd\n/MaSuRCA-2.3.0/bin/masurca /usr/local/sbin\n\n\n2.2 \u5efa\u7acb\u62fc\u88c5\u914d\u7f6e\u6587\u4ef6\n\n^\n^\n^\n^\n^\n^\n^^\n\n\n.. code-block:: bash\n\n\n~/data$ touch SRR955386_masurca.config\n   ~/data$ nano SRR955386_masurca.config\n\n\n\u6587\u4ef6\u5185\u5bb9\u4fee\u6539\u5982\u4e0b\uff1a\n\n\n.. code-block:: bash\n\n\nDATA\n   PE= p1 500 50 SRR955386_1.fastq SRR955386_2.fastq\n   END\n\n\nPARAMETERS\n   GRAPH_KMER_SIZE=auto\n   USE_LINKING_MATES=1\n   LIMIT_JUMP_COVERAGE = 60\n   KMER_COUNT_THRESHOLD = 1\n   NUM_THREADS= 2\n   JF_SIZE=100000000\n   DO_HOMOPOLYMER_TRIM=0\n   END\n\n\n\u8bbe\u7f6e \nGRAPH_KMER_SIZE=auto\n\uff0c\u8f6f\u4ef6\u4f1a\u8c03\u7528Kmer=31\u6765\u8fdb\u884c\u62fc\u88c5\u3002\u5bf9\u4e8eMiSeq PE250\u4ee5\u4e0a\u7684\u63d2\u7247\uff0c\u53ef\u4ee5\u8003\u8651\u624b\u52a8\u8bbe\u7f6e\u4f7f\u7528\u66f4\u5927\u7684Kmer\u3002\n\n\n2.3 \u5f00\u59cb\u62fc\u88c5\n\n^\n^\n^\n^\n\n\n.. code-block:: bash\n\n\n~/app$ masurca SRR955386_masurca.config\n   ~/app$ ./assemble.sh\n\n\n\n\n3. Velvet\n\u00b6\n\n\n3.1 \u4e0b\u8f7d\u5e76\u5b89\u88c5\n\n^\n^\n^\n^\n^^\n\n\nVelvet \u662f\u4e00\u4e2a\u8001\u724c\u7684\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u62fc\u63a5\u8f6f\u4ef6\u3002Velvet\u6700\u65b0\u7248\u672c\u662f1.2.10\uff0c\u53ef\u4ee5\u8bbf\u95ee \n\u5b98\u65b9\u7f51\u7ad9 <https://www.ebi.ac.uk/~zerbino/velvet/>\n_ \u4e0b\u8f7d\u6e90\u4ee3\u7801\u5305\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u514b\u9686 \n\u8f6f\u4ef6\u4ed3\u5e93 <https://github.com/dzerbino/velvet.git>\n_ \u7684\u65b9\u5f0f\u83b7\u5f97\u6700\u65b0\u7684\u6e90\u4ee3\u7801\u3002\n\n\n\u4e0b\u8f7d\u6e90\u4ee3\u7801\n\n\n\u666e\u901a\u7528\u6237\u53ef\u4ee5\u4e0b\u8f7d\u6e90\u4ee3\u7801\u5305\u81ea\u884c\u7f16\u8bd1\u83b7\u5f97\u8f6f\u4ef6\u3002\n\n\n.. code-block:: bash\n\n\n~$ cd /tmp\n   ~/tmp$ wget \nhttps://www.ebi.ac.uk/~zerbino/velvet/velvet_1.2.10.tgz\n\n   ~/tmp$ tar xvf velvet_1.2.10.tgz -C ~/app/velvet\n\n\n\u514b\u9686\u4ee3\u7801\u4ed3\u5e93\n\n\n\u5982\u679c\u5728\u8f6f\u4ef6\u8fd0\u884c\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u60f3\u8bd5\u7528\u6700\u65b0\u7248\u4ee3\u7801\uff0c\u6216\u662f\u6709\u80fd\u529b\u63d0\u4ea4issues\uff0c\u6216\u8005\u60f3\u6539\u8fdb\u8f6f\u4ef6\u53c2\u4e0e\u5f00\u6e90\u4ee3\u7801\u7f16\u5199\u7684\u53ef\u4ee5\u9009\u62e9\u514b\u9686\u4ee3\u7801\u5e93\u7684\u65b9\u5f0f\u3002\n\n\n.. code-block:: bash\n\n\n~$ cd ~/tmp\n   ~/tmp$ git clone \nhttps://github.com/dzerbino/velvet.git\n\n\n\u7f16\u8bd1\u5b89\u88c5\n\n\nmake\u53ef\u4ee5\u8fdb\u884c\u7f16\u8bd1\uff0c\u6709\u51e0\u4e2a\u7f16\u8bd1\u53c2\u6570\u53ef\u4ee5\u9009\u62e9\uff0c\u5206\u522b\u662fMAXKMERLENGTH, DIRECTORY\n\n\n.. code-block:: bash\n\n\n~$ cd ~/app/velvet\n   ~/app/velvet$ make 'MAXKMERLENGTH=127'\n   ~/app/velvet$ sudo cp velveth velvetg /usr/local/sbin\n\n\n3.2 \u62fc\u63a5\u57fa\u56e0\u7ec4\n\n^\n^\n^\n^\n^^\n\n\nvelvet\u8f6f\u4ef6\u75312\u4e2a\u53ef\u6267\u884c\u6587\u4ef6 \nvelveth\n \u548c \nvelvetg\n \u7ec4\u6210\u3002\n\n\n.. code-block\n\n\n~$ velvet\n\n\n3.3 \u5176\u4ed6\u7ec4\u4ef6\n\n^\n^\n^\n^\n\n\n\n\n4. A5-miseq\n\u00b6\n\n\nA5-miseq <https://sourceforge.net/projects/ngopt/>\n__ \u662f\u4e00\u4e2a\u7528 perl\n\u5f00\u53d1\u7684\u9488\u5bf9\u7ec6\u83cc\u57fa\u56e0\u7ec4 de novo assembly \u7684 pipeline\n\u5de5\u5177\u3002\u5b83\u672c\u8eab\u4e0d\u53c2\u4e0e\u7ec4\u88c5\uff0c\u800c\u662f\u901a\u8fc7\u7ec4\u5408\u4e00\u5957\u5de5\u5177\u6765\u5b8c\u6210\u5de5\u4f5c\uff0c\u5de5\u5177\u96c6\u5305\u62ec\uff1a\n\n\n\n\nbwa\n\n\nsamtools\n\n\nSGA\n\n\nbowtie\n\n\nTrimmomatic\n\n\nIDBA-UD\n\n\nSSPACE\n\n\n\n\n\u8fd9\u4e9b\u5de5\u5177\u90fd\u4ee5\u53ca\u96c6\u6210\u5728 A5-miseq \u4e2d\uff0c\u4e0d\u9700\u8981\u53e6\u5916\u5b89\u88c5\u3002\u4e3a\u4e86\u907f\u514d\u4e0d\u540c\u7248\u672c\u7684\nsamtools\uff0cbowtie \u5bf9\u7ed3\u679c\u4ea7\u751f\u7684\u5dee\u5f02\uff0c\u5efa\u8bae\u91c7\u7528\u865a\u62df\u73af\u5883\u5982 docker\n\u7b49\u6765\u9694\u79bb\u8fd0\u884c\u73af\u5883\u3002\n\n\n4.1 \u5b89\u88c5 A5-miseq\n\n^\n^\n^\n^\n^\n^^\n\n\n\u4e0b\u8f7d\u9884\u7f16\u8bd1\u5305\u5b89\u88c5\n\n~\n~\n~~\n\n\n.. code-block:: bash\n\n\n~/tmp$ wget \nhttp://downloads.sourceforge.net/project/ngopt/a5_miseq_linux_20150522.tar.gz\n\n   ~/tmp$ tar zxvf a5_miseq_linux_20150522.tar.gz -C ~/app\n   ~/tmp$ sudo ln -s ~/app/a5_miseq_linux_20150522/bin/a5_pipeline.pl /usr/local/sbin\n\n\n\u5efa\u7acb Docker \u5bb9\u5668\u5b89\u88c5\n\n~\n~\n~\n~\n\n\n.. code-block:: bash\n\n\n~/docker$ mkdir -p a5-miseq && cd a5-miseq\n   ~/docker/a5-miseq$ touch Dockerfile\n\n\n.. code-block:: bash\n\n\nFROM ubuntu:latest\n   MAINTAINER Mark Renton \nindexofire@gmail.com\n\n\nRUN apt-get update -qy\n   RUN apt-get install -qy openjdk-7-jre-headless file\n   ADD \nhttp://downloads.sourceforge.net/project/ngopt/a5_miseq_linux_20150522.tar.gz\n /tmp/a5_miseq.tar.gz\n   RUN mkdir /tmp/a5_miseq\n   RUN tar xzf /tmp/a5_miseq.tar.gz --directory /tmp/a5_miseq --strip-components=1\n   ADD run /usr/local/bin/\n   ADD Procfile /\n   ENTRYPOINT [\"/usr/local/bin/run\"]\n\n\n4.2 \u4f7f\u7528 A5-miseq\n\n^\n^\n^\n^\n^\n^^\n\n\n.. code-block:: bash\n\n\n$ perl a5_pipeline.pl SRR955386_1.fastq SRR955386_2.fastq ~/data/a5_output\n\n\n\n\n\n4.3 A5-miseq \u6587\u6863\n\n^\n^\n^\n^\n^\n^^\n\n\n\u67e5\u770b A5-miseq \u5de5\u5177\u7684\u4f7f\u7528\u6587\u6863\u53ef\u4ee5\u7528 a5_pipeline.pl \u5de5\u5177\u67e5\u770b\u3002\n\n\n.. code-block:: bash\n\n\n# Usage:\n$ a5_pipeline.pl [--begin=1-5] [--end=1-5] [--preprocessed] <lib_file> <out_base>\n\n\n\n\n\nReference:\n\u00b6\n\n\n\n\nhttp://www.chenlianfu.com/?p=1635\n\n\nhttp://www.bbioo.com/lifesciences/40-116878-1.html\n\n\nhttp://www.plob.org/2012/11/21/4797.html\n\n\nhttp://ged.msu.edu/angus/tutorials-2011/short-read-assembly-velvet.html",
            "title": "03. \u7ec6\u83cc\u57fa\u56e0\u7ec4\u7ec4\u88c5"
        },
        {
            "location": "/chapter_04/03_bacteria-assembly/#_1",
            "text": "\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u540e\u7684\u62fc\u63a5\u5de5\u4f5c\uff0c\u6709\u8bb8\u591a\u8f6f\u4ef6\u53ef\u4ee5\u5b8c\u6210\u3002\u8fd1\u51e0\u5e74\u4e0d\u65ad\u6709\u65b0\u7684\u4f18\u79c0\u62fc\u63a5\u8f6f\u4ef6\u6d8c\u73b0\uff0c\u672c\u8282\u4ec5\u6311\u9009\u51e0\u4e2a\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u62fc\u63a5\u4f7f\u7528\u8f83\u591a\u4e5f\u662f\u8bc4\u6d4b\u4e2d\u6bd4\u8f83\u4f18\u79c0\u7684\u51e0\u4e2a\u5de5\u5177\u3002\u4e5f\u53ef\u4ee5\u5148\u5bf9\u81ea\u5df1\u7684\u6d4b\u5e8f\u7269\u79cd\u505a\u4e00\u4e2a assembly evaluation\uff0c\u9009\u62e9\u6bd4\u8f83\u9002\u5408\u7684\u62fc\u63a5\u8f6f\u4ef6\u3002  \u5e38\u7528\u62fc\u63a5\u8f6f\u4ef6\u5de5\u5177\u5217\u8868   SPAdes <http://spades.bioinf.spbau.ru/> _  MaSuRCA <http://www.genome.umd.edu/masurca.html> _  Velvet  A5_miseq   \u66f4\u591a\u5de5\u5177\u53ef\u4ee5\u53c2\u89c1 \u8fd9\u91cc <https://omictools.com/genome-assembly-category> _",
            "title": "\u7ec6\u83cc\u57fa\u56e0\u7ec4\u77ed\u5e8f\u5217\u62fc\u63a5\u62fc\u63a5"
        },
        {
            "location": "/chapter_04/03_bacteria-assembly/#1-spades",
            "text": "SPAdes \u662f\u7531",
            "title": "1. SPAdes"
        },
        {
            "location": "/chapter_04/03_bacteria-assembly/#11-spades",
            "text": "\u4e0b\u8f7d\u7f16\u8bd1\u5305\u5b89\u88c5  \u4e0b\u8f7d\u9884\u5148\u7f16\u8bd1\u7684\u7248\u672c\u5305\uff0c\u5c06\u53ef\u6267\u884c\u6587\u4ef6\u6dfb\u52a0\u5230\u7cfb\u7edf\u8def\u5f84\u4e2d\uff0c\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u8fd0\u884c\u3002  $ curl -O http://spades.bioinf.spbau.ru/release3.11.1/SPAdes-3.9.0-Linux.tar.gz\n$ tar zxf SPAdes-3.9.0-Linux.tar.gz -C ~/app\n$  cd  ~/app\n$ sudo ln -s  ` pwd ` /SPAdes-3.11.0-Linux/bin/* /usr/local/sbin  \u901a\u8fc7conda\u5b89\u88c5  $ conda create -n assembly\n$ conda activate assembly ( assembly ) $ conda install spades  Docker\u65b9\u5f0f\u5b89\u88c5  $",
            "title": "1.1 \u4e0b\u8f7d\u5e76\u5b89\u88c5 SPAdes"
        },
        {
            "location": "/chapter_04/03_bacteria-assembly/#12",
            "text": "# -t 40 \u8868\u793a\u752840\u4e2a threads \u8fdb\u884c\u62fc\u63a5\uff0c\u6839\u636e\u81ea\u5df1\u7535\u8111\u7684CPU\u60c5\u51b5\u81ea\u884c\u8bbe\u7f6e\u3002 \n$ spades.py --careful -k  21 ,33,55,77,99,121 -1 SRR95386_1.fastq -2 SRR955386_2.fastq -o spades_output -t  40   SPAdes\u4f1a\u5c1d\u8bd5\u4e0d\u540c\u7684Kmer\uff0c\u56e0\u6b64\u62fc\u88c5\u65f6\u95f4\u4e5f\u4f1a\u6839\u636eKmer\u9009\u62e9\u6570\u91cf\u6210\u500d\u589e\u52a0\u3002\u5bf9\u4e8e\u5e38\u89c1\u7684 Miseq v2/v3 \u8bd5\u5242\u76d2\uff0c\u91c7\u7528 PE150/PE250/PE300 \u7684\u8bfb\u957f\u6d4b\u5e8f\uff0c\u5e38\u7528\u7684\u62fc\u63a5\u547d\u4ee4\u662f\uff1a  # PE150 \u8bfb\u957f\u6d4b\u5e8f\u6570\u636e \n$ spades.py -k  21 ,33,55,77 --careful -1 SRR95386_1.fastq -2 SRR955386_2.fastq -o SRR95386_output -t  40  # PE250/300 \u8bfb\u957f\u6d4b\u5e8f\u6570\u636e \n$ spades.py -k  21 ,33,55,77,99,127 --careful -1 SRR95386_1.fastq -2 SRR955386_2.fastq -o SRR95386_output -t  40",
            "title": "1.2 \u62fc\u88c5\u7ec6\u83cc\u57fa\u56e0\u7ec4"
        },
        {
            "location": "/chapter_04/03_bacteria-assembly/#2-macursa",
            "text": "2.1 \u4e0b\u8f7d\u5e76\u5b89\u88c5 MaSuRCA ^ ^ ^ ^ ^ ^ ^ ^  .. code-block:: bash  ~/tmp$ curl -O  ftp://ftp.genome.umd.edu/pub/MaSuRCA/MaSuRCA-3.1.3.tar.gz \n   ~/tmp$ tar zxvf MaSuRCA-3.1.3.tar.gz -C ~/app\n   ~/tmp$ cd ~/app\n   ~/app$ ./MaSuRCA-2.3.0/install.sh\n   ~/app$ sudo ln -s  pwd /MaSuRCA-2.3.0/bin/masurca /usr/local/sbin  2.2 \u5efa\u7acb\u62fc\u88c5\u914d\u7f6e\u6587\u4ef6 ^ ^ ^ ^ ^ ^ ^^  .. code-block:: bash  ~/data$ touch SRR955386_masurca.config\n   ~/data$ nano SRR955386_masurca.config  \u6587\u4ef6\u5185\u5bb9\u4fee\u6539\u5982\u4e0b\uff1a  .. code-block:: bash  DATA\n   PE= p1 500 50 SRR955386_1.fastq SRR955386_2.fastq\n   END  PARAMETERS\n   GRAPH_KMER_SIZE=auto\n   USE_LINKING_MATES=1\n   LIMIT_JUMP_COVERAGE = 60\n   KMER_COUNT_THRESHOLD = 1\n   NUM_THREADS= 2\n   JF_SIZE=100000000\n   DO_HOMOPOLYMER_TRIM=0\n   END  \u8bbe\u7f6e  GRAPH_KMER_SIZE=auto \uff0c\u8f6f\u4ef6\u4f1a\u8c03\u7528Kmer=31\u6765\u8fdb\u884c\u62fc\u88c5\u3002\u5bf9\u4e8eMiSeq PE250\u4ee5\u4e0a\u7684\u63d2\u7247\uff0c\u53ef\u4ee5\u8003\u8651\u624b\u52a8\u8bbe\u7f6e\u4f7f\u7528\u66f4\u5927\u7684Kmer\u3002  2.3 \u5f00\u59cb\u62fc\u88c5 ^ ^ ^ ^  .. code-block:: bash  ~/app$ masurca SRR955386_masurca.config\n   ~/app$ ./assemble.sh",
            "title": "2. Macursa"
        },
        {
            "location": "/chapter_04/03_bacteria-assembly/#3-velvet",
            "text": "3.1 \u4e0b\u8f7d\u5e76\u5b89\u88c5 ^ ^ ^ ^ ^^  Velvet \u662f\u4e00\u4e2a\u8001\u724c\u7684\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u62fc\u63a5\u8f6f\u4ef6\u3002Velvet\u6700\u65b0\u7248\u672c\u662f1.2.10\uff0c\u53ef\u4ee5\u8bbf\u95ee  \u5b98\u65b9\u7f51\u7ad9 <https://www.ebi.ac.uk/~zerbino/velvet/> _ \u4e0b\u8f7d\u6e90\u4ee3\u7801\u5305\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u514b\u9686  \u8f6f\u4ef6\u4ed3\u5e93 <https://github.com/dzerbino/velvet.git> _ \u7684\u65b9\u5f0f\u83b7\u5f97\u6700\u65b0\u7684\u6e90\u4ee3\u7801\u3002  \u4e0b\u8f7d\u6e90\u4ee3\u7801  \u666e\u901a\u7528\u6237\u53ef\u4ee5\u4e0b\u8f7d\u6e90\u4ee3\u7801\u5305\u81ea\u884c\u7f16\u8bd1\u83b7\u5f97\u8f6f\u4ef6\u3002  .. code-block:: bash  ~$ cd /tmp\n   ~/tmp$ wget  https://www.ebi.ac.uk/~zerbino/velvet/velvet_1.2.10.tgz \n   ~/tmp$ tar xvf velvet_1.2.10.tgz -C ~/app/velvet  \u514b\u9686\u4ee3\u7801\u4ed3\u5e93  \u5982\u679c\u5728\u8f6f\u4ef6\u8fd0\u884c\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u60f3\u8bd5\u7528\u6700\u65b0\u7248\u4ee3\u7801\uff0c\u6216\u662f\u6709\u80fd\u529b\u63d0\u4ea4issues\uff0c\u6216\u8005\u60f3\u6539\u8fdb\u8f6f\u4ef6\u53c2\u4e0e\u5f00\u6e90\u4ee3\u7801\u7f16\u5199\u7684\u53ef\u4ee5\u9009\u62e9\u514b\u9686\u4ee3\u7801\u5e93\u7684\u65b9\u5f0f\u3002  .. code-block:: bash  ~$ cd ~/tmp\n   ~/tmp$ git clone  https://github.com/dzerbino/velvet.git  \u7f16\u8bd1\u5b89\u88c5  make\u53ef\u4ee5\u8fdb\u884c\u7f16\u8bd1\uff0c\u6709\u51e0\u4e2a\u7f16\u8bd1\u53c2\u6570\u53ef\u4ee5\u9009\u62e9\uff0c\u5206\u522b\u662fMAXKMERLENGTH, DIRECTORY  .. code-block:: bash  ~$ cd ~/app/velvet\n   ~/app/velvet$ make 'MAXKMERLENGTH=127'\n   ~/app/velvet$ sudo cp velveth velvetg /usr/local/sbin  3.2 \u62fc\u63a5\u57fa\u56e0\u7ec4 ^ ^ ^ ^ ^^  velvet\u8f6f\u4ef6\u75312\u4e2a\u53ef\u6267\u884c\u6587\u4ef6  velveth  \u548c  velvetg  \u7ec4\u6210\u3002  .. code-block  ~$ velvet  3.3 \u5176\u4ed6\u7ec4\u4ef6 ^ ^ ^ ^",
            "title": "3. Velvet"
        },
        {
            "location": "/chapter_04/03_bacteria-assembly/#4-a5-miseq",
            "text": "A5-miseq <https://sourceforge.net/projects/ngopt/> __ \u662f\u4e00\u4e2a\u7528 perl\n\u5f00\u53d1\u7684\u9488\u5bf9\u7ec6\u83cc\u57fa\u56e0\u7ec4 de novo assembly \u7684 pipeline\n\u5de5\u5177\u3002\u5b83\u672c\u8eab\u4e0d\u53c2\u4e0e\u7ec4\u88c5\uff0c\u800c\u662f\u901a\u8fc7\u7ec4\u5408\u4e00\u5957\u5de5\u5177\u6765\u5b8c\u6210\u5de5\u4f5c\uff0c\u5de5\u5177\u96c6\u5305\u62ec\uff1a   bwa  samtools  SGA  bowtie  Trimmomatic  IDBA-UD  SSPACE   \u8fd9\u4e9b\u5de5\u5177\u90fd\u4ee5\u53ca\u96c6\u6210\u5728 A5-miseq \u4e2d\uff0c\u4e0d\u9700\u8981\u53e6\u5916\u5b89\u88c5\u3002\u4e3a\u4e86\u907f\u514d\u4e0d\u540c\u7248\u672c\u7684\nsamtools\uff0cbowtie \u5bf9\u7ed3\u679c\u4ea7\u751f\u7684\u5dee\u5f02\uff0c\u5efa\u8bae\u91c7\u7528\u865a\u62df\u73af\u5883\u5982 docker\n\u7b49\u6765\u9694\u79bb\u8fd0\u884c\u73af\u5883\u3002  4.1 \u5b89\u88c5 A5-miseq ^ ^ ^ ^ ^ ^^  \u4e0b\u8f7d\u9884\u7f16\u8bd1\u5305\u5b89\u88c5 ~ ~ ~~  .. code-block:: bash  ~/tmp$ wget  http://downloads.sourceforge.net/project/ngopt/a5_miseq_linux_20150522.tar.gz \n   ~/tmp$ tar zxvf a5_miseq_linux_20150522.tar.gz -C ~/app\n   ~/tmp$ sudo ln -s ~/app/a5_miseq_linux_20150522/bin/a5_pipeline.pl /usr/local/sbin  \u5efa\u7acb Docker \u5bb9\u5668\u5b89\u88c5 ~ ~ ~ ~  .. code-block:: bash  ~/docker$ mkdir -p a5-miseq && cd a5-miseq\n   ~/docker/a5-miseq$ touch Dockerfile  .. code-block:: bash  FROM ubuntu:latest\n   MAINTAINER Mark Renton  indexofire@gmail.com  RUN apt-get update -qy\n   RUN apt-get install -qy openjdk-7-jre-headless file\n   ADD  http://downloads.sourceforge.net/project/ngopt/a5_miseq_linux_20150522.tar.gz  /tmp/a5_miseq.tar.gz\n   RUN mkdir /tmp/a5_miseq\n   RUN tar xzf /tmp/a5_miseq.tar.gz --directory /tmp/a5_miseq --strip-components=1\n   ADD run /usr/local/bin/\n   ADD Procfile /\n   ENTRYPOINT [\"/usr/local/bin/run\"]  4.2 \u4f7f\u7528 A5-miseq ^ ^ ^ ^ ^ ^^  .. code-block:: bash  $ perl a5_pipeline.pl SRR955386_1.fastq SRR955386_2.fastq ~/data/a5_output  4.3 A5-miseq \u6587\u6863 ^ ^ ^ ^ ^ ^^  \u67e5\u770b A5-miseq \u5de5\u5177\u7684\u4f7f\u7528\u6587\u6863\u53ef\u4ee5\u7528 a5_pipeline.pl \u5de5\u5177\u67e5\u770b\u3002  .. code-block:: bash  # Usage:\n$ a5_pipeline.pl [--begin=1-5] [--end=1-5] [--preprocessed] <lib_file> <out_base>",
            "title": "4. A5-miseq"
        },
        {
            "location": "/chapter_04/03_bacteria-assembly/#reference",
            "text": "http://www.chenlianfu.com/?p=1635  http://www.bbioo.com/lifesciences/40-116878-1.html  http://www.plob.org/2012/11/21/4797.html  http://ged.msu.edu/angus/tutorials-2011/short-read-assembly-velvet.html",
            "title": "Reference:"
        },
        {
            "location": "/chapter_04/04_virus-assembly/",
            "text": "\u75c5\u6bd2\u57fa\u56e0\u7ec4\u7ec4\u88c5\n\u00b6\n\n\n\u75c5\u6bd2\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6709\u5f88\u591a\u65b9\u6cd5\uff0c\u8fd9\u91cc\u53ea\u9488\u5bf9\u4e8c\u4ee3\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u8fdb\u884c\u8ba8\u8bba\u3002\u7528\u4e8c\u4ee3\u6d4b\u75c5\u6bd2\u57fa\u56e0\u7ec4\u6709\u4e0d\u540c\u7684\u65b9\u6cd5\uff0c\u6bd4\u5982\u5bf9\u4e34\u5e8a\u6837\u672c\u4e2d\u5df2\u77e5\u75c5\u6bd2\u8fdb\u884c\u7279\u5f02\u6027PCR\u6269\u589e\u540e\u6d4b\u5e8f\uff1b\u6709\u4e9b\u5219\u91c7\u7528\u968f\u673a\u5f15\u7269\u6269\u589e\u540e\u518d\u6d4b\u5e8f\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u9488\u5bf9\u672a\u77e5\u75c5\u6bd2\u5e8f\u5217\uff0c\u4f46\u7531\u4e8e\u4e0d\u540c\u6837\u672c\uff08\u6bd4\u5982\u4e34\u5e8a\u6837\u672c\uff09\u4e2d\u542b\u6709\u7684\u5e72\u6270\u6838\u9178\u8f83\u591a\uff08\u5982\u4eba\u6e90DNA\u7b49\uff09\uff0c\u5f80\u5f80\u9700\u8981\u5b9e\u9a8c\u4e2d\u8fdb\u884c\u7279\u6b8a\u5904\u7406\u6216\u8005\u751f\u7269\u4fe1\u606f\u5b66\u5206\u6790\u65f6\u7b5b\u9009\u3002\n\n\n\u56e0\u6b64\u6211\u4eec\u53ea\u8ba8\u8bba\u7279\u5f02\u6027PCR\u6269\u589e\u540e\uff08\u7c7b\u4f3c\u4e00\u4ee3\u6d4b\u5e8f\uff09\u7528\u4e8c\u4ee3\u6d4b\u5e8f\u5206\u6790\u5df2\u77e5\u75c5\u6bd2\u7684\u65b9\u6cd5\u3002\u548c\u7ec6\u83cc\u5355\u514b\u9686\u57f9\u517b\u7269\u4e0d\u540c\uff0c\u4e34\u5e8a\u6837\u672c\u5373\u4f7fPCR\u6269\u589e\u540e\uff0c\n\n\n\u7531\u4e8e\u75c5\u6bd2\u57fa\u56e0\u7ec4\u4f4d\u70b9\u53d8\u5f02\u8f83\u660e\u663e\uff0c\u4f46\u662f\u5927\u7247\u6bb5\u7684\u5f02\u4f4d\u91cd\u7ec4\u6bd4\u8f83\u5c11\uff0c\u56e0\u6b64\u53ef\u4ee5\u91c7\u7528\u57fa\u4e8e mapping \u7684\u65b9\u6cd5\u83b7\u5f97\u57fa\u56e0\u7ec4\u3002\n\n\n\u9996\u5148\u8981\u9009\u62e9\u53c2\u8003\u5e8f\u5217\uff0c\u7531\u4e8e\u75c5\u6bd2\u7f16\u8bd1\u5927\uff0c\u6211\u4eec\u4e00\u822c\u5c3d\u53ef\u80fd\u9009\u62e9\u8fd1\u6e90\u7684\u6bd2\u682a\u3002\u6211\u4e48\u90a3\u53ef\u4ee5\u91c7\u7528 denovo \u7684\u65b9\u6cd5\u5148\u83b7\u5f97\u4e00\u4e2a\u5927\u7247\u6bb5\u9ad8\u8986\u76d6\u7684\u975e\u6c61\u67d3\u5e8f\u5217\uff0c\u7136\u540e blast \u627e\u5230\u8fd1\u6e90\u6bd2\u682a\u57fa\u56e0\u7ec4\u5e8f\u5217\uff0c\u5c06\u5176\u4f5c\u4e3a\u53c2\u8003\u57fa\u56e0\u7ec4\u518d\u4f7f\u7528 mapping \u7684\u65b9\u6cd5\u83b7\u5f97\u6d4b\u5e8f\u6bd2\u682a\u7684\u57fa\u56e0\u7ec4\u3002\n\n\n\u91c7\u7528 freebayes\n\u00b6\n\n\n$ spades.py\n$ blast\n$ bwa index ref.fasta\n$ bwa mem\n$ samtools index\n$ samtools\n$ freebayes\n\n\n\n\n\u91c7\u7528 GATK4\n\u00b6\n\n\n$ trimmomatic\n\n\n# ID:\n\n\n# PL: Platform \u6d4b\u5e8f\u5e73\u53f0\uff0c\u8fd9\u91cc\u6570\u636e\u6765\u81ea illumina \u5e73\u53f0\n\n\n# PU:\n\n\n# LB:\n\n\n# SM: Sample \u6837\u672c\u540d\u79f0\n\n$ bwa mem -t \n40\n -M -Y -R \n\"@RG\\tID:S1\\tPL:illumina\\tPU:\\tLB:\\tSM:\"\n ref.fasta \n\\\n\n>\n$ samtools sort -@ \n4\n -m 16G -O bam -o .sorted.bam\n\n$ gatk MarkDuplicates -I -M -O\n$ samtools index sorted.markdup.bam\n$ gatk BaseRecalibrator -R ref.fasta -I sorted.markdup.bam \n\\\n\n> -O sorted.markdup.recal.table\n$ gatk ApplyBQSR --bqsr-recal-file sorted.markdup.recal.table -R ref.fasta\n> -I sorted.markdup.bam -O sorted.markdup.BQSR.bam\n$ samtools index\n$ gatk HaplotypeCaller -R ref.fasta -I sorted.markdup.BQSR.bam \n\\\n\n> -O HC.vcf.gz\n\n\n# SNP call\n\n$ gatk VariantRecalibrator\n\n# Indel call\n\n\n\n\n\n\u4f7f\u7528 snippy\n\u00b6",
            "title": "04. \u75c5\u6bd2\u57fa\u56e0\u7ec4\u7ec4\u88c5"
        },
        {
            "location": "/chapter_04/04_virus-assembly/#_1",
            "text": "\u75c5\u6bd2\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6709\u5f88\u591a\u65b9\u6cd5\uff0c\u8fd9\u91cc\u53ea\u9488\u5bf9\u4e8c\u4ee3\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6570\u636e\u8fdb\u884c\u8ba8\u8bba\u3002\u7528\u4e8c\u4ee3\u6d4b\u75c5\u6bd2\u57fa\u56e0\u7ec4\u6709\u4e0d\u540c\u7684\u65b9\u6cd5\uff0c\u6bd4\u5982\u5bf9\u4e34\u5e8a\u6837\u672c\u4e2d\u5df2\u77e5\u75c5\u6bd2\u8fdb\u884c\u7279\u5f02\u6027PCR\u6269\u589e\u540e\u6d4b\u5e8f\uff1b\u6709\u4e9b\u5219\u91c7\u7528\u968f\u673a\u5f15\u7269\u6269\u589e\u540e\u518d\u6d4b\u5e8f\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u9488\u5bf9\u672a\u77e5\u75c5\u6bd2\u5e8f\u5217\uff0c\u4f46\u7531\u4e8e\u4e0d\u540c\u6837\u672c\uff08\u6bd4\u5982\u4e34\u5e8a\u6837\u672c\uff09\u4e2d\u542b\u6709\u7684\u5e72\u6270\u6838\u9178\u8f83\u591a\uff08\u5982\u4eba\u6e90DNA\u7b49\uff09\uff0c\u5f80\u5f80\u9700\u8981\u5b9e\u9a8c\u4e2d\u8fdb\u884c\u7279\u6b8a\u5904\u7406\u6216\u8005\u751f\u7269\u4fe1\u606f\u5b66\u5206\u6790\u65f6\u7b5b\u9009\u3002  \u56e0\u6b64\u6211\u4eec\u53ea\u8ba8\u8bba\u7279\u5f02\u6027PCR\u6269\u589e\u540e\uff08\u7c7b\u4f3c\u4e00\u4ee3\u6d4b\u5e8f\uff09\u7528\u4e8c\u4ee3\u6d4b\u5e8f\u5206\u6790\u5df2\u77e5\u75c5\u6bd2\u7684\u65b9\u6cd5\u3002\u548c\u7ec6\u83cc\u5355\u514b\u9686\u57f9\u517b\u7269\u4e0d\u540c\uff0c\u4e34\u5e8a\u6837\u672c\u5373\u4f7fPCR\u6269\u589e\u540e\uff0c  \u7531\u4e8e\u75c5\u6bd2\u57fa\u56e0\u7ec4\u4f4d\u70b9\u53d8\u5f02\u8f83\u660e\u663e\uff0c\u4f46\u662f\u5927\u7247\u6bb5\u7684\u5f02\u4f4d\u91cd\u7ec4\u6bd4\u8f83\u5c11\uff0c\u56e0\u6b64\u53ef\u4ee5\u91c7\u7528\u57fa\u4e8e mapping \u7684\u65b9\u6cd5\u83b7\u5f97\u57fa\u56e0\u7ec4\u3002  \u9996\u5148\u8981\u9009\u62e9\u53c2\u8003\u5e8f\u5217\uff0c\u7531\u4e8e\u75c5\u6bd2\u7f16\u8bd1\u5927\uff0c\u6211\u4eec\u4e00\u822c\u5c3d\u53ef\u80fd\u9009\u62e9\u8fd1\u6e90\u7684\u6bd2\u682a\u3002\u6211\u4e48\u90a3\u53ef\u4ee5\u91c7\u7528 denovo \u7684\u65b9\u6cd5\u5148\u83b7\u5f97\u4e00\u4e2a\u5927\u7247\u6bb5\u9ad8\u8986\u76d6\u7684\u975e\u6c61\u67d3\u5e8f\u5217\uff0c\u7136\u540e blast \u627e\u5230\u8fd1\u6e90\u6bd2\u682a\u57fa\u56e0\u7ec4\u5e8f\u5217\uff0c\u5c06\u5176\u4f5c\u4e3a\u53c2\u8003\u57fa\u56e0\u7ec4\u518d\u4f7f\u7528 mapping \u7684\u65b9\u6cd5\u83b7\u5f97\u6d4b\u5e8f\u6bd2\u682a\u7684\u57fa\u56e0\u7ec4\u3002",
            "title": "\u75c5\u6bd2\u57fa\u56e0\u7ec4\u7ec4\u88c5"
        },
        {
            "location": "/chapter_04/04_virus-assembly/#freebayes",
            "text": "$ spades.py\n$ blast\n$ bwa index ref.fasta\n$ bwa mem\n$ samtools index\n$ samtools\n$ freebayes",
            "title": "\u91c7\u7528 freebayes"
        },
        {
            "location": "/chapter_04/04_virus-assembly/#gatk4",
            "text": "$ trimmomatic # ID:  # PL: Platform \u6d4b\u5e8f\u5e73\u53f0\uff0c\u8fd9\u91cc\u6570\u636e\u6765\u81ea illumina \u5e73\u53f0  # PU:  # LB:  # SM: Sample \u6837\u672c\u540d\u79f0 \n$ bwa mem -t  40  -M -Y -R  \"@RG\\tID:S1\\tPL:illumina\\tPU:\\tLB:\\tSM:\"  ref.fasta  \\ \n>\n$ samtools sort -@  4  -m 16G -O bam -o .sorted.bam\n\n$ gatk MarkDuplicates -I -M -O\n$ samtools index sorted.markdup.bam\n$ gatk BaseRecalibrator -R ref.fasta -I sorted.markdup.bam  \\ \n> -O sorted.markdup.recal.table\n$ gatk ApplyBQSR --bqsr-recal-file sorted.markdup.recal.table -R ref.fasta\n> -I sorted.markdup.bam -O sorted.markdup.BQSR.bam\n$ samtools index\n$ gatk HaplotypeCaller -R ref.fasta -I sorted.markdup.BQSR.bam  \\ \n> -O HC.vcf.gz # SNP call \n$ gatk VariantRecalibrator # Indel call",
            "title": "\u91c7\u7528 GATK4"
        },
        {
            "location": "/chapter_04/04_virus-assembly/#snippy",
            "text": "",
            "title": "\u4f7f\u7528 snippy"
        },
        {
            "location": "/chapter_05/01_prokka/",
            "text": "Prokka\n\u00b6\n\n\nProkka\n \u662f\u4e00\u4e2a\u539f\u6838\u7269\u79cd\u57fa\u56e0\u7ec4\u6ce8\u91ca\u5de5\u5177\uff0c\u7531\u58a8\u5c14\u672c\u5927\u5b66\u751f\u7269\u4fe1\u606f\u5b66\u5bb6 \nTorsten Seemann\n \u5f00\u53d1\u7684\u57fa\u4e8e\u547d\u4ee4\u884c\u7684\u672c\u5730\u5feb\u901f\u6ce8\u91ca\u5de5\u5177\uff0c\u4e3b\u8981\u7528\u6765\u6ce8\u91ca\u5c0f\u57fa\u56e0\u7ec4\u6bd4\u5982\u7ec6\u83cc\u3001\u75c5\u6bd2\u7b49\u3002\n\n\n\u5b89\u88c5 \nProkka\n\u00b6\n\n\n1. \u7f16\u8bd1\u5305\u5b89\u88c5\n\u00b6\n\n\n\u5982\u679c\u4e0b\u8f7d\u9884\u7f16\u8bd1\u5305\u5b89\u88c5\u7684\u8bdd\uff0c\u9700\u8981\u6709Bioperl\u652f\u6301\u3002\u4ee5\u53ca\u4e00\u4e9b\u7b2c\u4e09\u65b9\u5e93\u548c\u8f6f\u4ef6\u7684\u652f\u6301\u3002\n\n\n\u5b89\u88c5 Bioperl\n\n\n$ sudo apt-get install cpanminus\n$ cpanm Bio::Perl XML::Simple\n\n\n\n\n\u5b89\u88c5\u5176\u4ed6\u4f9d\u8d56\n\n\n$ sudo apt-get install libdatetime-perl libxml-simple-perl libdigest-md5-perl git default-jre bioperl\n\n\n\n\n\u5b89\u88c5 rRNA \u6ce8\u91ca\u529f\u80fd\n\n\n\u8fd9\u91cc\u9009\u62e9 Barrnap \u548c MINCED\n\n\n$ wget http://www.vicbioinformatics.com/barrnap-0.6.tar.gz\n$ tar zxvf barrnap-0.5.tar.gz -C ~/app/\n$ \necho\n \n\"export PATH=\n$PATH\n:\n$HOME\n/app/barrnap-0.6/bin\"\n >> ~/.bashrc\n$ \nsource\n ~/.bashrc\n\n$ wget https://github.com/ctSkennerton/minced/releases/download/0.3.0/minced\n$ sudo cp minced /usr/local/sbin\n\n\n\n\n\u5b89\u88c5 ncRNA \u6ce8\u91ca\u529f\u80fd\n\n\n\u4f7f\u7528 infernal\n\n\n$ wget http://eddylab.org/infernal/infernal-1.1.2.tar.gz\n$ tar zxvf infernal-1.1.2.tar.gz -C ~/app/\n$ \necho\n \n\"export PATH=\n$PATH\n:\n$HOME\n/app/infernal-1.1.2\"\n\n\n\n\n\n\u5b89\u88c5 prokka\n\n\n$ wget http://www.vicbioinformatics.com/prokka-1.12.tar.gz\n$ tar zxvf prokka-1.12.tar.gz -C ~/app\n$ \necho\n \n\"export PATH=\n$PATH\n:\n$HOME\n/app/prokka-1.12/bin\"\n >> ~/.bashrc\n$ \nsource\n ~/.bashrc\n$ prokka --setupdb\n\n\n\n\n\u5982\u679c\u8981\u4f7f\u7528 --gram \u529f\u80fd\uff0c\u9700\u8981\u5b89\u88c5 \nsignalp\n\u3002\nsignalp\n \u662f \nDTU \u5927\u5b66\u751f\u7269\u53ca\u536b\u751f\u4fe1\u606f\u5b66\u7cfb\n\u5f00\u53d1\uff0c\u652f\u6301web\u754c\u9762\u7684\u5de5\u5177\u3002\u547d\u4ee4\u884c\u7248\u672c\u9700\u8981\u63d0\u4f9b\u975e\u5546\u4e1aISP\u63d0\u4f9b\u7684\u90ae\u7bb1\u5e10\u53f7\u6ce8\u518c\u4ee5\u540e\u624d\u80fd\u4e0b\u8f7d\uff08\u6bd4\u5982\u653f\u5e9c\u6216\u5927\u5b66\uff09\u3002\u70b9\u51fb\n\u8fd9\u91cc\n\u3002\n\n\n2. conda \u5b89\u88c5\n\u00b6\n\n\n$ conda create -n prokka\n$ conda activate prokka\n\n(\nprokka\n)\n$ conda install prokka\n\n\n\n\n\u4f7f\u7528 Prokka\n\u00b6\n\n\n\u8981\u60f3\u6ce8\u91cafasta\u6587\u4ef6\uff0c\u6700\u7b80\u5355\u7684\u65b9\u5f0f\uff0c\u4e0d\u586b\u52a0\u4efb\u4f55\u53c2\u6570\u5c31\u53ef\u4ee5\u83b7\u5f97\u3002\u6240\u6709\u7684\u7ed3\u679c\u4f1a\u653e\u5728\n\n\n# \u4e0b\u8f7d\u57fa\u56e0\u7ec4\u6570\u636e\n\n$ esearch -db nuccore -query \n\"1639[txid] AND egd\"\n \n|\n efetch -format fasta > egd.fasta\n\n\n# \u6ce8\u91ca\u6570\u636e\n\n$ prokka egd.fasta\n\n\n\n\n\u901a\u8fc7\u6dfb\u52a0\n--listdb\n\u53ef\u4ee5\u67e5\u770b\u6570\u636e\u5e93\u4fe1\u606f\u3002\n\n\n# \u67e5\u770b\u53ef\u4ee5\u4f7f\u7528\u7684\u6570\u636e\u5e93\n\n$ prokka --listdb\n\nLooking \nfor\n databases in: ...\n* Kingdoms: Archaea Bacteria Mitochondria Viruses\n* Genera: Enterococcus Escherichia Staphylococcus\n* HMMs: HAMAP\n* CMs: Bacteria Viruses\n\n\n\n\n\u5982\u679c\u9700\u8981\u6bd4\u8f83\u5b8c\u6574\u7684\u8fdb\u884c\u5e8f\u5217\u6ce8\u91ca\uff0c\u7ed3\u679c\u53ef\u4ee5\u6bd4\u8f83\u65b9\u4fbf\u7684\u7528\u6765\u63d0\u4ea4\u7684\u8bdd\uff0c\u53ef\u4ee5\u6dfb\u52a0\u76f8\u5e94\u7684\u53c2\u6570\u6765\u89c4\u8303\u6ce8\u91ca\u4ee5\u53ca\u8c03\u7528\u4e0d\u540c\u7684\u5de5\u5177\u626b\u63cfncRNA\u7b49\u3002\n\n\n# \u6ce8\u91ca Listeria monocytogenes \u6807\u51c6\u682a egd\n\n$ prokka --outdir egd --prefix egd --addgenes --addmrna --compliant --centre CDC --genus Listeria --species \n\"Listeria monocytogenes\"\n --strain egd\n--kingdom Bacteria --usegenus --cpus \n4\n --rfam --rnammer --force egd.fasta\n\n\n# \u751f\u6210\u7ed3\u679c\u6ce8\u91ca\u6587\u4ef6\n\n$ ls -l egd \n|\n awk \n'{print $9}'\n\n\negd.err     \n# prokka \u5bf9\u6ce8\u91ca\u7ed3\u679c\u5b58\u5728\u7684\u4e00\u4e9b\u7591\u95ee\u8fdb\u884c\u62a5\u544a\u7684\u4fe1\u606f\n\negd.faa     \n# \u6ce8\u91ca\u7684\u6c28\u57fa\u9178\u5e8f\u5217\n\negd.ffn     \n# \u6ce8\u91ca\u7684\u78b1\u57fa\u5e8f\u5217\n\negd.fna     \n# \u4ee5 NCBI gnl|centre| \u4e3aID\u547d\u540d\u7684\u78b1\u57fa\u5e8f\u5217\u6587\u4ef6\n\negd.fsa     \n# \u4ee5 NCBI gnl|centre| \u4e3aID\u547d\u540d\u7684\u78b1\u57fa\u5e8f\u5217\u6587\u4ef6\n\negd.gbk     \n# genbank \u683c\u5f0f\u7684\u6ce8\u91ca\u6587\u4ef6\n\negd.gff     \n# gff \u683c\u5f0f\u7684\u6ce8\u91ca\u6587\u4ef6\n\negd.log     \n# prokka \u8fd0\u884c\u65e5\u5fd7\n\negd.sqn     \n# sqn \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u6765\u63d0\u4ea4\u5230 NCBI\n\negd.tbl     \n# tbl \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u6765\u63d0\u4ea4\u5230 NCBI\n\negd.tsv     \n# tsv \u683c\u5f0f\u6587\u4ef6\uff0c\n\negd.txt     \n# prokka \u6ce8\u91ca\u7684\u5404\u79cd\u7c7b\u578b\u5e8f\u5217\u7edf\u8ba1\u4fe1\u606f\n\n\n\n\n\n--kingdom\n\n\n\u9ed8\u8ba4\u6ce8\u91ca\u7684\u662f\u7ec6\u83cc\u57fa\u56e0\u7ec4\uff0c\u5982\u679c\u662f\u5176\u4ed6\u7269\u79cd\u5219\u8981\u6dfb\u52a0\u8fd9\u4e2a\u53c2\u6570\u3002\u53ef\u9009\u9879\u6709\uff1a\n\n\n\n\nArchaea\n\n\nBacteria\n\n\nMitochondria\n\n\nViruses\n\n\n\n\n\u6bd4\u5982\u8981\u6ce8\u91ca\u75c5\u6bd2\u57fa\u56e0\u7ec4\uff1a\n\n\n$ prokka --kingdom Viruses contigs.fasta\n\n\n\n\n.err \u6587\u4ef6\n\u00b6\n\n\n.tsv \u6587\u4ef6\n\u00b6\n\n\ntsv \u6587\u4ef6\u6309\u7167 locus_tag \u987a\u5e8f\u6392\u5e8f\u4e86\u6ce8\u91ca\u7684\u7ed3\u679c\u3002\u5b57\u6bb5\u5305\u62ec\nlocus_tag\n, \nftype\n, \nlength_bp\n, \ngene\n, \nEC_number\n, \nCOG\n, \nproduct\n\u3002\n\n\n$ head egd.tsv\nlocus_tag       ftype   length_bp       gene    EC_number       COG     product\nDJECODEN_00001  CDS     \n1356\n    dnaA            COG0593 Chromosomal replication initiator protein DnaA\nDJECODEN_00001  gene    \n1356\n    dnaA\nDJECODEN_00001  mRNA    \n1356\n    dnaA\nDJECODEN_00002  CDS     \n1146\n    dnaN            COG0592 Beta sliding clamp\nDJECODEN_00002  gene    \n1146\n    dnaN\nDJECODEN_00002  mRNA    \n1146\n    dnaN\nDJECODEN_00003  CDS     \n1344\n    yeeO_1          COG0534 putative FMN/FAD exporter YeeO\nDJECODEN_00003  gene    \n1344\n    yeeO_1\nDJECODEN_00003  mRNA    \n1344\n    yeeO_1\n\n\n\n\n# \u6ce8\u91caCDS\u957f\u5ea6\u6392\u5e8f\n\n$ awk \n'/CDS/ {print $0}'\n egd.tsv \n|\n sort -n -k3 -r \n|\n less\n\n\n# \u663e\u793a\u6240\u6709\u7684\u4e0d\u91cd\u590d\u6ce8\u91ca\u4ea7\u7269\n\n$ awk \n'!a[$1]++{print}'\n egd.tsv\n\n\n# \u663e\u793a\u6240\u6709COG\u6ce8\u91ca\n\n$ awk \n'/COG/'\n egd.tsv",
            "title": "01. Prokka \u5feb\u901f\u6ce8\u91ca"
        },
        {
            "location": "/chapter_05/01_prokka/#prokka",
            "text": "Prokka  \u662f\u4e00\u4e2a\u539f\u6838\u7269\u79cd\u57fa\u56e0\u7ec4\u6ce8\u91ca\u5de5\u5177\uff0c\u7531\u58a8\u5c14\u672c\u5927\u5b66\u751f\u7269\u4fe1\u606f\u5b66\u5bb6  Torsten Seemann  \u5f00\u53d1\u7684\u57fa\u4e8e\u547d\u4ee4\u884c\u7684\u672c\u5730\u5feb\u901f\u6ce8\u91ca\u5de5\u5177\uff0c\u4e3b\u8981\u7528\u6765\u6ce8\u91ca\u5c0f\u57fa\u56e0\u7ec4\u6bd4\u5982\u7ec6\u83cc\u3001\u75c5\u6bd2\u7b49\u3002",
            "title": "Prokka"
        },
        {
            "location": "/chapter_05/01_prokka/#prokka_1",
            "text": "",
            "title": "\u5b89\u88c5 Prokka"
        },
        {
            "location": "/chapter_05/01_prokka/#1",
            "text": "\u5982\u679c\u4e0b\u8f7d\u9884\u7f16\u8bd1\u5305\u5b89\u88c5\u7684\u8bdd\uff0c\u9700\u8981\u6709Bioperl\u652f\u6301\u3002\u4ee5\u53ca\u4e00\u4e9b\u7b2c\u4e09\u65b9\u5e93\u548c\u8f6f\u4ef6\u7684\u652f\u6301\u3002  \u5b89\u88c5 Bioperl  $ sudo apt-get install cpanminus\n$ cpanm Bio::Perl XML::Simple  \u5b89\u88c5\u5176\u4ed6\u4f9d\u8d56  $ sudo apt-get install libdatetime-perl libxml-simple-perl libdigest-md5-perl git default-jre bioperl  \u5b89\u88c5 rRNA \u6ce8\u91ca\u529f\u80fd  \u8fd9\u91cc\u9009\u62e9 Barrnap \u548c MINCED  $ wget http://www.vicbioinformatics.com/barrnap-0.6.tar.gz\n$ tar zxvf barrnap-0.5.tar.gz -C ~/app/\n$  echo   \"export PATH= $PATH : $HOME /app/barrnap-0.6/bin\"  >> ~/.bashrc\n$  source  ~/.bashrc\n\n$ wget https://github.com/ctSkennerton/minced/releases/download/0.3.0/minced\n$ sudo cp minced /usr/local/sbin  \u5b89\u88c5 ncRNA \u6ce8\u91ca\u529f\u80fd  \u4f7f\u7528 infernal  $ wget http://eddylab.org/infernal/infernal-1.1.2.tar.gz\n$ tar zxvf infernal-1.1.2.tar.gz -C ~/app/\n$  echo   \"export PATH= $PATH : $HOME /app/infernal-1.1.2\"   \u5b89\u88c5 prokka  $ wget http://www.vicbioinformatics.com/prokka-1.12.tar.gz\n$ tar zxvf prokka-1.12.tar.gz -C ~/app\n$  echo   \"export PATH= $PATH : $HOME /app/prokka-1.12/bin\"  >> ~/.bashrc\n$  source  ~/.bashrc\n$ prokka --setupdb  \u5982\u679c\u8981\u4f7f\u7528 --gram \u529f\u80fd\uff0c\u9700\u8981\u5b89\u88c5  signalp \u3002 signalp  \u662f  DTU \u5927\u5b66\u751f\u7269\u53ca\u536b\u751f\u4fe1\u606f\u5b66\u7cfb \u5f00\u53d1\uff0c\u652f\u6301web\u754c\u9762\u7684\u5de5\u5177\u3002\u547d\u4ee4\u884c\u7248\u672c\u9700\u8981\u63d0\u4f9b\u975e\u5546\u4e1aISP\u63d0\u4f9b\u7684\u90ae\u7bb1\u5e10\u53f7\u6ce8\u518c\u4ee5\u540e\u624d\u80fd\u4e0b\u8f7d\uff08\u6bd4\u5982\u653f\u5e9c\u6216\u5927\u5b66\uff09\u3002\u70b9\u51fb \u8fd9\u91cc \u3002",
            "title": "1. \u7f16\u8bd1\u5305\u5b89\u88c5"
        },
        {
            "location": "/chapter_05/01_prokka/#2-conda",
            "text": "$ conda create -n prokka\n$ conda activate prokka ( prokka ) $ conda install prokka",
            "title": "2. conda \u5b89\u88c5"
        },
        {
            "location": "/chapter_05/01_prokka/#prokka_2",
            "text": "\u8981\u60f3\u6ce8\u91cafasta\u6587\u4ef6\uff0c\u6700\u7b80\u5355\u7684\u65b9\u5f0f\uff0c\u4e0d\u586b\u52a0\u4efb\u4f55\u53c2\u6570\u5c31\u53ef\u4ee5\u83b7\u5f97\u3002\u6240\u6709\u7684\u7ed3\u679c\u4f1a\u653e\u5728  # \u4e0b\u8f7d\u57fa\u56e0\u7ec4\u6570\u636e \n$ esearch -db nuccore -query  \"1639[txid] AND egd\"   |  efetch -format fasta > egd.fasta # \u6ce8\u91ca\u6570\u636e \n$ prokka egd.fasta  \u901a\u8fc7\u6dfb\u52a0 --listdb \u53ef\u4ee5\u67e5\u770b\u6570\u636e\u5e93\u4fe1\u606f\u3002  # \u67e5\u770b\u53ef\u4ee5\u4f7f\u7528\u7684\u6570\u636e\u5e93 \n$ prokka --listdb\n\nLooking  for  databases in: ...\n* Kingdoms: Archaea Bacteria Mitochondria Viruses\n* Genera: Enterococcus Escherichia Staphylococcus\n* HMMs: HAMAP\n* CMs: Bacteria Viruses  \u5982\u679c\u9700\u8981\u6bd4\u8f83\u5b8c\u6574\u7684\u8fdb\u884c\u5e8f\u5217\u6ce8\u91ca\uff0c\u7ed3\u679c\u53ef\u4ee5\u6bd4\u8f83\u65b9\u4fbf\u7684\u7528\u6765\u63d0\u4ea4\u7684\u8bdd\uff0c\u53ef\u4ee5\u6dfb\u52a0\u76f8\u5e94\u7684\u53c2\u6570\u6765\u89c4\u8303\u6ce8\u91ca\u4ee5\u53ca\u8c03\u7528\u4e0d\u540c\u7684\u5de5\u5177\u626b\u63cfncRNA\u7b49\u3002  # \u6ce8\u91ca Listeria monocytogenes \u6807\u51c6\u682a egd \n$ prokka --outdir egd --prefix egd --addgenes --addmrna --compliant --centre CDC --genus Listeria --species  \"Listeria monocytogenes\"  --strain egd\n--kingdom Bacteria --usegenus --cpus  4  --rfam --rnammer --force egd.fasta # \u751f\u6210\u7ed3\u679c\u6ce8\u91ca\u6587\u4ef6 \n$ ls -l egd  |  awk  '{print $9}' \n\negd.err      # prokka \u5bf9\u6ce8\u91ca\u7ed3\u679c\u5b58\u5728\u7684\u4e00\u4e9b\u7591\u95ee\u8fdb\u884c\u62a5\u544a\u7684\u4fe1\u606f \negd.faa      # \u6ce8\u91ca\u7684\u6c28\u57fa\u9178\u5e8f\u5217 \negd.ffn      # \u6ce8\u91ca\u7684\u78b1\u57fa\u5e8f\u5217 \negd.fna      # \u4ee5 NCBI gnl|centre| \u4e3aID\u547d\u540d\u7684\u78b1\u57fa\u5e8f\u5217\u6587\u4ef6 \negd.fsa      # \u4ee5 NCBI gnl|centre| \u4e3aID\u547d\u540d\u7684\u78b1\u57fa\u5e8f\u5217\u6587\u4ef6 \negd.gbk      # genbank \u683c\u5f0f\u7684\u6ce8\u91ca\u6587\u4ef6 \negd.gff      # gff \u683c\u5f0f\u7684\u6ce8\u91ca\u6587\u4ef6 \negd.log      # prokka \u8fd0\u884c\u65e5\u5fd7 \negd.sqn      # sqn \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u6765\u63d0\u4ea4\u5230 NCBI \negd.tbl      # tbl \u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u7528\u6765\u63d0\u4ea4\u5230 NCBI \negd.tsv      # tsv \u683c\u5f0f\u6587\u4ef6\uff0c \negd.txt      # prokka \u6ce8\u91ca\u7684\u5404\u79cd\u7c7b\u578b\u5e8f\u5217\u7edf\u8ba1\u4fe1\u606f   --kingdom  \u9ed8\u8ba4\u6ce8\u91ca\u7684\u662f\u7ec6\u83cc\u57fa\u56e0\u7ec4\uff0c\u5982\u679c\u662f\u5176\u4ed6\u7269\u79cd\u5219\u8981\u6dfb\u52a0\u8fd9\u4e2a\u53c2\u6570\u3002\u53ef\u9009\u9879\u6709\uff1a   Archaea  Bacteria  Mitochondria  Viruses   \u6bd4\u5982\u8981\u6ce8\u91ca\u75c5\u6bd2\u57fa\u56e0\u7ec4\uff1a  $ prokka --kingdom Viruses contigs.fasta",
            "title": "\u4f7f\u7528 Prokka"
        },
        {
            "location": "/chapter_05/01_prokka/#err",
            "text": "",
            "title": ".err \u6587\u4ef6"
        },
        {
            "location": "/chapter_05/01_prokka/#tsv",
            "text": "tsv \u6587\u4ef6\u6309\u7167 locus_tag \u987a\u5e8f\u6392\u5e8f\u4e86\u6ce8\u91ca\u7684\u7ed3\u679c\u3002\u5b57\u6bb5\u5305\u62ec locus_tag ,  ftype ,  length_bp ,  gene ,  EC_number ,  COG ,  product \u3002  $ head egd.tsv\nlocus_tag       ftype   length_bp       gene    EC_number       COG     product\nDJECODEN_00001  CDS      1356     dnaA            COG0593 Chromosomal replication initiator protein DnaA\nDJECODEN_00001  gene     1356     dnaA\nDJECODEN_00001  mRNA     1356     dnaA\nDJECODEN_00002  CDS      1146     dnaN            COG0592 Beta sliding clamp\nDJECODEN_00002  gene     1146     dnaN\nDJECODEN_00002  mRNA     1146     dnaN\nDJECODEN_00003  CDS      1344     yeeO_1          COG0534 putative FMN/FAD exporter YeeO\nDJECODEN_00003  gene     1344     yeeO_1\nDJECODEN_00003  mRNA     1344     yeeO_1  # \u6ce8\u91caCDS\u957f\u5ea6\u6392\u5e8f \n$ awk  '/CDS/ {print $0}'  egd.tsv  |  sort -n -k3 -r  |  less # \u663e\u793a\u6240\u6709\u7684\u4e0d\u91cd\u590d\u6ce8\u91ca\u4ea7\u7269 \n$ awk  '!a[$1]++{print}'  egd.tsv # \u663e\u793a\u6240\u6709COG\u6ce8\u91ca \n$ awk  '/COG/'  egd.tsv",
            "title": ".tsv \u6587\u4ef6"
        },
        {
            "location": "/chapter_05/02_rast/",
            "text": "",
            "title": "02. rast"
        },
        {
            "location": "/chapter_05/03_PGAAP/",
            "text": "PGAAP\n\u00b6\n\n\nhttp://www.ncbi.nlm.nih.gov/genome/annotation_prok/\n\n\nhttp://www.ncbi.nlm.nih.gov/books/NBK174280/",
            "title": "03. PGAAP"
        },
        {
            "location": "/chapter_05/03_PGAAP/#pgaap",
            "text": "http://www.ncbi.nlm.nih.gov/genome/annotation_prok/  http://www.ncbi.nlm.nih.gov/books/NBK174280/",
            "title": "PGAAP"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/",
            "text": "\u6848\u4f8b\u5206\u6790\u4e00: \u94dc\u7eff\u5047\u5355\u80de\u83cc\u4e34\u5e8a\u682a\u4e0e\u73af\u5883\u682aSNP\u6eaf\u6e90\n\u00b6\n\n\n\n\n\u672c\u8282\u5b9e\u8df5\n\n\n\u5229\u7528\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5bf9\u94dc\u7eff\u5047\u5355\u80de\u83cc\u7684\u4e34\u5e8a\u5206\u79bb\u682a\u4e0e\u73af\u5883\u5206\u79bb\u682a\u5728\u57fa\u56e0\u7ec4\u6c34\u5e73\u4e0a\u8fdb\u884cSNP\u5206\u6790\uff0c\u4ece\u800c\u6eaf\u6e90\u83cc\u682a\u5e76\u505a\u8010\u836f\u5206\u6790\u3002\n\n\n\n\n\u5206\u6790\u65b9\u6cd5\n\uff1a\n\n\n\u5229\u7528 bwa \u5c06\u76ee\u6807\u57fa\u56e0\u7ec4 reads \u6bd4\u5bf9\u5230\u53c2\u8003\u57fa\u56e0\u7ec4\uff0c\u7528 freebayes \u505a variant calling\uff0c\u83b7\u5f97\u5404\u4e2a\u6837\u672c\u7684 SNPs\uff0c\u6839\u636e\u7ed3\u679c\u505a\u8fdb\u4e00\u6b65\u5206\u6790\u3002\n\n\n\u5e94\u7528\u5de5\u5177\n:\n\n\n\n\nbwa\n\n\nsamtools\n\n\nfreebayes\n\n\nvcffilter\n\n\n\n\n\u5206\u6790\u6d41\u7a0b\n:\n\n\n\u5b9e\u8df5\u610f\u4e49\n\uff1a\n\n\n\u53ef\u4ee5\u4f5c\u4e3a\u4eca\u540e\u5b9e\u9a8c\u5ba4\u5f00\u5c55\u75c5\u539f\u83cc\u6eaf\u6e90\u5de5\u4f5c\u7684\u4e00\u4e2a\u6280\u672f\u6307\u5bfc\u4f9d\u636e\u3002\n\n\n1. \u63d0\u51fa\u95ee\u9898\n\u00b6\n\n\n\u5de5\u4f5c\u6d41\u7a0b\u5c06\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u5bf9\u4e8e\u8fd9\u4e2a\u6848\u4f8b\u5f00\u5c55\u6570\u636e\u5206\u6790\uff1a\n\n\n\n\n\u6d4b\u5e8f\u8d28\u91cf\uff1areads\u7684\u957f\u5ea6\uff0c\u63d2\u5165\u7247\u6bb5\u7684\u957f\u5ea6\n\n\n\u5c06\u6d4b\u5e8f\u6570\u636e\u6bd4\u5bf9\u5230\u53c2\u8003\u57fa\u56e0\u7ec4ST17\n\n\n\u6bcf\u4e2a\u6837\u54c1reads\u7684\u5206\u5e03\u60c5\u51b5\n\n\n\u6bcf\u4e2a\u6837\u54c1\u7684\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u8986\u76d6\u5ea6\n\n\n\u4e0d\u540c\u6837\u54c1\u4e4b\u95f4\u7684\u5dee\u5f02\uff0c\u7279\u522b\u662f\u5f53\u8bbe\u7f6e\u4e0d\u540c\u7684\u8fc7\u6ee4\u53c2\u6570\u65f6\u7684\u60c5\u51b5\uff1a\n         - Quality filter: QUAL > 100\n         - Likelihood filter: QUAL / AO > 10\n         - Variant frequency filter: AO / DP > 0.9 (90% allele frequency)\n\n\n\u54ea\u4e00\u4e2a\u6c34\u9f99\u5934\u6c34\u6837\u7684\u5206\u79bb\u682a\u6700\u6709\u53ef\u80fd\u662f\u611f\u67d3\u6e90\u3002(\u65b9\u6cd5: \u7528\nvcfsamplediff\n\u6bd4\u8f83\u73af\u5883\u682a\u4e0e\u4e34\u5e8a\u682aSNPs\u6570\u91cf)\n\n\n2\u4e2a\u75c5\u4eba\u5206\u79bb\u682a\u4e4b\u95f4\u4f7f\u7528\u4e86\u5927\u91cf\u7684\u6297\u751f\u7d20\u6cbb\u7597\uff0c\u54ea\u4e00\u4e2a\u83b7\u5f97\u3001\u5f97\u4e86\u8010\u836f\u6027\uff1f\n\n\n\u7528 joint calling \u6765\u6bd4\u8f832\u4e2a\u4e34\u5e8a\u6837\u54c1\u6570\u636e\uff0c\u5e76\u7528\nvcfsamplediff\n\u5206\u6790\n\n\n\u5bf9\u4e8e\u83b7\u5f97\u7684\u5927\u91cfSNPs\uff0c\u662f\u5426\u9700\u8981\u8fc7\u6ee4\u4ee5\u53ca\u5982\u4f55\u8fc7\u6ee4\n\n\n\u4e86\u89e3SNPs\u7684\u5206\u5e03\u89c4\u5f8b\n\n\n\u91cd\u70b9\u67e5\u770bSNPs\n\n\n\n\n2. \u5206\u6790\u6d41\u7a0b\n\u00b6\n\n\n2.1 \u4e0b\u8f7d\u6570\u636e\n\u00b6\n\n\n\u6570\u636e\u53ef\u4ee5\u4ece\n\u8fd9\u91cc\n\u4e0b\u8f7d\u83b7\u5f97\uff0c\u53ef\u4ee5\u7528\nwget -m\n\u9012\u5f52\u4e0b\u8f7d\u8def\u5f84\u4e0b\u6240\u6709\u6587\u4ef6\u3002\u6587\u4ef6\u5305\u62ec\uff1a\n\n\n\n\nTAP1 - \u75c5\u623f1\u53f7\u6c34\u9f99\u5934\u6c34\u6837\u4e2d\u5206\u79bb\u7684\u83cc\u682a\n\n\nTAP2 - \u75c5\u623f2\u53f7\u6c34\u9f99\u5934\u6c34\u6837\u4e2d\u5206\u79bb\u7684\u83cc\u682a\n\n\nTAP3 - \u75c5\u623f3\u53f7\u6c34\u9f99\u5934\u6c34\u6837\u4e2d\u5206\u79bb\u7684\u83cc\u682a\n\n\nPATIENT1 - \u670d\u7528\u6297\u751f\u7d20\u540e\u7684\u75c5\u4eba\u5206\u79bb\u682a\n\n\nPATIENT2 - \u4e00\u5468\u5185\u8fdb\u4e00\u6b65\u670d\u7528\u6297\u751f\u7d20\u7684\u75c5\u4eba\u5206\u79bb\u682a\n\n\n\n\n~$ mkdir -p pse_data && cd pse_data\n~$ wget -m http://www.microbesng.uk/filedist/pseudomonas-practical/\n~$ mv www.microbesng.uk/filedist/pseudomonas-practical/* .\n\n\n\n\n2.2 \u5efa\u7acb ST17 \u578b\u53c2\u8003\u83cc\u682a\u7d22\u5f15\n\u00b6\n\n\n\u8f6f\u4ef6\u4f7f\u7528\nbwa\n\u6765\u5bf9\u53c2\u8003\u57fa\u56e0\u7ec4ST17\u5efa\u7acb\u7d22\u5f15\uff0c\u4ee5\u4fbf\u540e\u7eed\u6bd4\u5bf9\u3002\n\n\n~$ bwa index ST17.fasta\n\n\n\n\n2.3 \u5c06\u6d4b\u5e8f reads \u6bd4\u5bf9\u5230 ST17 \u5e76\u6392\u5e8f\u7d22\u5f15\n\u00b6\n\n\n\u7528\nbwa mem\n\u8fdb\u884c\u6bd4\u5bf9\uff0c\u8f93\u51fa\u7684\u7ed3\u679c\u901a\u8fc7\u7ba1\u9053\u7531samtools\u8f6c\u6362\u6210BAM\u6587\u4ef6\u5e76\u8fdb\u884c\u6392\u5e8f\u548c\u7d22\u5f15\n\n\n~$ bwa mem -t 4 -R '@RG\\tID:TAP1\\tSM:TAP1' ST17.fasta \\\n> TAP1_R1_paired.fastq.gz TAP1_R2_paired.fastq.gz | \\\n> samtools view -bS - | samtools sort - TAP1.sorted\n~$ samtools index TAP1.sorted.bam\n\n\n\n\n\n\n\u53c2\u6570\u4ecb\u7ecd\n\n\n\n\n-t 4: \u8868\u793a\u4f7f\u75284\u7ebf\u7a0b\uff0c\u6839\u636e\u81ea\u5df1\u7684\u8ba1\u7b97\u673aCPU\u8d44\u6e90\u8bbe\u7f6e\u3002\n\n\n-R '...': \u8bbe\u7f6ereads\u7684ID\uff0c\\t\u4e3a\u5236\u8868\u7b26\u4f1a\u8f6c\u4e49\u6210tab\u952e\u3002\n\n\n\n\n\n\n\u5bf9\u5176\u4ed62\u682a\u73af\u5883\u682a\u548c2\u682a\u4e34\u5e8a\u682a\u91cd\u590d\u4ee5\u4e0a\u6b65\u9aa4\u3002\n\n\n2.4 \u7ed8\u5236\u6d4b\u5e8f reads \u7684\u8986\u76d6\u5ea6\n\u00b6\n\n\nbam\u6587\u4ef6\u542b\u6709\u6bd4\u5bf9\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u7528\nstats\n\u53c2\u6570\u67e5\u770b\n\n\n~$ samtools stats TAP1.sorted.bam | grep \"maximum length\"\n~$ samtools stats TAP1.sorted.bam | grep \"insert size\"\n~$ samtools stats TAP1.sorted.bam | grep \"^COV\" > TAP1.coverage.txt\n\n\n\n\n\u5c06\u622a\u53d6\u7684\u8986\u76d6\u5ea6\u76f8\u5173\u4fe1\u606f\u4fdd\u5b58\u6210\n.txt\n\u6587\u4ef6\uff0c\u5728R\u91cc\u7528ggplot2\u7ed8\u5236\u8986\u76d6\u5ea6\u56fe\uff1a\n\n\n>\n \nlibrary\n(\nggplot2\n)\n\n\n>\n cov\n=\nread.table\n(\n\"TAP1.coverage.txt\"\n,\n sep\n=\n\"\\t\"\n)\n\n\n>\n cov\n[\n1\n,]\n\n\n>\n ggplot\n(\ncov\n,\n aes\n(\nx\n=\nV3\n,\n y\n=\nV4\n))\n \n+\n geom_bar\n(\nstat\n=\n\"identity\"\n)\n \n+\n xlab\n(\n\"Coverage\"\n)\n \n+\n ylab\n(\n\"Count\"\n)\n\n\n\n\n\n\n\n2.5 \u6bd4\u8f831\u53f7\u4e34\u5e8a\u682a\u4e0e\u73af\u5883\u682a\u7684SNPs\u5dee\u5f02\n\u00b6\n\n\n\u7528\u540c\u6837\u7684\u65b9\u6cd5\u5bf9\u5176\u4ed6\u51e0\u4e2a\u6837\u672c\u8fdb\u884c\u64cd\u4f5c\uff0c\u83b7\u5f97sorted\u7684bam\u683c\u5f0f\u6587\u4ef6\uff0c\u7528\nfreebayes\n\u5bf9\u4e34\u5e8a\u4e0e\u73af\u5883\u682a\u6bd4\u8f83\u83b7\u5f97vcf\u6587\u4ef6\u3002\u7136\u540e\u7528vcflib\u5de5\u5177\u8fc7\u6ee4\nQUAL/AO>10\n\u7684\u90e8\u5206(VCF\u5143\u6570\u636e\u90e8\u5206\u53ef\u4ee5\u53c2\u8003\n\u6587\u6863\n)\uff0c\u5e76\u7528\nwc-l\n\u8ba1\u7b97\u884c\u6570\u7edf\u8ba1\u7ed3\u679c\u3002\n\n\n~$ freebayes -p 1 -C 5 -f ST17.fasta TAP1.sorted.bam PATIENT1.sorted.bam  > compare_tap1.vcf\n~$ vcffilter -f \"QUAL / AO > 10\" compare_tap1.vcf | vcffilter -f \"NS = 2\" | wc -l\n\n6685\n\n\n\n\n\u83b7\u5f97\u4e34\u5e8a\u682a\u4e0e\u73af\u5883\u682a\u4e4b\u95f4\u7684SNP\u5dee\u5f02\u6570\u91cf\uff0c\u7ed3\u679c\u8868\u660e\u8fd92\u682a\u4e4b\u95f4\u53ea\u67095\u4e2aSNPs\u3002\n\n\n~$ vcfsamplediff SAME TAP1 PATIENT1 compare_tap1.vcf | vcffilter -f \"QUAL / AO > 10\" | vcffilter -f \"NS = 2\" | vcffilter -f \"! ( SAME = germline ) \" | grep -v \"^#\" | wc -l\n\n5\n\n\n\n\n\u7528\nvcfsamplediff\n\u4e86\u89e3SNPs\u5dee\u5f02\u7684\u57fa\u56e0\uff0c\u53ef\u4ee5\u77e5\u9053\u662f\u90a3\u4e9bgene/CDS\u91cc\u9762\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u8fd8\u53ef\u4ee5\u6839\u636e\u5b9a\u4f4d\u770b\u7a81\u53d8\u662f\u5426\u662f\u540c\u4e49\u7a81\u53d8\u3002\u5982\u679csnps\u6570\u91cf\u63a5\u8fd1\u65e0\u6cd5\u533a\u5206\uff0c\u4f46\u662f\u5b9a\u4f4d\u7684\u57fa\u56e0\u6709\u5dee\u5f02\uff0c\u90a3\u4e48\u83cc\u682a\u7684\u6eaf\u6e90\u8fd8\u9700\u8981\u8fdb\u4e00\u6b65\u8003\u8651\u3002\n\n\n~$ vcfsamplediff SAME PATIENT1 TAP1 compare_tap1.vcf  | vcffilter -f \"QUAL / AO > 10\" | vcffilter -f \"NS = 2\" | vcffilter -f \"! ( SAME = germline ) \" > tap_differences.vcf\n~$ bedtools intersect -a ST17.gff -b tap_differences.vcf | awk -F\";\" '{print NR, $2}' OFS=\"\\t\"\n\n\n\n\n\u7ed3\u679c\u8f93\u51fa\uff1a\n\n\n1   gene=yfiR\n2   inference=ab initio prediction:Prodigal:2.60,similar to AA sequence:RefSeq:YP_261793.1,protein motif:TIGRFAMs:TIGR03756,protein motif:Pfam:PF06834.5\n3   inference=ab initio prediction:Prodigal:2.60,similar to AA sequence:RefSeq:YP_261793.1,protein motif:TIGRFAMs:TIGR03756,protein motif:Pfam:PF06834.5\n4   gene=trbL\n5   inference=ab initio prediction:Prodigal:2.60,similar to AA sequence:RefSeq:YP_001349879.1,protein motif:Cdd:COG3481,protein motif:TIGRFAMs:TIGR03760,protein motif:Pfam:PF07514.5\n\n\n\n\n2.6 2\u4e2a\u4e34\u5e8a\u682a\u7684\u8010\u836f\u53d8\u8fc1\n\u00b6\n\n\n\u4e86\u89e32\u4e2a\u4e34\u5e8a\u682a\u7684SNPs\u5dee\u5f02\uff0c\u5e76\u67e5\u770b\u8fd9\u4e9bSNPs\u6240\u5f71\u54cd\u7684gene\n\n\n~$ freebayes --ploidy 1 -C 5 -f ST17.fasta PATIENT1.sorted.bam PATIENT2.sorted.bam > compare_patient.vcf\n~$ vcfsamplediff SAME PATIENT1 TAP1 compare_patient.vcf  | vcffilter -f \"QUAL / AO > 10\" | vcffilter -f \"NS = 2\" | vcffilter -f \"! ( SAME = germline ) \" > patient_differences.vcf\n~$ bedtools intersect -a ST17.gff -b patient_differences.vcf | awk -F\";\" '{print $2}'\n\n\n\n\n\n\n3. \u7528 Snippy \u6765\u5b9e\u73b0\n\u00b6\n\n\n\u5927\u91cf\u7684\u65e5\u5e38\u5de5\u4f5c\u6216\u8005\u4e0d\u719f\u6089\u5404\u79cd\u547d\u4ee4\u884c\u5de5\u5177\u4f7f\u7528\u7684\u8bdd\uff0c\u5c31\u9700\u8981\u66f4\u7b80\u4fbf\u7684\u8f6f\u4ef6\u6216\u8005pipelines\u6765\u5e2e\u52a9\u5b8c\u6210\u6574\u4e2a\u5206\u6790\u5de5\u4f5c\u3002\u56e0\u6b64\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528\nsnippy\n\u6765\u5b9e\u73b0\u5206\u6790SNPs\uff0c\u5e76\u7ed8\u5236\u57fa\u4e8esnps\u7684\u8fdb\u5316\u6811\u3002\n\n\n3.1 \u5b89\u88c5 Snippy\n\u00b6\n\n\nSnippy\u662f\u6bd4\u8f83\u9002\u5408\u65b0\u624b\u7684\u5de5\u5177\uff0c\u5b83\u63d0\u4f9b\u4e86All in One\u7684\u5de5\u5177\u5957\u88c5\u3002\u867d\u7136Snippy\u9700\u8981\u4ee5\u4e0b\u8f6f\u4ef6\u652f\u6301\uff1a\n\n\n\n\nPerl >= 5.6\n\n\nBioPerl >= 1.6\n\n\nbwa mem >= 0.7.12\n\n\nsamtools >= 1.1\n\n\nGNU parallel > 2013xxxx\n\n\nfreebayes >= 0.9.20\n\n\nfreebayes sripts ( freebayes-parallel,fasta_generate_regions.py)\n\n\nvcflib (vcffilter, vcfstreamsort, vcfuniq, vcffirstheader)\n\n\nvcftools (vcf-consensus)\n\n\nsnpEff >= 4.1\n\n\n\n\n\u4f46\u8fd9\u4e9b\u5de5\u5177\u5728Snippy\u5b89\u88c5\u5305\u91cc\u90fd\u5df2\u7ecf\u63d0\u4f9b\u4e86\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6839\u636e\u81ea\u5df1\u7684\u7cfb\u7edf\u8bbe\u7f6e\u5c06\u4ee5\u6765\u5de5\u5177\u6dfb\u52a0\u5230\u7cfb\u7edf\u8def\u5f84\u4e2d\u53bb\u5373\u53ef\u3002\u5bf9\u4e8eperl\u7684\u4e00\u4e9b\u6a21\u5757\uff0c\u53ef\u80fd\u9700\u8981\u66f4\u65b0\u540e\u624d\u80fd\u6b63\u5e38\u4f7f\u7528\uff1a\nsudo cpan -u module_name\n\n\n~$ wget https://github.com/tseemann/snippy/archive/v2.9.tar.gz\n~$ tar xzf v2.9.tar.gz -C ~/app\n~$ \necho\n \n\"export PATH=\n$PATH\n:\n$HOME\n/app/snippy-2.9/bin:\n$HOME\n/app/snippy-2.9/binaries/linux/\"\n >> ~/.bashrc\n~$ \nsource\n ~/.bashrc\n\n# update all perl module\n\n~$ sudo cpan -u\n\n\n\n\n3.2 \u4f7f\u7528 Snippy\n\u00b6\n\n\nSnippy \u4e0d\u4ec5\u53ef\u4ee5\u83b7\u5f97SNP(\u5305\u62ecMultiSNP)\uff0c\u4e5f\u53ef\u4ee5\u83b7\u5f97insertion, indeletion\u4ee5\u53caComibination\u3002\u6587\u672c\u683c\u5f0f\u7684\u7ed3\u679c\u8bb0\u5f55\u6587\u4ef6\u4e2d\u7684snps.tab\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u7528\u6d4f\u89c8\u5668\u6253\u5f00snps.html\u67e5\u770b\u3002\n\n\n~$ snippy --cpus \n4\n --outdir output1 --ref ST17.fasta \n\\\n\n> --R1 TAP1_R1_paired.fastq.gz --R2 TAP1_R2_paired.fastq.gz\n~$ head output/snps.tab\n\n\n# snps.txt\u5bf9\u5404\u79cd\u7a81\u53d8\u4f4d\u70b9\u505a\u4e00\u4e2a\u6570\u636e\u7edf\u8ba1\n\n~$ cat output1/snps.txt\n...\nSoftware    snippy \n2\n.9\nVariant-COMPLEX \n1124\n\nVariant-DEL     \n27\n\nVariant-INS     \n43\n\nVariant-MNP     \n222\n\nVariant-SNP     \n3351\n\nVariantTotal    \n4767\n\n\n\n# \u8ba1\u7b97\u4e0d\u540c\n\n\n\n# \u4e86\u89e3\u4e0d\u540c\u78b1\u57fa\u7684SNP\u53d8\u5316\u6570\u91cf\uff0c\u5982T->C\u7684SNP\u6570\u91cf\n\n~$ awk \n'$10==\"T=>C\" {n++} END{print n}'\n output1/snps.gff\n\n\n\n\nSnippy\u8fd8\u53ef\u4ee5\u751f\u6210\u591a\u4e2a\u57fa\u56e0\u7ec4\u7684\u5171\u6709SNPs\u7684\u6bd4\u5bf9\u6587\u4ef6\u3002\u7528snippy\u5206\u522b\u751f\u62103\u4e2aTAP\u7684snp\u5217\u8868\u6570\u636e\u5230ouput*\u76ee\u5f55\u4e2d\uff0c\u7136\u540e\u7edf\u8ba1\u5171\u6709snps\u6570\u91cf\u5e76\u751f\u6210snp\u5e8f\u5217\u6587\u4ef6aln\u3002\n\n\n# for old ubuntu system you need update outdated perl module List::Util\n\n~$ sudo cpan -u List::Util\n~$ snippy-core --prefix core output1 output2 output3\n...\nFound \n30711\n core SNPs from \n42075\n variant sites.\nSaved SNP table: core.tab\nConstructing alignment object \nfor\n core.aln\n...\n\n\n\n\n\u5982\u679c\u8981\u7528raxml\u6784\u5efa\u8fdb\u5316\u6811\uff0c\u90a3\u83b7\u5f97\u7684.aln\u6587\u4ef6\u8fd8\u9700\u8981\u8f6c\u6362\u6210.phy\u624d\u53ef\u4ee5\u4f7f\u7528\u3002\u5f88\u591a\u5de5\u5177\u53ef\u4ee5\u5b9e\u73b0\u8f6c\u6362\uff0c\u8fd9\u91cc\u4f7f\u7528\u7f51\u7edc\u670d\u52a1\u6765\u5b9e\u73b0\uff1a\nhttp://sing.ei.uvigo.es/ALTER/\n\n\n~$ raxmlHPC -f a -x \n12345\n -p \n12345\n -# \n100\n -m GTRGAMMA -s core.phy -n ex -T \n4\n\n~$ figtree RAxML_bestTree.ex\n\n\n\n\n\u751f\u6210\u7684\u8fdb\u5316\u6811\u56fe\u7c7b\u4f3c\u4e0b\u56fe\n\n\n\n\n\n\n\u56e0\u4e3a\u6bd4\u5bf9\u7684\u662ffasta\u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u6240\u4ee5snps\u4e0d\u6b62\u662f\u7f16\u7801\u533aCDS\u7684\uff0c\u800c\u662f\u6574\u4e2a\u57fa\u56e0\u7ec4\u4e0a\u7684snps\u3002\n\n\n\n\n4. \u7528 Workflow \u811a\u672c\u6765\u7b80\u5316\u64cd\u4f5c\n\u00b6\n\n\n\u5bf9\u4e8e\u6211\u4eec\u5b9e\u9a8c\u5ba4\u5e73\u65f6\u4f1a\u6709\u8bb8\u591a\u7c7b\u4f3c\u7684SNP\u9274\u5b9a\u5de5\u4f5c\uff0c\u90a3\u4e48\u4e0b\u673a\u6570\u636e\u8981\u4e00\u4e2a\u4e2a\u64cd\u4f5c\u4f1a\u5f88\u7e41\u7410\uff0c\u6709\u65f6\u5019\u6211\u4eec\u901a\u8fc7 unix \u7684 pipeline \u6765\u7b80\u5316\u6216\u8005\u5199 pipeline \u811a\u672c\u6765\u5b9e\u73b0\u3002\u800c\u53e6\u4e00\u79cd\u89e3\u51b3\u65b9\u5f0f\u662f\u901a\u8fc7 Workflow \u5de5\u5177\u6765\u81ea\u52a8\u5316\u6570\u636e\u5206\u6790\u3002\u4e13\u95e8\u7684 Workflow \u8f6f\u4ef6\u6709\u8bb8\u591a\uff0c\u6709\u4e9b\u5e26GUI\uff08\u5982 galaxy \u5c31\u53ef\u4ee5\u5efa\u7acb\u56fe\u5f62\u5316\u7684 workflow\uff09\uff0c\u6709\u4e9b\u57fa\u4e8eCML\u3002\u5bf9\u4e8e\u5728\u670d\u52a1\u5668\u4e0a\u7684\u751f\u7269\u4fe1\u606f\u5b66\u5206\u6790\uff0c\u6211\u4eec\u4e00\u822c\u90fd\u662f\u4e22\u7ed9\u547d\u4ee4\u884c\u6765\u5b9e\u73b0\u3002Workflow \u56e0\u6b64\uff0c\u8fd9\u91cc\u4f7f\u7528\u57fa\u4e8e python \u7684 ruffus \u6765\u5efa\u7acb workflow\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u793a\u4f8b\u6f14\u793a\u5982\u4f55\u7b80\u5316\u5e73\u65f6\u5927\u91cf\u91cd\u590d\u7684\u5de5\u4f5c\u3002\n\n\n\u5982\u679c\u60f3\u4e86\u89e3\u66f4\u591a\u5173\u4e8e workflow/pipeline \u7684\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u67e5\u770b\u4ee5\u4e0b\u7f51\u7ad9\uff1a\n - \ncommon-workflow\n\n - \nawesome-pipeline\n\n\n4.1 \u51c6\u5907\u6570\u636e\n\u00b6\n\n\n\n\nundone\n\n\n\n\n5. \u5982\u4f55\u9009\u62e9 Reference\n\u00b6\n\n\n\u5728\u505a\u5fae\u751f\u7269SNP calling\u65f6\uff0c\u9009\u62e9\u4e0d\u540creference\u5bf9\u7ed3\u679c\u662f\u5426\u4f1a\u6709\u5f71\u54cd\uff1f\u4f1a\u6709\u591a\u5927\u5f71\u54cd\uff1f\u8fd9\u662f\u5177\u4f53\u5206\u6790\u65f6\u9700\u8981\u8003\u8651\u7684\u95ee\u9898\u3002\u6709\u4e00\u4e9b\n\u6587\u7ae0\n\u8fdb\u884c\u4e86\u8ba8\u8bba\u3002\u5bf9\u4e8e\u6211\u4eec\u5b9e\u9a8c\u5ba4\u5f00\u5c55\u75c5\u539f\u5fae\u751f\u7269\u6eaf\u6e90\u65f6\uff0c\u7531\u4e8e\u83cc\u682a\u4e00\u822c\u662f\u9ad8\u5ea6\u8fd1\u6e90\u7684\uff0c\u6240\u4ee5\u5f71\u54cd\u4e0d\u5927\u3002\u5bf9\u4e8e\u505a\u8fdb\u5316\u5173\u7cfb\u5206\u6790\u7684\uff0c\u8fd8\u662f\u9700\u8981\u8003\u8651snp\u7684\u5047\u9633\u6027\u95ee\u9898\uff0c\u901a\u5e38\u662f\u8981\u5bf9snp\u505a filtering\u3002\u800c\u4e14\u5bf9\u4e8e\u4e0d\u540c\u7269\u79cd\u8003\u8651\u5176\u4ed6\u7684\u7a81\u53d8\u4e8b\u4ef6\u4e0e\u91cd\u7ec4\u5728\u8fdb\u5316\u4e0a\u7684\u5f71\u54cd\u3002\n\n\n\u53e6\u4e00\u65b9\u9762\u4e0d\u540c\u8f6f\u4ef6\u7684\u6d41\u7a0b\u4e0e\u53c2\u6570\u4e0d\u540c\uff0c\u5bf9\u4e8e\u4e0d\u719f\u6089\u751f\u7269\u4fe1\u606f\u5b66\u7684\u751f\u7269\u5b66\u5bb6\u5f53\u4f7f\u7528\nAll in One\n\u4e4b\u7c7b\u7684\u5957\u4ef6\u5de5\u5177\u5206\u6790\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u73b0\u4e0d\u540c\u8f6f\u4ef6\u7684\u7ed3\u679c\u4f1a\u6709\u4e0d\u5c0f\u7684\u5dee\u5f02\u3002\u56e0\u6b64\u8fd8\u662f\u8981\u4ece\u81ea\u5df1\u7814\u7a76\u7684\u7269\u79cd\u7279\u70b9\u89d2\u5ea6\u53bb\u9009\u62e9\u8f6f\u4ef6\uff0c\u6240\u4ee5\u8bf4\u6700\u597d\u5bf9\u4e8e\u8fd9\u7c7b\u5de5\u5177\u7684\u5177\u4f53\u7ec6\u8282\u9700\u8981\u8fdb\u884c\u4e86\u89e3\uff0c\u90a3\u4e48\u5bf9\u4e8e\u6587\u6863\u4e0d\u5168\u6216\u8005\u4e0d\u591f\u4e30\u5bcc\u7684\u8f6f\u4ef6\u6765\u8bf4\uff0c\u5c31\u8981\u4ed4\u7ec6\u7814\u8bfb\u5b83\u7684\u6e90\u4ee3\u7801\u6765\u4e86\u89e3\u5176\u5b9e\u73b0\u65b9\u5f0f\u3002\n\n\n6. \u53c2\u8003\u8d44\u6599\n\u00b6\n\n\n\n\nJupyter Notebook for Pseudomonas Practical\n\n\nSeeking the source of Pseudomonas aeruginosa infections in a recently opened hospital: an observational study using whole-genome sequencing.\n\n\nVcflib Git Repository\n\n\nFreebayes Git Repository\n\n\nSnippy\n\n\nVCF Document v4.1",
            "title": "10.1 \u94dc\u7eff\u5047\u5355\u80de\u83cc\u4e0d\u540c\u6765\u6e90\u682aSNP\u6eaf\u6e90"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#snp",
            "text": "\u672c\u8282\u5b9e\u8df5  \u5229\u7528\u9ad8\u901a\u91cf\u6d4b\u5e8f\u6280\u672f\u5bf9\u94dc\u7eff\u5047\u5355\u80de\u83cc\u7684\u4e34\u5e8a\u5206\u79bb\u682a\u4e0e\u73af\u5883\u5206\u79bb\u682a\u5728\u57fa\u56e0\u7ec4\u6c34\u5e73\u4e0a\u8fdb\u884cSNP\u5206\u6790\uff0c\u4ece\u800c\u6eaf\u6e90\u83cc\u682a\u5e76\u505a\u8010\u836f\u5206\u6790\u3002   \u5206\u6790\u65b9\u6cd5 \uff1a  \u5229\u7528 bwa \u5c06\u76ee\u6807\u57fa\u56e0\u7ec4 reads \u6bd4\u5bf9\u5230\u53c2\u8003\u57fa\u56e0\u7ec4\uff0c\u7528 freebayes \u505a variant calling\uff0c\u83b7\u5f97\u5404\u4e2a\u6837\u672c\u7684 SNPs\uff0c\u6839\u636e\u7ed3\u679c\u505a\u8fdb\u4e00\u6b65\u5206\u6790\u3002  \u5e94\u7528\u5de5\u5177 :   bwa  samtools  freebayes  vcffilter   \u5206\u6790\u6d41\u7a0b :  \u5b9e\u8df5\u610f\u4e49 \uff1a  \u53ef\u4ee5\u4f5c\u4e3a\u4eca\u540e\u5b9e\u9a8c\u5ba4\u5f00\u5c55\u75c5\u539f\u83cc\u6eaf\u6e90\u5de5\u4f5c\u7684\u4e00\u4e2a\u6280\u672f\u6307\u5bfc\u4f9d\u636e\u3002",
            "title": "\u6848\u4f8b\u5206\u6790\u4e00: \u94dc\u7eff\u5047\u5355\u80de\u83cc\u4e34\u5e8a\u682a\u4e0e\u73af\u5883\u682aSNP\u6eaf\u6e90"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#1",
            "text": "\u5de5\u4f5c\u6d41\u7a0b\u5c06\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u5bf9\u4e8e\u8fd9\u4e2a\u6848\u4f8b\u5f00\u5c55\u6570\u636e\u5206\u6790\uff1a   \u6d4b\u5e8f\u8d28\u91cf\uff1areads\u7684\u957f\u5ea6\uff0c\u63d2\u5165\u7247\u6bb5\u7684\u957f\u5ea6  \u5c06\u6d4b\u5e8f\u6570\u636e\u6bd4\u5bf9\u5230\u53c2\u8003\u57fa\u56e0\u7ec4ST17  \u6bcf\u4e2a\u6837\u54c1reads\u7684\u5206\u5e03\u60c5\u51b5  \u6bcf\u4e2a\u6837\u54c1\u7684\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u8986\u76d6\u5ea6  \u4e0d\u540c\u6837\u54c1\u4e4b\u95f4\u7684\u5dee\u5f02\uff0c\u7279\u522b\u662f\u5f53\u8bbe\u7f6e\u4e0d\u540c\u7684\u8fc7\u6ee4\u53c2\u6570\u65f6\u7684\u60c5\u51b5\uff1a\n         - Quality filter: QUAL > 100\n         - Likelihood filter: QUAL / AO > 10\n         - Variant frequency filter: AO / DP > 0.9 (90% allele frequency)  \u54ea\u4e00\u4e2a\u6c34\u9f99\u5934\u6c34\u6837\u7684\u5206\u79bb\u682a\u6700\u6709\u53ef\u80fd\u662f\u611f\u67d3\u6e90\u3002(\u65b9\u6cd5: \u7528 vcfsamplediff \u6bd4\u8f83\u73af\u5883\u682a\u4e0e\u4e34\u5e8a\u682aSNPs\u6570\u91cf)  2\u4e2a\u75c5\u4eba\u5206\u79bb\u682a\u4e4b\u95f4\u4f7f\u7528\u4e86\u5927\u91cf\u7684\u6297\u751f\u7d20\u6cbb\u7597\uff0c\u54ea\u4e00\u4e2a\u83b7\u5f97\u3001\u5f97\u4e86\u8010\u836f\u6027\uff1f  \u7528 joint calling \u6765\u6bd4\u8f832\u4e2a\u4e34\u5e8a\u6837\u54c1\u6570\u636e\uff0c\u5e76\u7528 vcfsamplediff \u5206\u6790  \u5bf9\u4e8e\u83b7\u5f97\u7684\u5927\u91cfSNPs\uff0c\u662f\u5426\u9700\u8981\u8fc7\u6ee4\u4ee5\u53ca\u5982\u4f55\u8fc7\u6ee4  \u4e86\u89e3SNPs\u7684\u5206\u5e03\u89c4\u5f8b  \u91cd\u70b9\u67e5\u770bSNPs",
            "title": "1. \u63d0\u51fa\u95ee\u9898"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#2",
            "text": "",
            "title": "2. \u5206\u6790\u6d41\u7a0b"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#21",
            "text": "\u6570\u636e\u53ef\u4ee5\u4ece \u8fd9\u91cc \u4e0b\u8f7d\u83b7\u5f97\uff0c\u53ef\u4ee5\u7528 wget -m \u9012\u5f52\u4e0b\u8f7d\u8def\u5f84\u4e0b\u6240\u6709\u6587\u4ef6\u3002\u6587\u4ef6\u5305\u62ec\uff1a   TAP1 - \u75c5\u623f1\u53f7\u6c34\u9f99\u5934\u6c34\u6837\u4e2d\u5206\u79bb\u7684\u83cc\u682a  TAP2 - \u75c5\u623f2\u53f7\u6c34\u9f99\u5934\u6c34\u6837\u4e2d\u5206\u79bb\u7684\u83cc\u682a  TAP3 - \u75c5\u623f3\u53f7\u6c34\u9f99\u5934\u6c34\u6837\u4e2d\u5206\u79bb\u7684\u83cc\u682a  PATIENT1 - \u670d\u7528\u6297\u751f\u7d20\u540e\u7684\u75c5\u4eba\u5206\u79bb\u682a  PATIENT2 - \u4e00\u5468\u5185\u8fdb\u4e00\u6b65\u670d\u7528\u6297\u751f\u7d20\u7684\u75c5\u4eba\u5206\u79bb\u682a   ~$ mkdir -p pse_data && cd pse_data\n~$ wget -m http://www.microbesng.uk/filedist/pseudomonas-practical/\n~$ mv www.microbesng.uk/filedist/pseudomonas-practical/* .",
            "title": "2.1 \u4e0b\u8f7d\u6570\u636e"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#22-st17",
            "text": "\u8f6f\u4ef6\u4f7f\u7528 bwa \u6765\u5bf9\u53c2\u8003\u57fa\u56e0\u7ec4ST17\u5efa\u7acb\u7d22\u5f15\uff0c\u4ee5\u4fbf\u540e\u7eed\u6bd4\u5bf9\u3002  ~$ bwa index ST17.fasta",
            "title": "2.2 \u5efa\u7acb ST17 \u578b\u53c2\u8003\u83cc\u682a\u7d22\u5f15"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#23-reads-st17",
            "text": "\u7528 bwa mem \u8fdb\u884c\u6bd4\u5bf9\uff0c\u8f93\u51fa\u7684\u7ed3\u679c\u901a\u8fc7\u7ba1\u9053\u7531samtools\u8f6c\u6362\u6210BAM\u6587\u4ef6\u5e76\u8fdb\u884c\u6392\u5e8f\u548c\u7d22\u5f15  ~$ bwa mem -t 4 -R '@RG\\tID:TAP1\\tSM:TAP1' ST17.fasta \\\n> TAP1_R1_paired.fastq.gz TAP1_R2_paired.fastq.gz | \\\n> samtools view -bS - | samtools sort - TAP1.sorted\n~$ samtools index TAP1.sorted.bam   \u53c2\u6570\u4ecb\u7ecd   -t 4: \u8868\u793a\u4f7f\u75284\u7ebf\u7a0b\uff0c\u6839\u636e\u81ea\u5df1\u7684\u8ba1\u7b97\u673aCPU\u8d44\u6e90\u8bbe\u7f6e\u3002  -R '...': \u8bbe\u7f6ereads\u7684ID\uff0c\\t\u4e3a\u5236\u8868\u7b26\u4f1a\u8f6c\u4e49\u6210tab\u952e\u3002    \u5bf9\u5176\u4ed62\u682a\u73af\u5883\u682a\u548c2\u682a\u4e34\u5e8a\u682a\u91cd\u590d\u4ee5\u4e0a\u6b65\u9aa4\u3002",
            "title": "2.3 \u5c06\u6d4b\u5e8f reads \u6bd4\u5bf9\u5230 ST17 \u5e76\u6392\u5e8f\u7d22\u5f15"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#24-reads",
            "text": "bam\u6587\u4ef6\u542b\u6709\u6bd4\u5bf9\u7684\u4fe1\u606f\uff0c\u53ef\u4ee5\u7528 stats \u53c2\u6570\u67e5\u770b  ~$ samtools stats TAP1.sorted.bam | grep \"maximum length\"\n~$ samtools stats TAP1.sorted.bam | grep \"insert size\"\n~$ samtools stats TAP1.sorted.bam | grep \"^COV\" > TAP1.coverage.txt  \u5c06\u622a\u53d6\u7684\u8986\u76d6\u5ea6\u76f8\u5173\u4fe1\u606f\u4fdd\u5b58\u6210 .txt \u6587\u4ef6\uff0c\u5728R\u91cc\u7528ggplot2\u7ed8\u5236\u8986\u76d6\u5ea6\u56fe\uff1a  >   library ( ggplot2 )  >  cov = read.table ( \"TAP1.coverage.txt\" ,  sep = \"\\t\" )  >  cov [ 1 ,]  >  ggplot ( cov ,  aes ( x = V3 ,  y = V4 ))   +  geom_bar ( stat = \"identity\" )   +  xlab ( \"Coverage\" )   +  ylab ( \"Count\" )",
            "title": "2.4 \u7ed8\u5236\u6d4b\u5e8f reads \u7684\u8986\u76d6\u5ea6"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#25-1snps",
            "text": "\u7528\u540c\u6837\u7684\u65b9\u6cd5\u5bf9\u5176\u4ed6\u51e0\u4e2a\u6837\u672c\u8fdb\u884c\u64cd\u4f5c\uff0c\u83b7\u5f97sorted\u7684bam\u683c\u5f0f\u6587\u4ef6\uff0c\u7528 freebayes \u5bf9\u4e34\u5e8a\u4e0e\u73af\u5883\u682a\u6bd4\u8f83\u83b7\u5f97vcf\u6587\u4ef6\u3002\u7136\u540e\u7528vcflib\u5de5\u5177\u8fc7\u6ee4 QUAL/AO>10 \u7684\u90e8\u5206(VCF\u5143\u6570\u636e\u90e8\u5206\u53ef\u4ee5\u53c2\u8003 \u6587\u6863 )\uff0c\u5e76\u7528 wc-l \u8ba1\u7b97\u884c\u6570\u7edf\u8ba1\u7ed3\u679c\u3002  ~$ freebayes -p 1 -C 5 -f ST17.fasta TAP1.sorted.bam PATIENT1.sorted.bam  > compare_tap1.vcf\n~$ vcffilter -f \"QUAL / AO > 10\" compare_tap1.vcf | vcffilter -f \"NS = 2\" | wc -l\n\n6685  \u83b7\u5f97\u4e34\u5e8a\u682a\u4e0e\u73af\u5883\u682a\u4e4b\u95f4\u7684SNP\u5dee\u5f02\u6570\u91cf\uff0c\u7ed3\u679c\u8868\u660e\u8fd92\u682a\u4e4b\u95f4\u53ea\u67095\u4e2aSNPs\u3002  ~$ vcfsamplediff SAME TAP1 PATIENT1 compare_tap1.vcf | vcffilter -f \"QUAL / AO > 10\" | vcffilter -f \"NS = 2\" | vcffilter -f \"! ( SAME = germline ) \" | grep -v \"^#\" | wc -l\n\n5  \u7528 vcfsamplediff \u4e86\u89e3SNPs\u5dee\u5f02\u7684\u57fa\u56e0\uff0c\u53ef\u4ee5\u77e5\u9053\u662f\u90a3\u4e9bgene/CDS\u91cc\u9762\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u8fd8\u53ef\u4ee5\u6839\u636e\u5b9a\u4f4d\u770b\u7a81\u53d8\u662f\u5426\u662f\u540c\u4e49\u7a81\u53d8\u3002\u5982\u679csnps\u6570\u91cf\u63a5\u8fd1\u65e0\u6cd5\u533a\u5206\uff0c\u4f46\u662f\u5b9a\u4f4d\u7684\u57fa\u56e0\u6709\u5dee\u5f02\uff0c\u90a3\u4e48\u83cc\u682a\u7684\u6eaf\u6e90\u8fd8\u9700\u8981\u8fdb\u4e00\u6b65\u8003\u8651\u3002  ~$ vcfsamplediff SAME PATIENT1 TAP1 compare_tap1.vcf  | vcffilter -f \"QUAL / AO > 10\" | vcffilter -f \"NS = 2\" | vcffilter -f \"! ( SAME = germline ) \" > tap_differences.vcf\n~$ bedtools intersect -a ST17.gff -b tap_differences.vcf | awk -F\";\" '{print NR, $2}' OFS=\"\\t\"  \u7ed3\u679c\u8f93\u51fa\uff1a  1   gene=yfiR\n2   inference=ab initio prediction:Prodigal:2.60,similar to AA sequence:RefSeq:YP_261793.1,protein motif:TIGRFAMs:TIGR03756,protein motif:Pfam:PF06834.5\n3   inference=ab initio prediction:Prodigal:2.60,similar to AA sequence:RefSeq:YP_261793.1,protein motif:TIGRFAMs:TIGR03756,protein motif:Pfam:PF06834.5\n4   gene=trbL\n5   inference=ab initio prediction:Prodigal:2.60,similar to AA sequence:RefSeq:YP_001349879.1,protein motif:Cdd:COG3481,protein motif:TIGRFAMs:TIGR03760,protein motif:Pfam:PF07514.5",
            "title": "2.5 \u6bd4\u8f831\u53f7\u4e34\u5e8a\u682a\u4e0e\u73af\u5883\u682a\u7684SNPs\u5dee\u5f02"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#26-2",
            "text": "\u4e86\u89e32\u4e2a\u4e34\u5e8a\u682a\u7684SNPs\u5dee\u5f02\uff0c\u5e76\u67e5\u770b\u8fd9\u4e9bSNPs\u6240\u5f71\u54cd\u7684gene  ~$ freebayes --ploidy 1 -C 5 -f ST17.fasta PATIENT1.sorted.bam PATIENT2.sorted.bam > compare_patient.vcf\n~$ vcfsamplediff SAME PATIENT1 TAP1 compare_patient.vcf  | vcffilter -f \"QUAL / AO > 10\" | vcffilter -f \"NS = 2\" | vcffilter -f \"! ( SAME = germline ) \" > patient_differences.vcf\n~$ bedtools intersect -a ST17.gff -b patient_differences.vcf | awk -F\";\" '{print $2}'",
            "title": "2.6 2\u4e2a\u4e34\u5e8a\u682a\u7684\u8010\u836f\u53d8\u8fc1"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#3-snippy",
            "text": "\u5927\u91cf\u7684\u65e5\u5e38\u5de5\u4f5c\u6216\u8005\u4e0d\u719f\u6089\u5404\u79cd\u547d\u4ee4\u884c\u5de5\u5177\u4f7f\u7528\u7684\u8bdd\uff0c\u5c31\u9700\u8981\u66f4\u7b80\u4fbf\u7684\u8f6f\u4ef6\u6216\u8005pipelines\u6765\u5e2e\u52a9\u5b8c\u6210\u6574\u4e2a\u5206\u6790\u5de5\u4f5c\u3002\u56e0\u6b64\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528 snippy \u6765\u5b9e\u73b0\u5206\u6790SNPs\uff0c\u5e76\u7ed8\u5236\u57fa\u4e8esnps\u7684\u8fdb\u5316\u6811\u3002",
            "title": "3. \u7528 Snippy \u6765\u5b9e\u73b0"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#31-snippy",
            "text": "Snippy\u662f\u6bd4\u8f83\u9002\u5408\u65b0\u624b\u7684\u5de5\u5177\uff0c\u5b83\u63d0\u4f9b\u4e86All in One\u7684\u5de5\u5177\u5957\u88c5\u3002\u867d\u7136Snippy\u9700\u8981\u4ee5\u4e0b\u8f6f\u4ef6\u652f\u6301\uff1a   Perl >= 5.6  BioPerl >= 1.6  bwa mem >= 0.7.12  samtools >= 1.1  GNU parallel > 2013xxxx  freebayes >= 0.9.20  freebayes sripts ( freebayes-parallel,fasta_generate_regions.py)  vcflib (vcffilter, vcfstreamsort, vcfuniq, vcffirstheader)  vcftools (vcf-consensus)  snpEff >= 4.1   \u4f46\u8fd9\u4e9b\u5de5\u5177\u5728Snippy\u5b89\u88c5\u5305\u91cc\u90fd\u5df2\u7ecf\u63d0\u4f9b\u4e86\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6839\u636e\u81ea\u5df1\u7684\u7cfb\u7edf\u8bbe\u7f6e\u5c06\u4ee5\u6765\u5de5\u5177\u6dfb\u52a0\u5230\u7cfb\u7edf\u8def\u5f84\u4e2d\u53bb\u5373\u53ef\u3002\u5bf9\u4e8eperl\u7684\u4e00\u4e9b\u6a21\u5757\uff0c\u53ef\u80fd\u9700\u8981\u66f4\u65b0\u540e\u624d\u80fd\u6b63\u5e38\u4f7f\u7528\uff1a sudo cpan -u module_name  ~$ wget https://github.com/tseemann/snippy/archive/v2.9.tar.gz\n~$ tar xzf v2.9.tar.gz -C ~/app\n~$  echo   \"export PATH= $PATH : $HOME /app/snippy-2.9/bin: $HOME /app/snippy-2.9/binaries/linux/\"  >> ~/.bashrc\n~$  source  ~/.bashrc # update all perl module \n~$ sudo cpan -u",
            "title": "3.1 \u5b89\u88c5 Snippy"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#32-snippy",
            "text": "Snippy \u4e0d\u4ec5\u53ef\u4ee5\u83b7\u5f97SNP(\u5305\u62ecMultiSNP)\uff0c\u4e5f\u53ef\u4ee5\u83b7\u5f97insertion, indeletion\u4ee5\u53caComibination\u3002\u6587\u672c\u683c\u5f0f\u7684\u7ed3\u679c\u8bb0\u5f55\u6587\u4ef6\u4e2d\u7684snps.tab\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u7528\u6d4f\u89c8\u5668\u6253\u5f00snps.html\u67e5\u770b\u3002  ~$ snippy --cpus  4  --outdir output1 --ref ST17.fasta  \\ \n> --R1 TAP1_R1_paired.fastq.gz --R2 TAP1_R2_paired.fastq.gz\n~$ head output/snps.tab # snps.txt\u5bf9\u5404\u79cd\u7a81\u53d8\u4f4d\u70b9\u505a\u4e00\u4e2a\u6570\u636e\u7edf\u8ba1 \n~$ cat output1/snps.txt\n...\nSoftware    snippy  2 .9\nVariant-COMPLEX  1124 \nVariant-DEL      27 \nVariant-INS      43 \nVariant-MNP      222 \nVariant-SNP      3351 \nVariantTotal     4767  # \u8ba1\u7b97\u4e0d\u540c  # \u4e86\u89e3\u4e0d\u540c\u78b1\u57fa\u7684SNP\u53d8\u5316\u6570\u91cf\uff0c\u5982T->C\u7684SNP\u6570\u91cf \n~$ awk  '$10==\"T=>C\" {n++} END{print n}'  output1/snps.gff  Snippy\u8fd8\u53ef\u4ee5\u751f\u6210\u591a\u4e2a\u57fa\u56e0\u7ec4\u7684\u5171\u6709SNPs\u7684\u6bd4\u5bf9\u6587\u4ef6\u3002\u7528snippy\u5206\u522b\u751f\u62103\u4e2aTAP\u7684snp\u5217\u8868\u6570\u636e\u5230ouput*\u76ee\u5f55\u4e2d\uff0c\u7136\u540e\u7edf\u8ba1\u5171\u6709snps\u6570\u91cf\u5e76\u751f\u6210snp\u5e8f\u5217\u6587\u4ef6aln\u3002  # for old ubuntu system you need update outdated perl module List::Util \n~$ sudo cpan -u List::Util\n~$ snippy-core --prefix core output1 output2 output3\n...\nFound  30711  core SNPs from  42075  variant sites.\nSaved SNP table: core.tab\nConstructing alignment object  for  core.aln\n...  \u5982\u679c\u8981\u7528raxml\u6784\u5efa\u8fdb\u5316\u6811\uff0c\u90a3\u83b7\u5f97\u7684.aln\u6587\u4ef6\u8fd8\u9700\u8981\u8f6c\u6362\u6210.phy\u624d\u53ef\u4ee5\u4f7f\u7528\u3002\u5f88\u591a\u5de5\u5177\u53ef\u4ee5\u5b9e\u73b0\u8f6c\u6362\uff0c\u8fd9\u91cc\u4f7f\u7528\u7f51\u7edc\u670d\u52a1\u6765\u5b9e\u73b0\uff1a http://sing.ei.uvigo.es/ALTER/  ~$ raxmlHPC -f a -x  12345  -p  12345  -#  100  -m GTRGAMMA -s core.phy -n ex -T  4 \n~$ figtree RAxML_bestTree.ex  \u751f\u6210\u7684\u8fdb\u5316\u6811\u56fe\u7c7b\u4f3c\u4e0b\u56fe    \u56e0\u4e3a\u6bd4\u5bf9\u7684\u662ffasta\u683c\u5f0f\u7684\u6587\u4ef6\uff0c\u6240\u4ee5snps\u4e0d\u6b62\u662f\u7f16\u7801\u533aCDS\u7684\uff0c\u800c\u662f\u6574\u4e2a\u57fa\u56e0\u7ec4\u4e0a\u7684snps\u3002",
            "title": "3.2 \u4f7f\u7528 Snippy"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#4-workflow",
            "text": "\u5bf9\u4e8e\u6211\u4eec\u5b9e\u9a8c\u5ba4\u5e73\u65f6\u4f1a\u6709\u8bb8\u591a\u7c7b\u4f3c\u7684SNP\u9274\u5b9a\u5de5\u4f5c\uff0c\u90a3\u4e48\u4e0b\u673a\u6570\u636e\u8981\u4e00\u4e2a\u4e2a\u64cd\u4f5c\u4f1a\u5f88\u7e41\u7410\uff0c\u6709\u65f6\u5019\u6211\u4eec\u901a\u8fc7 unix \u7684 pipeline \u6765\u7b80\u5316\u6216\u8005\u5199 pipeline \u811a\u672c\u6765\u5b9e\u73b0\u3002\u800c\u53e6\u4e00\u79cd\u89e3\u51b3\u65b9\u5f0f\u662f\u901a\u8fc7 Workflow \u5de5\u5177\u6765\u81ea\u52a8\u5316\u6570\u636e\u5206\u6790\u3002\u4e13\u95e8\u7684 Workflow \u8f6f\u4ef6\u6709\u8bb8\u591a\uff0c\u6709\u4e9b\u5e26GUI\uff08\u5982 galaxy \u5c31\u53ef\u4ee5\u5efa\u7acb\u56fe\u5f62\u5316\u7684 workflow\uff09\uff0c\u6709\u4e9b\u57fa\u4e8eCML\u3002\u5bf9\u4e8e\u5728\u670d\u52a1\u5668\u4e0a\u7684\u751f\u7269\u4fe1\u606f\u5b66\u5206\u6790\uff0c\u6211\u4eec\u4e00\u822c\u90fd\u662f\u4e22\u7ed9\u547d\u4ee4\u884c\u6765\u5b9e\u73b0\u3002Workflow \u56e0\u6b64\uff0c\u8fd9\u91cc\u4f7f\u7528\u57fa\u4e8e python \u7684 ruffus \u6765\u5efa\u7acb workflow\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u793a\u4f8b\u6f14\u793a\u5982\u4f55\u7b80\u5316\u5e73\u65f6\u5927\u91cf\u91cd\u590d\u7684\u5de5\u4f5c\u3002  \u5982\u679c\u60f3\u4e86\u89e3\u66f4\u591a\u5173\u4e8e workflow/pipeline \u7684\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u67e5\u770b\u4ee5\u4e0b\u7f51\u7ad9\uff1a\n -  common-workflow \n -  awesome-pipeline",
            "title": "4. \u7528 Workflow \u811a\u672c\u6765\u7b80\u5316\u64cd\u4f5c"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#41",
            "text": "undone",
            "title": "4.1 \u51c6\u5907\u6570\u636e"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#5-reference",
            "text": "\u5728\u505a\u5fae\u751f\u7269SNP calling\u65f6\uff0c\u9009\u62e9\u4e0d\u540creference\u5bf9\u7ed3\u679c\u662f\u5426\u4f1a\u6709\u5f71\u54cd\uff1f\u4f1a\u6709\u591a\u5927\u5f71\u54cd\uff1f\u8fd9\u662f\u5177\u4f53\u5206\u6790\u65f6\u9700\u8981\u8003\u8651\u7684\u95ee\u9898\u3002\u6709\u4e00\u4e9b \u6587\u7ae0 \u8fdb\u884c\u4e86\u8ba8\u8bba\u3002\u5bf9\u4e8e\u6211\u4eec\u5b9e\u9a8c\u5ba4\u5f00\u5c55\u75c5\u539f\u5fae\u751f\u7269\u6eaf\u6e90\u65f6\uff0c\u7531\u4e8e\u83cc\u682a\u4e00\u822c\u662f\u9ad8\u5ea6\u8fd1\u6e90\u7684\uff0c\u6240\u4ee5\u5f71\u54cd\u4e0d\u5927\u3002\u5bf9\u4e8e\u505a\u8fdb\u5316\u5173\u7cfb\u5206\u6790\u7684\uff0c\u8fd8\u662f\u9700\u8981\u8003\u8651snp\u7684\u5047\u9633\u6027\u95ee\u9898\uff0c\u901a\u5e38\u662f\u8981\u5bf9snp\u505a filtering\u3002\u800c\u4e14\u5bf9\u4e8e\u4e0d\u540c\u7269\u79cd\u8003\u8651\u5176\u4ed6\u7684\u7a81\u53d8\u4e8b\u4ef6\u4e0e\u91cd\u7ec4\u5728\u8fdb\u5316\u4e0a\u7684\u5f71\u54cd\u3002  \u53e6\u4e00\u65b9\u9762\u4e0d\u540c\u8f6f\u4ef6\u7684\u6d41\u7a0b\u4e0e\u53c2\u6570\u4e0d\u540c\uff0c\u5bf9\u4e8e\u4e0d\u719f\u6089\u751f\u7269\u4fe1\u606f\u5b66\u7684\u751f\u7269\u5b66\u5bb6\u5f53\u4f7f\u7528 All in One \u4e4b\u7c7b\u7684\u5957\u4ef6\u5de5\u5177\u5206\u6790\u65f6\uff0c\u53ef\u80fd\u4f1a\u53d1\u73b0\u4e0d\u540c\u8f6f\u4ef6\u7684\u7ed3\u679c\u4f1a\u6709\u4e0d\u5c0f\u7684\u5dee\u5f02\u3002\u56e0\u6b64\u8fd8\u662f\u8981\u4ece\u81ea\u5df1\u7814\u7a76\u7684\u7269\u79cd\u7279\u70b9\u89d2\u5ea6\u53bb\u9009\u62e9\u8f6f\u4ef6\uff0c\u6240\u4ee5\u8bf4\u6700\u597d\u5bf9\u4e8e\u8fd9\u7c7b\u5de5\u5177\u7684\u5177\u4f53\u7ec6\u8282\u9700\u8981\u8fdb\u884c\u4e86\u89e3\uff0c\u90a3\u4e48\u5bf9\u4e8e\u6587\u6863\u4e0d\u5168\u6216\u8005\u4e0d\u591f\u4e30\u5bcc\u7684\u8f6f\u4ef6\u6765\u8bf4\uff0c\u5c31\u8981\u4ed4\u7ec6\u7814\u8bfb\u5b83\u7684\u6e90\u4ee3\u7801\u6765\u4e86\u89e3\u5176\u5b9e\u73b0\u65b9\u5f0f\u3002",
            "title": "5. \u5982\u4f55\u9009\u62e9 Reference"
        },
        {
            "location": "/chapter_10/01_trace-Pae-from-different-source-by-SNP/#6",
            "text": "Jupyter Notebook for Pseudomonas Practical  Seeking the source of Pseudomonas aeruginosa infections in a recently opened hospital: an observational study using whole-genome sequencing.  Vcflib Git Repository  Freebayes Git Repository  Snippy  VCF Document v4.1",
            "title": "6. \u53c2\u8003\u8d44\u6599"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/",
            "text": "\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u57fa\u56e0\u7ec4 SNPs \u5206\u6790\n\u00b6\n\n\n\u75be\u63a7\u90e8\u95e8\u5c5e\u4e8e\u4fdd\u969c\u5355\u4f4d\uff0c\u9700\u8981\u52a0\u5f3a\u5bf9\u751f\u7269\u6050\u6016\u4e8b\u4ef6\u7684\u9632\u63a7\u548c\u5e94\u5bf9\u5904\u7f6e\u80fd\u529b\u3002\u6700\u8457\u540d\u7684\u7ec6\u83cc\u6027\u751f\u7269\u6050\u6016\u6218\u5242\u5c31\u662f\u542b\u6709\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u7684\u767d\u8272\u7c89\u672b\u3002\u65e5\u5e38\u5de5\u4f5c\u4e2d\u65e0\u6cd5\u63a5\u89e6\u5230\u8fd9\u4e9b\u75c5\u539f\uff0c\u56e0\u6b64\u5728\u7ecf\u9a8c\u548c\u6280\u80fd\u65b9\u9762\u8f83\u4e3a\u7f3a\u4e4f\u3002\u5728G20\u671f\u95f4\uff0c\u5185\u90e8\u4e5f\u8fdb\u884c\u4e86\u76f8\u5173\u9879\u76ee\u7684\u5e94\u6025\u62c9\u7ec3\uff0c\u9664\u6b64\u4e4b\u5916\u4e3a\u4e86\u63d0\u5347\u80fd\u529b\u5efa\u8bbe\uff0c\u5e94\u5bf9\u53ef\u80fd\u53d1\u751f\u7684\u7591\u4f3c\u4e8b\u4ef6\uff0c\u5728\u5b9e\u9a8c\u5ba4\u5feb\u901f\u5206\u6790\u548c\u6eaf\u6e90\u5de5\u4f5c\u505a\u597d\u80fd\u529b\u50a8\u5907\uff0c\u6211\u4eec\u5bf9\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u7684\u57fa\u56e0\u7ec4\u6570\u636e\u8fdb\u884c\u4e86\u57fa\u672c\u5206\u6790\uff0c\u5bf9\u76f8\u5173\u8d44\u6599\u548c\u4fe1\u606f\u8fdb\u884c\u4e86\u50a8\u5907\u3002\n\n\n\u4e3b\u8981\u901a\u8fc7\u6784\u5efa\u76f8\u5e94\u7684\u5206\u6790\u6d41\u7a0b\uff0c\u83b7\u5f97\u83cc\u682a\u57fa\u56e0\u7ec4\u6570\u636e\u540e\u53ef\u4ee5\u7b2c\u4e00\u65f6\u95f4\u5c31\u8fdb\u884c\u6eaf\u6e90\u65b9\u9762\u7684\u7814\u7a76\u3002\u4ece\u800c\u5728\u8fd9\u51c6\u5907\u5de5\u4f5c\u7684\u8fc7\u7a0b\u4e2d\u5f62\u6210\u4e86\u6b64\u6587\u6863\u3002\u4e3b\u8981\u76ee\u7684\u4e5f\u662f\u4e3a\u4e86\u629b\u7816\u5f15\u7389\uff0c\u505a\u5230\u4e3e\u4e00\u53cd\u4e09\uff0c\u7ed9\u5176\u4ed6\u7ec6\u83cc\u6027\u75c5\u539f\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6eaf\u6e90\u5206\u6790\u65f6\u63d0\u4f9b\u53c2\u8003\u3002\n\n\n\u8f6f\u4ef6\u4e2d\u4f7f\u7528\u7684\u4e00\u4e9b\u53c2\u6570\u662f\u6839\u636e\u81ea\u5df1\u7684\u670d\u52a1\u5668\u8bbe\u7f6e\u7684\uff0c\u5177\u4f53\u8fd0\u884c\u65f6\u9700\u8981\u6839\u636e\u8ba1\u7b97\u673a\u914d\u7f6e\u8fdb\u884c\u76f8\u5e94\u7684\u8c03\u6574\u3002\u6211\u4eec\u670d\u52a1\u5668\u7684\u914d\u7f6e\u5982\u4e0b\uff1a\n\n\n\n\nNote\n\n\n\n\nCPU: E3 2650v3 x2\n\n\nMemory: ECC 16G x8\n\n\nHarddisk: 7200\u8f6c 1T x4 \u7ec4 Raid 5 + 1 Hotspare\n\n\nSystem: Ubuntu 16.04 LTS 64bit\n\n\n\n\n\n\n1. \u83b7\u53d6\u516c\u5171\u6570\u636e\u5e93\u6570\u636e\n\u00b6\n\n\n\u6570\u636e\u91c7\u7528 NCBI SRA \u6570\u636e\u5e93\u4e2d\u7684\u516c\u5171\u6570\u636e\u6765\u4f5c\u5206\u6790\u3002\u9996\u5148\u68c0\u7d22 NCBI SRA \u6570\u636e\u5e93\u4e2d\u6240\u6709\u4f7f\u7528 illumina \u5e73\u53f0\u5bf9\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u57fa\u56e0\u7ec4\u8fdb\u884c PE \u6d4b\u5e8f\u7684 \u5927\u4e8e 100M \u7684 NGS \u6570\u636e\uff0c\u5e76\u5728\u4e0b\u8f7d\u8fd9\u4e9b sra \u6570\u636e\u540e\u8f6c\u6362\u6210 fastq.gz \u683c\u5f0f\u3002\u4f7f\u7528\u7684\u5de5\u5177\u4e3b\u8981\u4e3a \nedirect\n \u548c \nsra-tools\n\u3002\n\n\n$ esearch -db sra -query \n'\"Bacillus anthracis\"[Organism] AND \\\n\n\n> (Hiseq[ALL] OR Miseq[ALL]) AND \"strategy wgs\"[Properties]'\n \n|\n \n\\\n\n> efetch -db sra -format runinfo \n|\n grep \n'PAIRED'\n \n|\n grep \n'^[DSE]RR*'\n \n|\n \n\\\n\n> awk -F\n','\n \n'{if($5>100000000) print $1}'\n \n|\n sort -n \n|\n \n\\\n\n> xargs fastq-dump --split-files --gzip --outdir bacillus_anthracis\n\n\n\n\n\u867d\u7136\u6211\u4eec\u68c0\u7d22\u65f6\u9650\u5b9a\u4e86 PE \u6d4b\u5e8f\u6570\u636e\uff0c\u4f46\u662f\u5f88\u591a\u65f6\u5019\u6570\u636e\u5e93\u91cc\u7684\u4fe1\u606f\u4e0d\u51c6\u786e\uff0c\u8fd8\u662f\u4f1a\u6709\u5f88\u591a SE \u7684\u6570\u636e\u4f1a\u88ab\u4e0b\u8f7d\u3002\u786e\u5b9a PE \u6216\u8005 SE \u7684\u65b9\u6cd5\u5f88\u591a\u3002\n\n\n# sra-stat \u7edf\u8ba1 sra \u6587\u4ef6\uff0cnreads=1 \u8868\u793a SE \u6d4b\u5e8f\uff0cnreads=2 \u8868\u793a PE \u6d4b\u5e8f\u3002\u7a0b\u5e8f\u7edf\u8ba1\u6574\u4e2a\u6587\u4ef6\uff0c\u901f\u5ea6\u6bd4\u8f83\u6162\n\n$ sra-stat -xs *.sra \n|\n grep \n\"nreads\"\n\n\n# \u6279\u91cf\u5220\u9664\n\n$ parallel \n'sra-stat -xs'\n ::: *.sra \n|\n xtract -Pattern Run -element Run@accession \n\\\n\n> Statistics@nreads \n|\n awk \n'{if($2==1) print $1}'\n \n|\n xargs rm\n\n\n# fastq-dump \u8f93\u51fa\u4e00\u4e2a reads\uff0c\u8ba1\u7b97\u884c\u6570\u5982\u679c\u662f4\uff0c\u90a3\u4e48\u5c31\u662f SE\uff0c\u5982\u679c\u662f8,\u5219\u662f PE\n\n$ fastq-dump -X \n1\n --split-spot -Z SRR955386.sra \n|\n wc -l\n\n\n# fastq-dump \u81ea\u5df1\u5224\u65ad\uff0c\u5f53 sra \u6587\u4ef6\u662f SE \u6d4b\u5e8f\u65f6\uff0cfastq-dump \u53ea\u80fd\u751f\u62101\u4e2a *_1.fastq \u6587\u4ef6\n\n$ fastq-dump --split-files ERR493452.sra\n\n\n# fastq-dump \u53ea\u80fd\u8c03\u7528\u5355\u6838\u8f6c\u6362\uff0c\u53ef\u4ee5\u4f7f\u7528 parallel \u5de5\u5177\u5e76\u884c\u5904\u7406\u52a0\u5feb\u901f\u5ea6\u3002\n\n$ parallel \n\"fastq-dump --split-files --gzip --outdir bacillus_anthracis\"\n ::: *.sra\n\n\n\n\n\u6709\u65f6\u5019\u6709\u4e9bsra\u6587\u4ef6\u5728 dump \u65f6\u4f1a\u51fa\u9519\uff0c\u4e0d\u80fd\u751f\u6210\u5bf9\u5e94\u7684 PE fastq \u6587\u4ef6\uff0c\u8fd9\u5c31\u9700\u8981\u6bd4\u8f83\u540e\u5220\u9664\u4e86\u3002\u5982\u679c\u662f mate pair \u7684\u6570\u636e\uff0c\u4f1a\u751f\u6210 \n*_3.fastq.gz\n\uff0c\u5982\u679c\u4e0d\u9700\u8981\u5219\u53ef\u624b\u5de5\u5220\u9664\u3002\n\n\n# \u6838\u5bf9 PE \u53cc\u7aef\u6d4b\u5e8f\u6587\u4ef6\u662f\u5426\u4e00\u81f4\n\n$ ls -l *_1.fastq.gz \n|\n awk \n'{print $9}'\n \n|\n awk -F\n'_'\n \n'{print $1}'\n > R1.txt\n$ ls -l *_2.fastq.gz \n|\n awk \n'{print $9}'\n \n|\n awk -F\n'_'\n \n'{print $1}'\n > R2.txt\n$ diff R1.txt R2.txt\n\n# diff \u5982\u679c2\u4e2a\u6587\u4ef6\u5185\u5bb9\u4e00\u81f4\uff0c\u5219\u7ec8\u7aef\u4e0d\u4f1a\u6709\u8f93\u51fa\u3002\u5426\u5219\u5c31\u8981\u5220\u9664\u6587\u4ef6\n\n\n\n\n\n2. \u6570\u636e\u7684\u524d\u671f\u5904\u7406\n\u00b6\n\n\n\u7531\u4e8e\u662f\u516c\u5171\u6570\u636e\u5e93\u4e0b\u8f7d\u7684\u6570\u636e\uff0c\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u6d4b\u5e8f\u5b9e\u9a8c\u8d28\u91cf\u6216\u8005\u6570\u636e\u63d0\u4ea4\u8005\u662f\u5426\u63d0\u4ea4\u7684\u662f\u8d28\u63a7\u540e\u7684\u6570\u636e\u3002\u56e0\u6b64\u5efa\u8bae\u8981\u5bf9\u6570\u636e\u505a\u4e00\u4e9b\u524d\u671f\u7684\u8d28\u63a7\u5904\u7406\u3002\n\n\n2.1 \u6570\u636e QC\n\u00b6\n\n\n\u9996\u5148\u5bf9\u57fa\u56e0\u7ec4 GC \u542b\u91cf\u548c Q \u503c\u8fdb\u884c\u521d\u6b65\u7b5b\u9009\uff0c\u5bf9\u4e8e\u504f\u5dee\u8f83\u5927\u7684\u6570\u636e\u8003\u8651\u76f4\u63a5\u5254\u9664\uff08\u6216\u8005\u7528\u5176\u4ed6\u8f6f\u4ef6\u9a8c\u8bc1\u770b\u662f\u5426\u662f\u9519\u8bef\u7269\u79cd\uff09\u3002\u8fd9\u91cc\u4f7f\u7528\u7684\u5de5\u5177\u4e3a \nbioawk\n \u6216 \nparallel\n\u3002\n\n\n# \u56e0\u4e3a reads \u8986\u76d6\u5ea6\u53ef\u80fd\u5e76\u4e0d\u5747\u4e00\uff0c\u9ad8\u8986\u76d6\u5ea6\u7684\u533a\u57df GC \u542b\u91cf\u6bd4\u91cd\u4f1a\u7565\u9ad8\u3002\u4f46\u662f\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u6b63\u5e38\u6d4b\u5e8f\u7684\u57fa\u56e0\u7ec4\u8fd9\u79cd\u533a\u57df\u76f8\u5bf9\u6765\u8bf4\u4e0d\u591a\uff0c\u5e73\u5747\u5230\u57fa\u56e0\u7ec4\u540e\u4f1a\u6574\u4f53 GC \u542b\u91cf\u5f71\u54cd\u4e0d\u5927\u3002\n\n$ \nfor\n i in *.fastq.gz\n;\n \ndo\n bioawk -c fastx \n'BEGIN{n=0;q=0}{n+=gc($seq);q+=meanqual($seq)}END{print $name,n/NR,q/NR}'\n \n$i\n >> result.txt\n;\n \ndone\n\n\n# awk \u7c7b\u5de5\u5177\u662f\u5355\u8fdb\u7a0b\u7684\uff0c\u4e3a\u4e86\u52a0\u901f\u53ef\u4ee5\u4f7f\u7528 parallel \u6765\u5e76\u884c\u8ba1\u7b97\n\n$ parallel \n\"bioawk -c fastx 'BEGIN{n=0;q=0}{n+=gc(\\$seq);q+=meanqual(\\$seq)}END{print \\$name,n/NR,q/NR}' >> result.txt\"\n ::: *.fastq.gz\n\n# \u6309\u7167 GC \u542b\u91cf\u6392\u5e8f\n\n$ cat result.txt \n|\n sort -n -k3\n\n\n\n\nR \u7ed8\u5236 gc \u5206\u5e03\u56fe\uff0c\u5982\u679c gc \u542b\u91cf\u504f\u5dee\u8d85\u8fc7 10% \u65f6\u5c31\u5254\u9664\u8be5\u57fa\u56e0\u7ec4\u6570\u636e\u3002\n\n\n>\n \nlibrary\n(\nggplot2\n)\n\n\n>\n data\n<-\nread.table\n(\n\"result.txt\"\n)\n\n\n>\n qplot\n(\nv2\n,\n v3\n,\n data\n=\ndata\n)\n\n\n\n\n\n\u7ed3\u679c\u663e\u793a\u6709\u4e00\u4e2a\u9ed1\u70b9\u7684GC\u542b\u91cf\u7279\u522b\u4f4e\uff0c\u4e14Q\u503c\u7279\u522b\u9ad8\u3002\u7ed3\u679c\u663e\u793a\u6d4b\u5e8f\u5b9e\u9a8c SRR2155551 \u548c SRR2164197 \u7684 GC \u542b\u91cf\u4ec5\u4e3a22%\uff0c\u800c\u5176\u4ed6\u6837\u672c GC \u542b\u91cf\u8303\u56f4\u572834%\uff5e41%\u3002\u4e14\u8fd92\u4e2a\u5b9e\u9a8c\u7684\u6837\u672c\u5747\u4e3a\u540c\u4e00\u4e2a\uff0c\u662f1\u4e2a\u6837\u672c\u76842\u6b64\u6d4b\u5e8f\uff08\u6216\u8005\u6570\u636e\u4e0a\u4f20\u4e862\u6b21\uff09\uff0c\u56e0\u6b64\u5c06\u5176\u5254\u9664\u3002\n\n\n2.2 \u53bb\u9664\u63a5\u5934\n\u00b6\n\n\n\u5176\u6b21\u8981\u53bb\u9664\u63a5\u5934\u7684\u6c61\u67d3\u3002\u56e0\u4e3a\u5206\u6790\u6d41\u7a0b\u4e2d\u4e0d\u4ec5\u5305\u62ec mapping \u7684\u65b9\u5f0f\uff0c\u8fd8\u5305\u542b de novo assembly\uff0c\u4e3a\u4e86\u907f\u514d\u63a5\u5934\u5e8f\u5217\u5bf9\u57fa\u56e0\u7ec4\u62fc\u63a5\u7684\u5f71\u54cd\uff0c\u8fd9\u91cc\u6700\u597d\u8fdb\u884c\u3002\u8fd9\u91cc\u4f7f\u7528\u7684\u5de5\u5177\u662f \nFastQC\n \u548c \nfadapa\n\n\n# \u4f7f\u7528\u811a\u672c scan_adaptors.py \u6765\u626b\u63cf\u4e0b\u8f7d\u7684\u9ad8\u901a\u91cf\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u662f\u5426\u6709\u63a5\u5934\u6c61\u67d3\u7684\u60c5\u51b5\u3002\n$ fastqc -t 40 -q --extract *.fastq.gz\n$ python scan_fastqc_report.py -d qc\n\n\n\n\n#!usr/bin/env python\n\n\n# -*- coding: utf-8 -*-\n\n\n# scripts name: scan_fastqc_report.py\n\n\nimport\n \nos\n\n\nfrom\n \nBio.Seq\n \nimport\n \nSeq\n\n\nfrom\n \nBio\n \nimport\n \nSeqIO\n\n\nfrom\n \nBio.SeqRecord\n \nimport\n \nSeqRecord\n\n\nfrom\n \nBio.Alphabet\n \nimport\n \ngeneric_nucleotide\n\n\nfrom\n \nfadapa\n \nimport\n \nFadapa\n\n\nimport\n \nargparse\n\n\n\nparser\n \n=\n \nargparse\n.\nArgumentParser\n()\n\n\nparser\n.\nadd_argument\n(\n'-i'\n,\n \n'--input'\n,\n \naction\n=\n'store'\n,\n \ndest\n=\n'qcfile'\n,\n \ntype\n=\nstr\n,\n \nhelp\n=\n\"fastqc extract data file\"\n)\n\n\nparser\n.\nadd_argument\n(\n'-o'\n,\n \n'--output'\n,\n \naction\n=\n'store'\n,\n \ndest\n=\n'adaptor'\n,\n \ntype\n=\nstr\n,\n \nhelp\n=\n\"adaptors file\"\n)\n\n\nargs\n \n=\n \nparser\n.\nparse_args\n()\n\n\nqc_file\n \n=\n \nFadapa\n(\nargs\n.\nqcfile\n)\n\n\n\nif\n \nqc_file\n.\nsummary\n()[\n-\n3\n][\n0\n]\n \n==\n \n'fail'\n:\n\n    \nadaptors\n \n=\n \n[]\n\n    \nors\n \n=\n \nqc_file\n.\nclean_data\n(\n\"Overrepresented sequences\"\n)\n\n    \nors\n.\npop\n(\n0\n)\n\n\n    \nfor\n \n(\nindex\n,\n \nseq\n)\n \nin\n \nenumerate\n(\nors\n):\n\n        \nif\n \n'NNNNNN'\n \nin\n \nseq\n[\n0\n]:\n\n            \ncontinue\n\n        \nadaptors\n.\nappend\n(\nSeqRecord\n(\nSeq\n(\nseq\n[\n0\n],\n \ngeneric_nucleotide\n),\n \nid\n=\n\"adaptor_\n%d\n\"\n \n%\n \n(\nindex\n+\n1\n)))\n\n\n    \nif\n \nnot\n \nos\n.\npath\n.\nexists\n(\nargs\n.\nadaptor\n):\n\n        \nos\n.\nmakedirs\n(\nargs\n.\nadaptor\n)\n\n    \nSeqIO\n.\nwrite\n(\nadaptors\n,\n \n\"\n%s\n/adaptor.fasta\"\n \n%\n \nargs\n.\nadaptor\n,\n \n\"fasta\"\n)\n\n    \nprint\n \n\"Overrepresented sequences has been save to adaptors.fasta\"\n\n\nelse\n:\n\n    \nprint\n \n\"No Overrepresented sequences\"\n\n\n\n\n\n3. Pangenome \u5206\u6790\n\u00b6\n\n\n3.1 \u57fa\u56e0\u7ec4\u7ec4\u88c5\n\u00b6\n\n\n$ spades.py\n\n\n\n\n3.2 \u57fa\u56e0\u7ec4\u6ce8\u91ca\n\u00b6\n\n\n$ prokka\n\n\n\n\n3.3 Roary\n\u00b6\n\n\n$ roary -p -e mafft *.gff\n\n\n\n\n3.4 Harvest\n\u00b6\n\n\n$\n\n\n\n\n4. SNPs \u6784\u5efa\u8fdb\u5316\u6811\n\u00b6\n\n\n4.1 \u57fa\u4e8e\u53c2\u8003\u57fa\u56e0\u7ec4 Mapping \u7684\u65b9\u6cd5\n\u00b6\n\n\nSnippy\n\n\n# snippy mapping\n$ for i in *.fastq.gz | sort | uniq; \\\n> do snippy --cpus 20 --outdir $i -ref reference.fa \\\n> --R1 $i*_1*.fastq.gz --R2 $i*_2*.fastq.gz; done\n\n# snippy-core \u6c47\u96c6 snps\n$ snippy-core --prefix core-snps SRR* DRR* ERR*\n\n# raxml \u7ed8\u5236\u8fdb\u5316\u6811\n$ raxml -f a -x 12345 -p 12345 -# 100 -m GTRGAMMA -s core-snps.aln -n ex -T 40\n\n# \u5c06 raxml \u8fdb\u5316\u6811\u7ed3\u679c\u6587\u4ef6\u4ece\u670d\u52a1\u5668\u4f20\u5230\u672c\u5730\u7535\u8111\uff0c\u7528 figtree \u751f\u6210\u56fe\u7247\n$ scp user@server-ip:/path/RAxML_bestTree.ex .\n$ figtree RAxML_bestTree.ex &\n\n\n\n\nTools\n\n\n5. \u57fa\u4e8e\u7ec4\u88c5\u7ed3\u679c\u7684\u6838\u5fc3\u57fa\u56e0\u7ec4\u5e8f\u5217\n\u00b6\n\n\n\u76f8\u5173\u8f6f\u4ef6\u5b89\u88c5\n\u00b6\n\n\nedirect\n\n\n$ wget ftp://ftp.ncbi.nlm.nih.gov/entrez/entrezdirect/edirect.tar.gz\n$ sudo tar zxf edirect.tar.gz -C /opt\n$ sudo chown -R root:root /opt/edirect\n$ \ncd\n /opt/edirect \n&&\n sudo ./setup.sh\n$ sudo ln -s /opt/edirect/* /usr/local/sbin/\n\n\n\n\nsra-tools\n\n\n$ wget http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.7.0/sratoolkit.2.7.0-ubuntu64.tar.gz\n$ sudo tar zxf sratoolkit.2.7.0-ubuntu64.tar.gz -C /opt/sratoolkit\n$ sudo chown -R root:root /opt/sratoolkit \n&&\n \ncd\n /opt/sratoolkit\n$ sudo ln -s \n`\npwd\n`\n/bin/* /usr/local/sbin/\n\n\n\n\nbio-awk\n\n\n$ sudo apt-get install bison\n$ git clone https://github.com/lh3/bioawk\n$ \ncd\n bioawk \n&&\n make\n$ sudo cp bioawk /usr/local/sbin\n\n\n\n\nparallel\n\n\n$ sudo apt install parallel\n\n\n\n\ngplot\n\n\n$ sudo apt install gnuplot\n$ git clone https://github.com/RhysU/gplot\n$ sudo cp gplot/gplot /usr/local/sbin\n\n\n\n\nFastQC\n\n\n$ wget http://www.bioinformatics.babraham.ac.uk/projects/fastqc/fastqc_v0.11.5.zip\n$ sudo unzip fastqc_v0.11.5.zip\n$ sudo mv fastqc_v0.11.5 /opt/fastqc \n&&\n sudo chown -R root:root /opt/fastqc\n$ sudo cp /opt/fastqc/fastqc /usr/local/sbin\n\n\n\n\nFadapa\n\n\n$ sudo pip install fadapa\n\n\n\n\nsnippy\n\n\n$ git clone https://github.com/tseemann/snippy\n$ sudo cp snippy/bin/* /usr/local/sbin\n$ sudo cp snippy/binaries/linux/* /usr/local/sbin\n\n\n\n\nRAxML\n\n\n$ wget https://github.com/stamatak/standard-RAxML/archive/v8.1.17.tar.gz\n$ sudo tar zxf v8.1.17.tar.gz -C /opt/raxml\n$ sudo chown -R root:root /opt/raxml \n&&\n \ncd\n /opt/raxml\n$ sudo make -f Makefile.SSE3.PTHREADS.gcc\n$ sudo ln -s \n`\npwd\n`\n/raxmlHPC-PTHREADS-SSE3 /usr/local/raxml\n\n\n\n\nReference\n\u00b6\n\n\n\n\nedirect help book: \nhttp://www.ncbi.nlm.nih.gov/books/NBK179288/\n\n\nsra-tools wiki: \nhttps://github.com/ncbi/sra-tools/wiki\n\n\nparallel tutorial: \nhttps://www.biostars.org/p/63816/\n\n\ngnuplot tutorial: \nhttp://lzz5235.github.io/2016/01/12/gnuplot.html\n\n\ngplot usage: \nhttps://github.com/RhysU/gplot/blob/master/README.md",
            "title": "10.2 \u70ad\u75bd\u82bd\u80de\u6746\u83cc\u6bd4\u8f83\u57fa\u56e0\u7ec4\u5b66\u7814\u7a76"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/#snps",
            "text": "\u75be\u63a7\u90e8\u95e8\u5c5e\u4e8e\u4fdd\u969c\u5355\u4f4d\uff0c\u9700\u8981\u52a0\u5f3a\u5bf9\u751f\u7269\u6050\u6016\u4e8b\u4ef6\u7684\u9632\u63a7\u548c\u5e94\u5bf9\u5904\u7f6e\u80fd\u529b\u3002\u6700\u8457\u540d\u7684\u7ec6\u83cc\u6027\u751f\u7269\u6050\u6016\u6218\u5242\u5c31\u662f\u542b\u6709\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u7684\u767d\u8272\u7c89\u672b\u3002\u65e5\u5e38\u5de5\u4f5c\u4e2d\u65e0\u6cd5\u63a5\u89e6\u5230\u8fd9\u4e9b\u75c5\u539f\uff0c\u56e0\u6b64\u5728\u7ecf\u9a8c\u548c\u6280\u80fd\u65b9\u9762\u8f83\u4e3a\u7f3a\u4e4f\u3002\u5728G20\u671f\u95f4\uff0c\u5185\u90e8\u4e5f\u8fdb\u884c\u4e86\u76f8\u5173\u9879\u76ee\u7684\u5e94\u6025\u62c9\u7ec3\uff0c\u9664\u6b64\u4e4b\u5916\u4e3a\u4e86\u63d0\u5347\u80fd\u529b\u5efa\u8bbe\uff0c\u5e94\u5bf9\u53ef\u80fd\u53d1\u751f\u7684\u7591\u4f3c\u4e8b\u4ef6\uff0c\u5728\u5b9e\u9a8c\u5ba4\u5feb\u901f\u5206\u6790\u548c\u6eaf\u6e90\u5de5\u4f5c\u505a\u597d\u80fd\u529b\u50a8\u5907\uff0c\u6211\u4eec\u5bf9\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u7684\u57fa\u56e0\u7ec4\u6570\u636e\u8fdb\u884c\u4e86\u57fa\u672c\u5206\u6790\uff0c\u5bf9\u76f8\u5173\u8d44\u6599\u548c\u4fe1\u606f\u8fdb\u884c\u4e86\u50a8\u5907\u3002  \u4e3b\u8981\u901a\u8fc7\u6784\u5efa\u76f8\u5e94\u7684\u5206\u6790\u6d41\u7a0b\uff0c\u83b7\u5f97\u83cc\u682a\u57fa\u56e0\u7ec4\u6570\u636e\u540e\u53ef\u4ee5\u7b2c\u4e00\u65f6\u95f4\u5c31\u8fdb\u884c\u6eaf\u6e90\u65b9\u9762\u7684\u7814\u7a76\u3002\u4ece\u800c\u5728\u8fd9\u51c6\u5907\u5de5\u4f5c\u7684\u8fc7\u7a0b\u4e2d\u5f62\u6210\u4e86\u6b64\u6587\u6863\u3002\u4e3b\u8981\u76ee\u7684\u4e5f\u662f\u4e3a\u4e86\u629b\u7816\u5f15\u7389\uff0c\u505a\u5230\u4e3e\u4e00\u53cd\u4e09\uff0c\u7ed9\u5176\u4ed6\u7ec6\u83cc\u6027\u75c5\u539f\u5fae\u751f\u7269\u57fa\u56e0\u7ec4\u6eaf\u6e90\u5206\u6790\u65f6\u63d0\u4f9b\u53c2\u8003\u3002  \u8f6f\u4ef6\u4e2d\u4f7f\u7528\u7684\u4e00\u4e9b\u53c2\u6570\u662f\u6839\u636e\u81ea\u5df1\u7684\u670d\u52a1\u5668\u8bbe\u7f6e\u7684\uff0c\u5177\u4f53\u8fd0\u884c\u65f6\u9700\u8981\u6839\u636e\u8ba1\u7b97\u673a\u914d\u7f6e\u8fdb\u884c\u76f8\u5e94\u7684\u8c03\u6574\u3002\u6211\u4eec\u670d\u52a1\u5668\u7684\u914d\u7f6e\u5982\u4e0b\uff1a   Note   CPU: E3 2650v3 x2  Memory: ECC 16G x8  Harddisk: 7200\u8f6c 1T x4 \u7ec4 Raid 5 + 1 Hotspare  System: Ubuntu 16.04 LTS 64bit",
            "title": "\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u57fa\u56e0\u7ec4 SNPs \u5206\u6790"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/#1",
            "text": "\u6570\u636e\u91c7\u7528 NCBI SRA \u6570\u636e\u5e93\u4e2d\u7684\u516c\u5171\u6570\u636e\u6765\u4f5c\u5206\u6790\u3002\u9996\u5148\u68c0\u7d22 NCBI SRA \u6570\u636e\u5e93\u4e2d\u6240\u6709\u4f7f\u7528 illumina \u5e73\u53f0\u5bf9\u70ad\u75bd\u82bd\u80de\u6746\u83cc\u57fa\u56e0\u7ec4\u8fdb\u884c PE \u6d4b\u5e8f\u7684 \u5927\u4e8e 100M \u7684 NGS \u6570\u636e\uff0c\u5e76\u5728\u4e0b\u8f7d\u8fd9\u4e9b sra \u6570\u636e\u540e\u8f6c\u6362\u6210 fastq.gz \u683c\u5f0f\u3002\u4f7f\u7528\u7684\u5de5\u5177\u4e3b\u8981\u4e3a  edirect  \u548c  sra-tools \u3002  $ esearch -db sra -query  '\"Bacillus anthracis\"[Organism] AND \\  > (Hiseq[ALL] OR Miseq[ALL]) AND \"strategy wgs\"[Properties]'   |   \\ \n> efetch -db sra -format runinfo  |  grep  'PAIRED'   |  grep  '^[DSE]RR*'   |   \\ \n> awk -F ','   '{if($5>100000000) print $1}'   |  sort -n  |   \\ \n> xargs fastq-dump --split-files --gzip --outdir bacillus_anthracis  \u867d\u7136\u6211\u4eec\u68c0\u7d22\u65f6\u9650\u5b9a\u4e86 PE \u6d4b\u5e8f\u6570\u636e\uff0c\u4f46\u662f\u5f88\u591a\u65f6\u5019\u6570\u636e\u5e93\u91cc\u7684\u4fe1\u606f\u4e0d\u51c6\u786e\uff0c\u8fd8\u662f\u4f1a\u6709\u5f88\u591a SE \u7684\u6570\u636e\u4f1a\u88ab\u4e0b\u8f7d\u3002\u786e\u5b9a PE \u6216\u8005 SE \u7684\u65b9\u6cd5\u5f88\u591a\u3002  # sra-stat \u7edf\u8ba1 sra \u6587\u4ef6\uff0cnreads=1 \u8868\u793a SE \u6d4b\u5e8f\uff0cnreads=2 \u8868\u793a PE \u6d4b\u5e8f\u3002\u7a0b\u5e8f\u7edf\u8ba1\u6574\u4e2a\u6587\u4ef6\uff0c\u901f\u5ea6\u6bd4\u8f83\u6162 \n$ sra-stat -xs *.sra  |  grep  \"nreads\"  # \u6279\u91cf\u5220\u9664 \n$ parallel  'sra-stat -xs'  ::: *.sra  |  xtract -Pattern Run -element Run@accession  \\ \n> Statistics@nreads  |  awk  '{if($2==1) print $1}'   |  xargs rm # fastq-dump \u8f93\u51fa\u4e00\u4e2a reads\uff0c\u8ba1\u7b97\u884c\u6570\u5982\u679c\u662f4\uff0c\u90a3\u4e48\u5c31\u662f SE\uff0c\u5982\u679c\u662f8,\u5219\u662f PE \n$ fastq-dump -X  1  --split-spot -Z SRR955386.sra  |  wc -l # fastq-dump \u81ea\u5df1\u5224\u65ad\uff0c\u5f53 sra \u6587\u4ef6\u662f SE \u6d4b\u5e8f\u65f6\uff0cfastq-dump \u53ea\u80fd\u751f\u62101\u4e2a *_1.fastq \u6587\u4ef6 \n$ fastq-dump --split-files ERR493452.sra # fastq-dump \u53ea\u80fd\u8c03\u7528\u5355\u6838\u8f6c\u6362\uff0c\u53ef\u4ee5\u4f7f\u7528 parallel \u5de5\u5177\u5e76\u884c\u5904\u7406\u52a0\u5feb\u901f\u5ea6\u3002 \n$ parallel  \"fastq-dump --split-files --gzip --outdir bacillus_anthracis\"  ::: *.sra  \u6709\u65f6\u5019\u6709\u4e9bsra\u6587\u4ef6\u5728 dump \u65f6\u4f1a\u51fa\u9519\uff0c\u4e0d\u80fd\u751f\u6210\u5bf9\u5e94\u7684 PE fastq \u6587\u4ef6\uff0c\u8fd9\u5c31\u9700\u8981\u6bd4\u8f83\u540e\u5220\u9664\u4e86\u3002\u5982\u679c\u662f mate pair \u7684\u6570\u636e\uff0c\u4f1a\u751f\u6210  *_3.fastq.gz \uff0c\u5982\u679c\u4e0d\u9700\u8981\u5219\u53ef\u624b\u5de5\u5220\u9664\u3002  # \u6838\u5bf9 PE \u53cc\u7aef\u6d4b\u5e8f\u6587\u4ef6\u662f\u5426\u4e00\u81f4 \n$ ls -l *_1.fastq.gz  |  awk  '{print $9}'   |  awk -F '_'   '{print $1}'  > R1.txt\n$ ls -l *_2.fastq.gz  |  awk  '{print $9}'   |  awk -F '_'   '{print $1}'  > R2.txt\n$ diff R1.txt R2.txt # diff \u5982\u679c2\u4e2a\u6587\u4ef6\u5185\u5bb9\u4e00\u81f4\uff0c\u5219\u7ec8\u7aef\u4e0d\u4f1a\u6709\u8f93\u51fa\u3002\u5426\u5219\u5c31\u8981\u5220\u9664\u6587\u4ef6",
            "title": "1. \u83b7\u53d6\u516c\u5171\u6570\u636e\u5e93\u6570\u636e"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/#2",
            "text": "\u7531\u4e8e\u662f\u516c\u5171\u6570\u636e\u5e93\u4e0b\u8f7d\u7684\u6570\u636e\uff0c\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u6d4b\u5e8f\u5b9e\u9a8c\u8d28\u91cf\u6216\u8005\u6570\u636e\u63d0\u4ea4\u8005\u662f\u5426\u63d0\u4ea4\u7684\u662f\u8d28\u63a7\u540e\u7684\u6570\u636e\u3002\u56e0\u6b64\u5efa\u8bae\u8981\u5bf9\u6570\u636e\u505a\u4e00\u4e9b\u524d\u671f\u7684\u8d28\u63a7\u5904\u7406\u3002",
            "title": "2. \u6570\u636e\u7684\u524d\u671f\u5904\u7406"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/#21-qc",
            "text": "\u9996\u5148\u5bf9\u57fa\u56e0\u7ec4 GC \u542b\u91cf\u548c Q \u503c\u8fdb\u884c\u521d\u6b65\u7b5b\u9009\uff0c\u5bf9\u4e8e\u504f\u5dee\u8f83\u5927\u7684\u6570\u636e\u8003\u8651\u76f4\u63a5\u5254\u9664\uff08\u6216\u8005\u7528\u5176\u4ed6\u8f6f\u4ef6\u9a8c\u8bc1\u770b\u662f\u5426\u662f\u9519\u8bef\u7269\u79cd\uff09\u3002\u8fd9\u91cc\u4f7f\u7528\u7684\u5de5\u5177\u4e3a  bioawk  \u6216  parallel \u3002  # \u56e0\u4e3a reads \u8986\u76d6\u5ea6\u53ef\u80fd\u5e76\u4e0d\u5747\u4e00\uff0c\u9ad8\u8986\u76d6\u5ea6\u7684\u533a\u57df GC \u542b\u91cf\u6bd4\u91cd\u4f1a\u7565\u9ad8\u3002\u4f46\u662f\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u6b63\u5e38\u6d4b\u5e8f\u7684\u57fa\u56e0\u7ec4\u8fd9\u79cd\u533a\u57df\u76f8\u5bf9\u6765\u8bf4\u4e0d\u591a\uff0c\u5e73\u5747\u5230\u57fa\u56e0\u7ec4\u540e\u4f1a\u6574\u4f53 GC \u542b\u91cf\u5f71\u54cd\u4e0d\u5927\u3002 \n$  for  i in *.fastq.gz ;   do  bioawk -c fastx  'BEGIN{n=0;q=0}{n+=gc($seq);q+=meanqual($seq)}END{print $name,n/NR,q/NR}'   $i  >> result.txt ;   done  # awk \u7c7b\u5de5\u5177\u662f\u5355\u8fdb\u7a0b\u7684\uff0c\u4e3a\u4e86\u52a0\u901f\u53ef\u4ee5\u4f7f\u7528 parallel \u6765\u5e76\u884c\u8ba1\u7b97 \n$ parallel  \"bioawk -c fastx 'BEGIN{n=0;q=0}{n+=gc(\\$seq);q+=meanqual(\\$seq)}END{print \\$name,n/NR,q/NR}' >> result.txt\"  ::: *.fastq.gz # \u6309\u7167 GC \u542b\u91cf\u6392\u5e8f \n$ cat result.txt  |  sort -n -k3  R \u7ed8\u5236 gc \u5206\u5e03\u56fe\uff0c\u5982\u679c gc \u542b\u91cf\u504f\u5dee\u8d85\u8fc7 10% \u65f6\u5c31\u5254\u9664\u8be5\u57fa\u56e0\u7ec4\u6570\u636e\u3002  >   library ( ggplot2 )  >  data <- read.table ( \"result.txt\" )  >  qplot ( v2 ,  v3 ,  data = data )   \u7ed3\u679c\u663e\u793a\u6709\u4e00\u4e2a\u9ed1\u70b9\u7684GC\u542b\u91cf\u7279\u522b\u4f4e\uff0c\u4e14Q\u503c\u7279\u522b\u9ad8\u3002\u7ed3\u679c\u663e\u793a\u6d4b\u5e8f\u5b9e\u9a8c SRR2155551 \u548c SRR2164197 \u7684 GC \u542b\u91cf\u4ec5\u4e3a22%\uff0c\u800c\u5176\u4ed6\u6837\u672c GC \u542b\u91cf\u8303\u56f4\u572834%\uff5e41%\u3002\u4e14\u8fd92\u4e2a\u5b9e\u9a8c\u7684\u6837\u672c\u5747\u4e3a\u540c\u4e00\u4e2a\uff0c\u662f1\u4e2a\u6837\u672c\u76842\u6b64\u6d4b\u5e8f\uff08\u6216\u8005\u6570\u636e\u4e0a\u4f20\u4e862\u6b21\uff09\uff0c\u56e0\u6b64\u5c06\u5176\u5254\u9664\u3002",
            "title": "2.1 \u6570\u636e QC"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/#22",
            "text": "\u5176\u6b21\u8981\u53bb\u9664\u63a5\u5934\u7684\u6c61\u67d3\u3002\u56e0\u4e3a\u5206\u6790\u6d41\u7a0b\u4e2d\u4e0d\u4ec5\u5305\u62ec mapping \u7684\u65b9\u5f0f\uff0c\u8fd8\u5305\u542b de novo assembly\uff0c\u4e3a\u4e86\u907f\u514d\u63a5\u5934\u5e8f\u5217\u5bf9\u57fa\u56e0\u7ec4\u62fc\u63a5\u7684\u5f71\u54cd\uff0c\u8fd9\u91cc\u6700\u597d\u8fdb\u884c\u3002\u8fd9\u91cc\u4f7f\u7528\u7684\u5de5\u5177\u662f  FastQC  \u548c  fadapa  # \u4f7f\u7528\u811a\u672c scan_adaptors.py \u6765\u626b\u63cf\u4e0b\u8f7d\u7684\u9ad8\u901a\u91cf\u57fa\u56e0\u7ec4\u6d4b\u5e8f\u6570\u636e\u662f\u5426\u6709\u63a5\u5934\u6c61\u67d3\u7684\u60c5\u51b5\u3002\n$ fastqc -t 40 -q --extract *.fastq.gz\n$ python scan_fastqc_report.py -d qc  #!usr/bin/env python  # -*- coding: utf-8 -*-  # scripts name: scan_fastqc_report.py  import   os  from   Bio.Seq   import   Seq  from   Bio   import   SeqIO  from   Bio.SeqRecord   import   SeqRecord  from   Bio.Alphabet   import   generic_nucleotide  from   fadapa   import   Fadapa  import   argparse  parser   =   argparse . ArgumentParser ()  parser . add_argument ( '-i' ,   '--input' ,   action = 'store' ,   dest = 'qcfile' ,   type = str ,   help = \"fastqc extract data file\" )  parser . add_argument ( '-o' ,   '--output' ,   action = 'store' ,   dest = 'adaptor' ,   type = str ,   help = \"adaptors file\" )  args   =   parser . parse_args ()  qc_file   =   Fadapa ( args . qcfile )  if   qc_file . summary ()[ - 3 ][ 0 ]   ==   'fail' : \n     adaptors   =   [] \n     ors   =   qc_file . clean_data ( \"Overrepresented sequences\" ) \n     ors . pop ( 0 ) \n\n     for   ( index ,   seq )   in   enumerate ( ors ): \n         if   'NNNNNN'   in   seq [ 0 ]: \n             continue \n         adaptors . append ( SeqRecord ( Seq ( seq [ 0 ],   generic_nucleotide ),   id = \"adaptor_ %d \"   %   ( index + 1 ))) \n\n     if   not   os . path . exists ( args . adaptor ): \n         os . makedirs ( args . adaptor ) \n     SeqIO . write ( adaptors ,   \" %s /adaptor.fasta\"   %   args . adaptor ,   \"fasta\" ) \n     print   \"Overrepresented sequences has been save to adaptors.fasta\"  else : \n     print   \"No Overrepresented sequences\"",
            "title": "2.2 \u53bb\u9664\u63a5\u5934"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/#3-pangenome",
            "text": "",
            "title": "3. Pangenome \u5206\u6790"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/#31",
            "text": "$ spades.py",
            "title": "3.1 \u57fa\u56e0\u7ec4\u7ec4\u88c5"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/#32",
            "text": "$ prokka",
            "title": "3.2 \u57fa\u56e0\u7ec4\u6ce8\u91ca"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/#33-roary",
            "text": "$ roary -p -e mafft *.gff",
            "title": "3.3 Roary"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/#34-harvest",
            "text": "$",
            "title": "3.4 Harvest"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/#4-snps",
            "text": "",
            "title": "4. SNPs \u6784\u5efa\u8fdb\u5316\u6811"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/#41-mapping",
            "text": "Snippy  # snippy mapping\n$ for i in *.fastq.gz | sort | uniq; \\\n> do snippy --cpus 20 --outdir $i -ref reference.fa \\\n> --R1 $i*_1*.fastq.gz --R2 $i*_2*.fastq.gz; done\n\n# snippy-core \u6c47\u96c6 snps\n$ snippy-core --prefix core-snps SRR* DRR* ERR*\n\n# raxml \u7ed8\u5236\u8fdb\u5316\u6811\n$ raxml -f a -x 12345 -p 12345 -# 100 -m GTRGAMMA -s core-snps.aln -n ex -T 40\n\n# \u5c06 raxml \u8fdb\u5316\u6811\u7ed3\u679c\u6587\u4ef6\u4ece\u670d\u52a1\u5668\u4f20\u5230\u672c\u5730\u7535\u8111\uff0c\u7528 figtree \u751f\u6210\u56fe\u7247\n$ scp user@server-ip:/path/RAxML_bestTree.ex .\n$ figtree RAxML_bestTree.ex &  Tools",
            "title": "4.1 \u57fa\u4e8e\u53c2\u8003\u57fa\u56e0\u7ec4 Mapping \u7684\u65b9\u6cd5"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/#5",
            "text": "",
            "title": "5. \u57fa\u4e8e\u7ec4\u88c5\u7ed3\u679c\u7684\u6838\u5fc3\u57fa\u56e0\u7ec4\u5e8f\u5217"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/#_1",
            "text": "edirect  $ wget ftp://ftp.ncbi.nlm.nih.gov/entrez/entrezdirect/edirect.tar.gz\n$ sudo tar zxf edirect.tar.gz -C /opt\n$ sudo chown -R root:root /opt/edirect\n$  cd  /opt/edirect  &&  sudo ./setup.sh\n$ sudo ln -s /opt/edirect/* /usr/local/sbin/  sra-tools  $ wget http://ftp-trace.ncbi.nlm.nih.gov/sra/sdk/2.7.0/sratoolkit.2.7.0-ubuntu64.tar.gz\n$ sudo tar zxf sratoolkit.2.7.0-ubuntu64.tar.gz -C /opt/sratoolkit\n$ sudo chown -R root:root /opt/sratoolkit  &&   cd  /opt/sratoolkit\n$ sudo ln -s  ` pwd ` /bin/* /usr/local/sbin/  bio-awk  $ sudo apt-get install bison\n$ git clone https://github.com/lh3/bioawk\n$  cd  bioawk  &&  make\n$ sudo cp bioawk /usr/local/sbin  parallel  $ sudo apt install parallel  gplot  $ sudo apt install gnuplot\n$ git clone https://github.com/RhysU/gplot\n$ sudo cp gplot/gplot /usr/local/sbin  FastQC  $ wget http://www.bioinformatics.babraham.ac.uk/projects/fastqc/fastqc_v0.11.5.zip\n$ sudo unzip fastqc_v0.11.5.zip\n$ sudo mv fastqc_v0.11.5 /opt/fastqc  &&  sudo chown -R root:root /opt/fastqc\n$ sudo cp /opt/fastqc/fastqc /usr/local/sbin  Fadapa  $ sudo pip install fadapa  snippy  $ git clone https://github.com/tseemann/snippy\n$ sudo cp snippy/bin/* /usr/local/sbin\n$ sudo cp snippy/binaries/linux/* /usr/local/sbin  RAxML  $ wget https://github.com/stamatak/standard-RAxML/archive/v8.1.17.tar.gz\n$ sudo tar zxf v8.1.17.tar.gz -C /opt/raxml\n$ sudo chown -R root:root /opt/raxml  &&   cd  /opt/raxml\n$ sudo make -f Makefile.SSE3.PTHREADS.gcc\n$ sudo ln -s  ` pwd ` /raxmlHPC-PTHREADS-SSE3 /usr/local/raxml",
            "title": "\u76f8\u5173\u8f6f\u4ef6\u5b89\u88c5"
        },
        {
            "location": "/chapter_10/02_comparative-analysis-Ban-genomes/#reference",
            "text": "edirect help book:  http://www.ncbi.nlm.nih.gov/books/NBK179288/  sra-tools wiki:  https://github.com/ncbi/sra-tools/wiki  parallel tutorial:  https://www.biostars.org/p/63816/  gnuplot tutorial:  http://lzz5235.github.io/2016/01/12/gnuplot.html  gplot usage:  https://github.com/RhysU/gplot/blob/master/README.md",
            "title": "Reference"
        }
    ]
}